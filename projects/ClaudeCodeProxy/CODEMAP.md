# CODEMAP — Claude Code Proxy + Haiku → Z.AI MITM

| Path | Status | Notes |
| --- | --- | --- |
| **services/mitm-subagent-offload/** | Active | MITM router + addons (Haiku → Z.AI). Main code path. |
| **services/go-anth-shim/** | New (scaffold) | Go Anthropic-compatible shim (single binary), model-based Haiku → Z.AI. |
| services/mitm-subagent-offload/addons/haiku_glm_router.py | Active | Routing logic, logging, retry safety. |
| services/mitm-subagent-offload/addons/body_sample_tee.py | Active (opt-in) | Body sampling (debug only). |
| scripts/run-mitm.sh, scripts/sub-env.sh | Active | Startup scripts for MITM + Claude env. |
| scripts/demo-clean-routing.sh | Active | One-command clean routing proof. |
| scripts/parallel-subagents.sh, soak/burst tools | Active | Long-run or parallel helpers. |
| results/, logs/, docs/OPS-GUIDE.md, docs/REPRODUCIBILITY-GUIDE.md | Active | Metrics, telemetry, operator docs. |
| **archive/legacy-node-proxy/** | Archived | Older Node-based proxy/server; kept for reference. |
| docs/methodology/ | Active | Session-aligned playbooks (e.g., post-polish plan). |
| docs/methodology/post-polish-session-plan.md | Active | Read after polishing session; outlines pilot tasks & prompts. |
| docs/archive/ (multipath POC) | Archived | Historical prototypes. |
| cc/ , samples/ , work/ | Sandbox / workspaces | Used for testing subscription terminals. |
| .claude-trace/ | Runtime artifact | Local trace logs when tracing enabled. |

## Quick orientation
- Start here for pilots: `docs/OPS-GUIDE.md` (ELI16) + `docs/REPRODUCIBILITY-GUIDE.md`.
- Active MITM code lives entirely under `services/mitm-subagent-offload/`.
- Legacy Node proxy files moved to `archive/legacy-node-proxy/`.
- Bundles land in `~/Downloads/agentos_tmp_review-*.tgz` (generated by `make bundle`).
