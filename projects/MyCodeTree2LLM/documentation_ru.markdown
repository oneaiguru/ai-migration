# Веб-интерфейс инструмента конкатенации файлов - подробная документация

## Обзор

Этот проект расширяет существующий инструмент конкатенации файлов на Python, добавляя веб-интерфейс. Он состоит из двух основных компонентов:
- Бэкэнд API (только локальный), построенный с помощью FastAPI, который предоставляет конечные точки для:
 - Перечислить файлы в заданной папке.
 - Конкатенация выбранных файлов (с дополнительным деревом папок) в один разделенный текст.
- Внешнее одностраничное приложение (SPA), созданное на Vue.js (с использованием TypeScript и Vite), которое предоставляет пользовательский интерфейс для:
 - Выбора файлов с помощью сочетаний клавиш и флажков мыши.
 - Отправка запросов к внутреннему API.
 - Отображения конкатенированного результата.

## Архитектурные решения.

- **Backend:** Использовать FastAPI для быстрой разработки, автоматической документации OpenAPI и встроенного промежуточного ПО CORS.
- **Фронтенд:** Используйте Vue.js с TypeScript (на основе Vite) для создания современного реактивного пользовательского интерфейса.
- **Тестирование и BDD:** Написание BDD-спецификаций на языке Gherkin (см. features/file_concatenation.feature) для автоматизации детерминированных тестов (через pytest для бэкенда).
- ** Развертывание:** Только локальная разработка; позже может быть расширено с помощью Docker для развертывания на производстве.

## Задачи и спецификации BDD

1. **Бэкенд API:**
   - GET `/api/files?folder=<path>`: Выводит список всех файлов (относительные пути) в указанной папке.
    - POST `/api/concatenate`: Принимает JSON-тело с:
     - путь_проекта (абсолютный или относительный)
     - selected_files (список путей к файлам относительно пути_проекта)
     - include_tree (булевский флаг)
     Возвращает конкатенированное содержимое (включая сгенерированное дерево, если оно запрошено).
2. **Фронтальный пользовательский интерфейс:**.
   - Ввод пути проекта.
    - Отображение доступных файлов (заполняется с помощью GET API).
    - Выбор с помощью флажка (с поддержкой «Выбрать все»).
    - Опция включения дерева папок.
    - Кнопка для запуска конкатенации и отображения результата.
3. **BDD Spec:**.
   - См. приведенный ниже файл с описанием сценария, в котором пользователь выбирает файлы и получает конкатенированный результат.

## Запуск приложения

- **Бэкенд:**

  1. Установите зависимости: `pip install fastapi uvicorn`.
  2. Запустить API: `uvicorn api_server:app --reload`.
     - **Фронтенд:**.
  3. В папке «frontend» запустите: `npm install`.
  4. Запустите сервер разработки: `npm run dev` (порт по умолчанию 5173).
     - Приложение Vue использует прокси (настраивается в vite.config.ts) для перенаправления вызовов API на бэкенд FastAPI.

## BDD-тестирование

BDD-спецификации написаны на языке Gherkin (см. features/file_concatenation.feature). Детерминированные тесты (например, с помощью pytest) должны проверять, что конечные точки API ведут себя так, как ожидается.

## Заключение

Этот проект демонстрирует полнофункциональный инструмент для конкатенации файлов с бэкендом Python FastAPI и фронтендом Vue.js. Он закладывает прочный фундамент для дальнейшей разработки и автоматизированного тестирования с использованием принципов BDD.