###  Токен API

Для доступа к API существует обязательный параметр api_token — ключ доступа к API. Узнать его можно в разделе "Профиль" на странице настроек Adesk.

Пример ответа от API при отсутствии ключа доступа:

```json
{
    "message": "Auth required",
    "code": 401,
    "success": false,
}
```

Все дальнейшие описания методов подразумевают наличие ключа доступа к API и не учитывают ошибки, связанные с его отсутствием.

### Необходимость продления доступа

Если время пробного периода или платной подписки истекло, то все методы публичного API будут заблокированы.

Пример ответа от API при отсутствии подписки:

```json
{
    "message": "Payment required",
    "code": 21,
    "success": false,
}
```

Все дальнейшие описания методов подразумевают наличие активной лицензии и не учитывают ошибки, связанные с ее отсутствием.

### Ограничение частоты запросов

Если частота запросов к методу публичного API превышает лимит, то метод будет заблокирован.

Пример ответа от API при превышении лимита:

```json
{
    "message": "Too many requests",
    "code": 429,
    "success": false,
}
```

### API v2

Основным отличием v2 от v1 является переход с **Content-Type:application/x-www-form-urlencoded** на **Content-Type:application/json**.

Так же на v2 появилась возможность указать токен в заголовке **X-API-Token**, вместо передачи токена в параметрах запросов.

По методам доступным в v2 имеется [интерактивная документация](https://api.adesk.ru/v2/docs).

## Статьи операций

Пример объекта статьи операции, который является основной структурой данных для методов по статьям операций:

```json
{
    "id": 50                    // уникальный идентификатор
    "name": "Налоги и пошлины", // название
    "type": 2,                  // тип 1 — доходы, 2 — расходы
    "kind": 1,                  // вид деятельности: 1 — операционная, 2 — инвестиционная, 3 — финансовая
    "isOwnerTransfer": false,   // true, если это статья для ввода/вывода денег - ввод/вывод не учитывается в отчетах и графиках как выручка/расходы
    "isSystem": false,          // true, если статья системная
    "group": 1,                 // группа статей
    "isArchived": false,        // true, если статья в архиве
}
```

### Создание, изменение, удаление статьи

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/transactions/category?api_token=your_api_token

Позволяет управлять данными о статье при передаче соответствующих параметров.

##### Параметры (объект Form Data):

| Параметр          | Тип     | Возможные значения | Описание                                                     | Обязательный |
| ----------------- | ------- | ------------------ | ------------------------------------------------------------ | ------------ |
| id                | Number  |                    | Идентификатор существующий статьи, если он передан в запросе, сервер попытается найти существующую статью и обновить ее, если нет - будет создана новая статья. | Нет          |
| name              | String  |                    | Название статьи.  Максимальная длина поля: 210 символов.     | Да           |
| type              | Number  | 1, 2               | Тип статьи (см. описание объекта статьи).                    | Да           |
| kind              | Number  | 1, 2, 3            | Вид деятельности (см. описание объекта статьи).              | Да           |
| group             | Number  | 1                  | Группа статей.                                               | Нет          |
| is_owner_transfer | Boolean | true, false        | Является ли статья вводом/выводом денег. По умолчанию false. | Нет          |
| is_deleted        | Boolean | true, false        | Параметр, отвечающий за удаление статьи. Если параметр есть в запросе и имеет значение true, статья будет удалена. По умолчанию false. | Нет          |
| is_archived       | Boolean | true, false        | Параметр, отвечающий за добавление статьи в архив. Если параметр есть в запросе и имеет значение true, статья будет помещенна в архив. | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр  | Тип     | Описание                                                     |
| --------- | ------- | ------------------------------------------------------------ |
| success*  | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| category* | Object  | Объект статьи.* только при условии успеха запроса (success). |
| errors    | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message   | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение списка статей операций

GET

 

v1

https://api.adesk.ru/v1/transactions/categories?api_token=your_api_token

Получение списка статей операций.

##### Возможные параметры:

Параметры не являются обязательными. При их отсутствии, соответствующая фильтрация не будет осуществляться и вернется список всех операций.

| Параметр   | Возможные значения/Тип                              | Описание                                                     |
| ---------- | --------------------------------------------------- | ------------------------------------------------------------ |
| type       | income — только поступленияoutcome — только расходы | Тип статьи для фильтрации. Будут возвращены статьи только указанного типа. |
| full_group | Boolean (true, false)                               | Флаг добавления информации о группе статей. По умолчанию false. |

##### Пример запроса:

https://api.adesk.ru/v1/transactions/categories?api_token=your_api_token&type=outcome

Данный запрос вернет список статей расходов.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success*        | Boolean       | Флаг успеха выполнения запроса. * в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |
| categories      | Array[Object] | Список объектов статей.                                      |
| message         | String        | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

## Проекты

Пример объекта проекта, который является основной структурой данных для методов по проектам:

```json
{
    "id": 60,                                                           // уникальный идентификатор
    "type": "project",                                                  // тип проекта
    "name": "Мобильное приложение завода",                              // название
    "description": "Приложение для управления станками через интернет", // описание
    "created": "19.12.2018",                                            // дата создания
    "income": "60000.00",                                               // доходы
    "outcome": "45000.00"                                               // расходы
    "grossProfit": "15000.00",                                          // валовая прибыль
    "profitability": 25,                                                // рентабельность в процентах
    "isArchived": false,                                                // флаг архивного проекта
    "planIncome": "0.00",                                               // планируемый доход по проекту
    "planOutcome": "0.00",                                              // планируемый расход по проекту
    "category": {                                                       // направление проекта
      "id": 42,
      "name": "Мобильные проиложения"
    },
    "manager": {                                                        // ответственный менеджер
      "id": 323,
      "name": "Петров Петр"
    }
    "deal_contractor": {                                                // контрагент сделки
        "id": 3,
        "name": "ИП Петров"
      }
      "deal_legal_entity": {                                            // юридическое лицо сделки
        "id": 5,
        "name": "Рога и копыта"
      }
}
```

### Добавление проекта

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/project?api_token=your_api_token

Добавляет новый проект с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр          | Тип     | Возможные значения | Описание                                                     | Обязательный                   |
| ----------------- | ------- | ------------------ | ------------------------------------------------------------ | ------------------------------ |
| name              | String  |                    | Название проекта. Максимальная длина поля: 210 символов.     | Да                             |
| type              | String  |                    | Тип проекта. Возможные значения:`"project"` — проект`"deal"` — сделка`"product_deal"` — товарная сделка | Нет По умолчанию — `"project"` |
| description       | String  |                    | Краткое описание проекта.                                    | Нет                            |
| is_archived       | Boolean | true, false        | Параметр, отвечающий за статус проекта (активный/архивный). Если параметр есть в запросе и имеет значение true, проект будет отмечен, как архивный. | Нет                            |
| plan_income       | Number  |                    | Плановый доход по проекту в валюте аккаунта (по умолчанию 0). | Нет                            |
| plan_outcome      | Number  |                    | Плановый расход по проекту в валюте аккаунта (по умолчанию 0). | Нет                            |
| category          | Number  |                    | id направления проекта.                                      | Нет                            |
| manager           | Number  |                    | id пользователя.                                             | Нет                            |
| deal_contractor   | Number  |                    | id контрагента. Применится только если тип проекта — `"deal"` или `"product_deal"`. | Нет                            |
| deal_legal_entity | Number  |                    | id юридического лица. Применится только если тип проекта — `"deal"` или `"product_deal"`. | Нет                            |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| project* | Object  | Объект проекта.* только при условии успеха запроса (success). |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Изменение проекта

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/project/<project_id>?api_token=your_api_token

Изменяет существующий проект по его идентификатору. Для удаления текущего значения поля проекта, необходимо отправить параметр с пустой строкой.

##### Параметры (объект Form Data):

| Параметр          | Тип     | Возможные значения | Описание                                                     | Обязательный |
| ----------------- | ------- | ------------------ | ------------------------------------------------------------ | ------------ |
| name              | String  |                    | Название проекта. Максимальная длина поля: 210 символов.     | Нет          |
| type              | String  |                    | Тип проекта. Возможные значения:`"project"` — проект`"deal"` — сделка`"product_deal"` — товарная сделка | Нет          |
| description       | String  |                    | Краткое описание проекта.                                    | Нет          |
| is_archived       | Boolean | true, false        | Статус проекта (активный/архивный). По умолчанию false - считает проект активным. | Нет          |
| plan_income       | Number  |                    | Плановый доход по проекту в валюте аккаунта.                 | Нет          |
| plan_outcome      | Number  |                    | Плановый расход по проекту в валюте аккаунта.                | Нет          |
| category          | Number  |                    | id направления проекта.                                      | Нет          |
| manager           | Number  |                    | id пользователя.                                             | Нет          |
| deal_contractor   | Number  |                    | id контрагента. Применится только если тип проекта — `"deal"` или `"product_deal"`. | Нет          |
| deal_legal_entity | Number  |                    | id юридического лица. Применится только если тип проекта — `"deal"` или `"product_deal"`. | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| project* | Object  | Объект проекта.* только при условии успеха запроса (success). |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Удаление проекта

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/project/<project_id>/remove?api_token=your_api_token

Удаление проекта по его идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение списка проектов

GET

 

v1

https://api.adesk.ru/v1/projects?api_token=your_api_token

Получение списка проектов.

##### Возможные параметры:

Параметры не являются обязательными. При их отсутствии, соответствующая фильтрация не будет осуществляться и вернется список всех операций.

| Параметр | Возможные значения/Тип                                       | Описание                                                     |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| category | Number                                                       | Позволяет осуществить выборку по направлению проекта.        |
| managers | Array[Number]                                                | Позволяет осуществить выборку по ответственным менеджерам.   |
| status   | active — только активные проекты (по умолчанию)archived — только архивные проектыall — все проекты | Позволяет осуществить выборку проектов по статусу.           |
| start    | Number                                                       | Позволяет установить индекс элемента из общей выборки, начиная с которого данные будут возвращены. Отсчет ведется с 0. |
| length   | Number                                                       | Позволяет ограничить длину выборки. Если установлен стартовый индекс, то расчет длины происходит начиная с него. |
| q        | String                                                       | Строка для поиска по названию проекта.                       |
| reduced  | Boolean (true, false)                                        | Параметр, отвечающий за ограничение количества выводимых параметров в ответе. Если true, то в ответе будут только поля id, name, isFinished. |
| sorting  | alphabetically — в алфавитном порядкеlast_modified — по обновлениям (по умолчанию)popularity — по популярности | Позволяет отсортировать выборку.                             |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success         | Boolean       | Флаг успеха выполнения запроса.                              |
| projects        | Array[Object] | Массив объектов проектов. Может быть пустым, если отсутствуют проекты. |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |
| total           | Object        | Ключевые показатели проекта (приход, расход, прибыль, рентабельность) и их плановые значения. |
| message         | String        | Сообщение об ошибке, в случае отсутствия необходимого уровня доступа. |

### Список направлений проектов

GET

 

v1

https://api.adesk.ru/v1/projects/categories?api_token=your_api_token

Возвращает список направлений проектов.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success*        | Boolean       | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| categories      | Array[Object] | Массив объектов направлений проектов.                        |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |
| message         | String        | Сообщение об ошибке, в случае отсутствия необходимого уровня доступа. |

## Обязательства

Пример объекта обязательства, который является основной структурой данных для методов по обязательствам:

```json
{
    "id": 60,                                                           // уникальный идентификатор
    "amount": "2400.99",                                                // сумма обязательства
    "vat": 0,                                                           // сумма НДС
    "vatPercent": 0,                                                    // процент НДС
    "description": "Услуги аренды имущества по договору",               // описание
    "date": "20.03.2019",                                               // дата
    "dateFormatted": "Сегодня",                                         // форматированная дата
    "legalEntity": {...},                                               // юр. лицо
    "contractor": {...},                                                // контрагент
    "project": 36,                                                      // id проекта, к которому привязано обязательство
    "type": 1,                                                          // тип. 1 — входящее обязательство, 2 — исходящее обязательство
    "currency": "RUR",                                                  // валюта обязательства
    "transaction": {...},                                               // привязанная транзакция
    "isShipment": true,                                                 // привязаны ли отгруженные товары
    "shipment": {                                                       // отгрузка
        "id": 42,                                                       // id отгрузки
        "batches": [                                                    // отгруженные партии товаров
            {
                "product": {...},                                       // товар
                "type": 1,                                              // тип. 1 — входящая партия, 2 — исходящая партия
                "date": "20.03.2019",                                   // дата
                "quantity": 1,                                          // кол-во товара в партии
                "price": "2400.99",                                     // цена единицы товара
                "vat": 0,                                               // сумма НДС
                "vatPercent": 0,                                        // процент НДС
            },
        ],
    },
}
```

### Добавление обязательства

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/commitment?api_token=your_api_token

Добавляет новое обязательство с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр              | Тип    | Возможные значения                | Описание                                                     | Обязательный |
| --------------------- | ------ | --------------------------------- | ------------------------------------------------------------ | ------------ |
| amount                | Number |                                   | Сумма обязательства.                                         | Да           |
| vat_percent           | Number | 0 – 100                           | Процент НДС.                                                 | Нет          |
| type                  | String | in, out                           | Тип обязательства.                                           | Да           |
| date                  | String |                                   | Дата создания обязательства в формате YYYY-MM-DD.            | Да           |
| contractor            | Number |                                   | id контрагента, к которому привязано обязательство.          | Да           |
| legal_entity          | Number |                                   | id юр. лица, к которому привязано обязательство.             | Да           |
| currency              | String | RUR, EUR, USD, KZT, UAH, GBP, BYN | Валюта обязательства.                                        | Да           |
| description           | String |                                   | Краткое описание. Максимальная длина поля: 510 символов.     | Нет          |
| project               | Number |                                   | id проекта, к которому привязано обязательство.              | Нет          |
| product-N-product_id  | Number |                                   | id отгружаемого товара.* значение N: 0, 1, 2, ... — номер товара в отгрузке. Таким образом можно указывать несколько товаров. Если не передано ни одного товара, то будет создано обычное обязательство. | Нет          |
| product-N-price       | Number |                                   | Цена единицы товара.                                         | Нет          |
| product-N-quantity    | Number |                                   | Количество товара.                                           | Нет          |
| product-N-vat_percent | Number | 0 – 100                           | Процент НДС товара.                                          | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр    | Тип     | Описание                                                     |
| ----------- | ------- | ------------------------------------------------------------ |
| success*    | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| commitment* | Object  | Объект обязательства.* только при условии успеха запроса (success). |
| errors      | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message     | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Изменение обязательства

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/commitment/<commitment_id>?api_token=your_api_token

Изменяет существующее обязательство по его идентификатору. Для удаления текущего значения поля обязательства, необходимо отправить параметр с пустой строкой.

##### Параметры (объект Form Data):

| Параметр              | Тип    | Возможные значения                | Описание                                                     | Обязательный |
| --------------------- | ------ | --------------------------------- | ------------------------------------------------------------ | ------------ |
| amount                | Number |                                   | Сумма обязательства.                                         | Нет          |
| vat_percent           | Number | 0 – 100                           | Процент НДС.                                                 | Нет          |
| type                  | String | in, out                           | Тип обязательства.                                           | Нет          |
| date                  | String |                                   | Дата создания обязательства в формате YYYY-MM-DD.            | Нет          |
| contractor            | Number |                                   | id контрагента, к которому привязано обязательство.          | Нет          |
| legal_entity          | Number |                                   | id юр. лица, к которому привязано обязательство.             | Да           |
| currency              | String | RUR, EUR, USD, KZT, UAH, GBP, BYN | Валюта обязательства.                                        | Нет          |
| description           | String |                                   | Краткое описание. Максимальная длина поля: 510 символов.     | Нет          |
| project               | Number |                                   | id проекта, к которому привязано обязательство.              | Нет          |
| product-N-product_id  | Number |                                   | id отгружаемого товара.* значение N: 0, 1, 2, ... — номер товара в отгрузке. Таким образом можно указывать несколько товаров. Если не передано ни одного товара, то будет создано обычное обязательство. | Нет          |
| product-N-price       | Number |                                   | Цена единицы товара.                                         | Нет          |
| product-N-quantity    | Number |                                   | Количество товара.                                           | Нет          |
| product-N-vat_percent | Number | 0 – 100                           | Процент НДС товара.                                          | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр   | Тип     | Описание                                                     |
| ---------- | ------- | ------------------------------------------------------------ |
| success*   | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| commitment | Object  | Измененный объект обязательства.                             |
| errors     | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message    | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Удаление обязательства

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/commitment/<commitment_id>/remove?api_token=your_api_token

Удаление обязательства по его идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Список обязательств

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/commitments?api_token=your_api_token

Получение списка обязательств с возможностью выбора по конкретному периоду, а также фильтрацией по различным параметрам.

##### Параметры (объект Form Data):

| Параметр    | Возможные значения/Тип                                       | Описание                                                     | Обязательный |
| ----------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------ |
| range       | all_time — все время (по умолчанию)this_month — текущий месяцthis_quarter — текущий кварталthis_year — текущий годprev_month — предыдущий месяцprev_quarter — предыдущий кварталprev_year — предыдущий годcustom* — произвольный период | Позволяет выбрать период, за который необходимо сформировать отчет. Если параметр не задан, отчет формируется за всё время.* при выборе интервала custom параметры range_start и range_end являются обязательными. | Нет          |
| range_start | YYYY-MM-DD — формат даты для передачи в запросе              | Используется только в сочетании с периодом custom, позволяет задать дату начала желаемого периода.Игнорируется во всех других случаях. | Нет          |
| range_end   | YYYY-MM-DD — формат даты для передачи в запросе              | Используется только в сочетании с периодом custom, позволяет задать дату окончания желаемого периода.Игнорируется во всех других случаях. | Нет          |
| contractors | Array[Number]                                                | Массив id контрагентов. Будут возвращены только обязательства по выбранным контрагентам. | Нет          |
| projects    | Array[Number]                                                | Массив id проектов. Будут возвращены только обязательства по выбранным проектам. | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип     | Описание                                                     |
| --------------- | ------- | ------------------------------------------------------------ |
| success*        | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| commitments*    | Array   | Массив объектов обязательств. Может быть пустым, если ничего не попадает под параметры фильтрации.* только при условии успеха запроса (success). |
| recordsTotal    | Number  | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number  | Общее количество записей, доступных по указанному фильтру.   |
| errors          | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message         | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

## Юридические лица

Пример объекта юр. лиц, который является основной структурой данных для методов по юр. лицам:

```json
{
    "id": 50                                                                      // уникальный идентификатор
    "name": "ООО 'АйТи Бизнес'",                                                  // наименование юр.лица
    "fullName": "Общество с ограниченной отвественностью 'АйТи Бизнес'",          // полное наименование юр.лица
    "inn": "748294957679",                                                        // ИНН юр.лица
    "kpp": "473829275",                                                           // КПП юр.лица
    "address": "г.Челябинск, ул.Пушкина, д.3, офис 3",                            // юридический адрес
    "phoneNumber": "+7 999 342 22 43",                                            // телефон
    "registrationNumber": "174382956"                                             // ОГРН юр.лица
    "vat_rates": [                                                                // системы учета НДС
      {
        "activeSince": null,
        "activeUntil": "2025-04-18",
        "rate": "usn5"
      },
      {
        "activeSince": "2025-04-19",
        "activeUntil": "2025-04-20",
        "rate": "usn7"
      },
      {
        "activeSince": "2025-04-21",
        "activeUntil": "2025-04-21",
        "rate": "usn20"
      },
      {
        "activeSince": "2025-04-22",
        "activeUntil": null,
        "rate": "osno20"
      }
    ]
}
```

### Добавление юридического лица

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/legal-entity?api_token=your_api_token

Добавляет новое юридическое лицо с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр            | Тип    | Возможные значения | Описание                                                     | Обязательный |
| ------------------- | ------ | ------------------ | ------------------------------------------------------------ | ------------ |
| name                | String |                    | Наименование юридического лица.  Максимальная длина поля: 210 символов. | Да           |
| full_name           | String |                    | Полное наименование юридического лица.  Максимальная длина поля: 255 символов. | Нет          |
| inn                 | String |                    | ИНН Максимальная длина поля: 20 символов.                    | Нет          |
| kpp                 | String |                    | КПП Максимальная длина поля: 12 символов.                    | Нет          |
| address             | String |                    | Юридический адрес.  Максимальная длина поля: 100 символов.   | Нет          |
| phone_number        | String |                    | Телефон.  Максимальная длина поля: 32 символов.              | Нет          |
| registration_number | String |                    | ОГРН Максимальная длина поля: 15 символов.                   | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр     | Тип     | Описание                                                     |
| ------------ | ------- | ------------------------------------------------------------ |
| success*     | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| legalEntity* | Object  | Объект юр.лица.* только при условии успеха запроса (success). |
| errors       | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {  "name": [    "Обязательное поле."  ],  "name": [    "Длина поля превышает максимально допустимую (210)"  ],  "full_name": [    "Длина поля превышает максимально допустимую (255)"  ],  "inn": [    "Длина поля превышает максимально допустимую (20)"  ],  "kpp": [    "Длина поля превышает максимально допустимую (12)"  ],  "address": [    "Длина поля превышает максимально допустимую (100)"  ],  "phone_number": [    "Длина поля превышает максимально допустимую (32)"  ],  "registration_number": [    "Длина поля превышает максимально допустимую (15)"  ], } ` |

### Изменение юридического лица

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/legal-entity/<legal_entity_id>?api_token=your_api_token

Изменяет существующее юридическое лицо по его идентификатору. Для редактирования нужны права администратора. 

##### Параметры (объект Form Data):

| Параметр            | Тип    | Возможные значения | Описание                                                     | Обязательный |
| ------------------- | ------ | ------------------ | ------------------------------------------------------------ | ------------ |
| name                | String |                    | Наименование юридического лица.  Максимальная длина поля: 210 символов. | Нет          |
| full_name           | String |                    | Полное наименование юридического лица.  Максимальная длина поля: 255 символов. | Нет          |
| inn                 | String |                    | ИНН Максимальная длина поля: 20 символов.                    | Нет          |
| kpp                 | String |                    | КПП Максимальная длина поля: 12 символов.                    | Нет          |
| address             | String |                    | Юридический адрес.  Максимальная длина поля: 100 символов.   | Нет          |
| phone_number        | String |                    | Телефон.  Максимальная длина поля: 32 символов.              | Нет          |
| registration_number | String |                    | ОГРН Максимальная длина поля: 15 символов.                   | Нет          |
| vat_rates           | Array  |                    | Системы учета НДС Пример:`  [    {      "rate":"usn5"    },    {      "rate":"usn7",      "active_since":"2025-04-18"    },    {      "rate":"usn20",      "active_since":"2025-04-19"    },    {      "rate":"osno20",      "active_since":"2025-04-20"    }  ] `Если не указано active_since, применяется с начала работы по настоящее время | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр    | Тип     | Описание                                                     |
| ----------- | ------- | ------------------------------------------------------------ |
| success     | Boolean | Флаг успеха выполнения запроса.                              |
| legalEntity | Object  | Объект юридического лица. * только при условии успеха запроса (success). |
| message     | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Удаление юридического лица

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/legal-entity/<legal_entity_id>/remove?api_token=your_api_token

Удаление юридического лица по его идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение юридического лица

GET

 

v1

https://api.adesk.ru/v1/legal-entity/<legal_entity_id>?api_token=your_api_token

Получение информации о юридическом лице по его идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр     | Тип     | Описание                                                     |
| ------------ | ------- | ------------------------------------------------------------ |
| success*     | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| legalEntity* | Object  | Объект юридического лица.* только при условии успеха запроса (success). |
| message      | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение списка юридических лиц

GET

 

v1

https://api.adesk.ru/v1/legal-entities?api_token=your_api_token

Получение списка юридических лиц.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success*        | Boolean       | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |
| legalEntities*  | Array[Object] | Массив объектов юридического лица. Может быть пустым, если отсутствуют юридические лица.* только при условии успеха запроса (success). |

## Банковские счета

Пример объекта счета, который является основной структурой данных для методов по счетам:

```json
{
    "id": 50                            // уникальный идентификатор
    "number": "40817810099910004312",   // номер
    "name": "Основной счет",            // название
    "bankName": "ПАО Сбербанк",         // название банка
    "created": "21.12.2018 08:46",      // реальная дата создания
    "currency": "RUR",                  // валюта счета
    "type": "Bank",                     // тип счета (Bank - банковский счет, Cash - наличный счет или касса)
    "status": "open",                   // статус счёта (открыт/закрыт)
    "initialAmountDate": "20.12.2018",  // дата начисления начального остатка
    "initialAmount": "13450.14",        // сумма начального остатка
    "amount": "1598360.00",             // текущий остаток
}
```

### Добавление счета

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/bank-account?api_token=your_api_token

Добавляет новый счет с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр              | Тип     | Возможные значения                | Описание                                                     | Обязательный |
| --------------------- | ------- | --------------------------------- | ------------------------------------------------------------ | ------------ |
| name                  | String  |                                   | Название счета.  Максимальная длина поля: 210 символов.      | Да           |
| currency              | String  | RUR, EUR, USD, KZT, UAH, GBP, BYN | Валюта счета.                                                | Да           |
| number                | Number  |                                   | Номер счета.                                                 | Нет          |
| bank_name             | String  |                                   | Название банка.                                              | Нет          |
| legal_entity          | Number  |                                   | id юрлица, к которому привязан счет.                         | Да           |
| initial_amount        | Number  |                                   | Сумма начального остатка. Указывается, если на момент начала работы со счетом в системе на нем уже есть какая-то сумма. | Нет          |
| initial_amount_date   | String  | Дата в формате YYYY-MM-DD         | Дата начисления начального остатка. Указывается, если дата, с которой планируется регистрировать операции по счету меньше текущей, при условии, что необходимо учесть начальный остаток. | Нет          |
| type                  | Number  | 1, 2                              | Тип счета. 1 - наличные\касса, 2 - банковский счет.По умолчанию создается банковский счет. | Нет          |
| bank_code             | Number  |                                   | БИК банка.                                                   | Нет          |
| correspondent_account | Number  |                                   | Корреспондентский счёт банка.  Максимальная длина поля: 64 символа. | Нет          |
| is_acquiring_enabled  | Boolean | true, false                       | Подключен ли к счёту эквайринг.                              | Нет          |
| commission_category   | Number  |                                   | Статья коммиссии по эквайрингу.                              | Нет          |
| refund_category       | Number  |                                   | Статья возврата по эквайрингу.                               | Нет          |
| category              | Number  |                                   | Группа счета.                                                | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр     | Тип     | Описание                                                     |
| ------------ | ------- | ------------------------------------------------------------ |
| success*     | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| bankAccount* | Object  | Объект счета.* только при условии успеха запроса (success).  |
| errors       | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "currency": [        "Указана неподдерживаемая валюта. Обновите страницу и попробуйте снова."    ],    "amount": [        "Обязательное поле."    ],    "name": [        "Обязательное поле."    ] } ` |

### Изменение счета

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/bank-account/<bank_account_id>?api_token=your_api_token

Изменяет существующий счет по его идентификатору. Для редактирования нужны права администратора. 

**Внимание:** Список параметров для редактирования ограничен.

##### Параметры (объект Form Data):

| Параметр              | Тип     | Возможные значения        | Описание                                                     | Обязательный |
| --------------------- | ------- | ------------------------- | ------------------------------------------------------------ | ------------ |
| name                  | String  |                           | Название счета.                                              | Да           |
| number                | Number  |                           | Номер счета.                                                 | Нет          |
| bank_name             | String  |                           | Название банка.                                              | Нет          |
| bank_code             | Number  |                           | БИК банка.                                                   | Нет          |
| initial_amount        | Number  |                           | Сумма начального остатка.                                    | Нет          |
| initial_amount_date   | String  | Дата в формате YYYY-MM-DD | Дата начисления начального остатка. Указывается, если дата, с которой планируется регистрировать операции по счету меньше текущей, при условии, что необходимо учесть начальный остаток. | Нет          |
| legal_entity          | Number  |                           | id юрлица, к которому привязан счет.                         | Нет          |
| type                  | Number  | 1, 2                      | Тип счета. 1 - наличные\касса, 2 - банковский счет.По умолчанию создается банковский счет. | Нет          |
| correspondent_account | Number  |                           | Корреспондентский счёт банка.  Максимальная длина поля: 64 символа. | Нет          |
| is_acquiring_enabled  | Boolean | true, false               | Подключен ли к счёту эквайринг.                              | Нет          |
| commission_category   | Number  |                           | Статья коммиссии по эквайрингу.                              | Нет          |
| refund_category       | Number  |                           | Статья возврата по эквайрингу.                               | Нет          |
| category              | Number  |                           | Группа счета.                                                | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                        |
| -------- | ------- | ------------------------------- |
| success  | Boolean | Флаг успеха выполнения запроса. |

### Удаление счета

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/bank-account/<bank_account_id>/remove?api_token=your_api_token

Удаление счета по его идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение счета

GET

 

v1

https://api.adesk.ru/v1/bank-account/<bank_account_id>?api_token=your_api_token

Получение информации о счете по его идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр     | Тип     | Описание                                                     |
| ------------ | ------- | ------------------------------------------------------------ |
| success*     | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| bankAccount* | Object  | Объект счета.* только при условии успеха запроса (success).  |
| message      | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение списка счетов

GET

 

v1

https://api.adesk.ru/v1/bank-accounts?api_token=your_api_token

Получение списка счетов.

##### Возможные параметры:

Параметры не являются обязательными. При их отсутствии, соответствующая фильтрация не будет осуществляться и вернется список всех счетов.

| Параметр          | Возможные значения/Тип                               | Описание                                                     |
| ----------------- | ---------------------------------------------------- | ------------------------------------------------------------ |
| start             | Number                                               | Позволяет установить индекс элемента из общей выборки, начиная с которого данные будут возвращены. Отсчет ведется с 0. |
| length            | Number                                               | Позволяет ограничить длину выборки. Если установлен стартовый индекс, то расчет длины происходит начиная с него. |
| reduced           | Boolean (true, false)                                | Параметр, отвечающий за ограничение количества выводимых параметров в ответе. Если true, то ответ не детализированный. |
| with_sum_amount   | Boolean (true, false)                                | Параметр, отвечающий за добавление суммарного остатка по всем счетам. |
| bank_account_type | Bank — банковский счетCash — наличный счет или касса | Позволяет осуществить выборку счетов по типу.                |
| status            | open — открытый счётclosed — закрытый счёт           | Позволяет осуществить выборку счетов по статусу.             |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success*        | Boolean       | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| bankAccounts*   | Array[Object] | Массив объектов счетов. Может быть пустым, если отсутствуют счета.* только при условии успеха запроса (success). |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |

## Переводы

Пример объекта перевода, который является основной структурой данных для методов по переводам:

```json
{
    "id": 16                                // уникальный идентификатор
    "from": {                               // данные счета-отправителя
        "currency": "RUR",
        "bankName": "ПАО Сбербанк",
        "id": 1,
        "number": "40702810638050013199"
    },
    "to": {                                 // данные счета-получателя
        "currency": "USD",
        "bankName": "ПАО ВТБ Банк",
        "id": 2,
        "number": "40702810638050013199"
    },
    "amount": "10000.00",                   // сумма перевода в валюте счета-отправителя
    "tags": [                               // список тегов
        {
            "id": 3,
            "name": "Услуги",
            "color": "orange"
        }
    ]
}
```

### Добавление перевода

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/transfer?api_token=your_api_token

Добавляет новый перевод с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр          | Тип    | Описание                                         | Обязательный                                |      |
| ----------------- | ------ | ------------------------------------------------ | ------------------------------------------- | ---- |
| transaction       | Number | id транзакции, из которой нужно создать перевод. | Нет                                         |      |
| amount            | Number | Сумма списания со счета-отправителя.             | Да                                          |      |
| amount_to         | Number | Сумма поступления на счет-получателя.            | Нет                                         |      |
| from_bank_account | Number | id счета-отправителя.                            | Да                                          |      |
| to_bank_account   | Number | id счета-получателя.                             | Да                                          |      |
| date              | String | Дата выполнения перевода в формате YYYY-MM-DD.   | Нет                                         |      |
| description       | String | Краткое описание перевода.                       | Нет                                         |      |
| tags              | String |                                                  | Список id тегов, указываются через запятую. | Нет  |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр  | Тип     | Описание                                                     |
| --------- | ------- | ------------------------------------------------------------ |
| success*  | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| transfer* | Object  | Объект перевода.* только при условии успеха запроса (success). |
| message   | String  | Сообщение о некорректных данных или некоторых ошибках.* только при условии неудачи запроса (success). |
| errors    | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "amount": [        "Обязательное поле."    ],    "from_bank_account": [        "Обязательное поле."    ] } ` |

### Разбиение перевода

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/transfer/split?api_token=your_api_token

Разбивает указанные переводы на отдельные операции.

##### Параметры (объект Form Data):

| Параметр      | Тип    | Описание                                                     | Обязательный |
| ------------- | ------ | ------------------------------------------------------------ | ------------ |
| transfers_ids | String | Список id переводов для разбиения, указываются через запятую. | Да           |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| message  | String  | Сообщение о некорректных данных или некоторых ошибках.* только при условии неудачи запроса (success). |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "transfers_ids": [        "Обязательное поле."    ] } ` |

## Операции

Пример объекта операции, который является основной структурой данных для методов по операциям:

```json
{
    "id": 5590,                     // уникальный идентификатор
    "isSplitted": false,            // указывает была ли операция разбитой на части
    "splitId":,                     // id коренной операции
    "amount": "67",                 // сумма
    "date": "20.12.2018",           // дата создания
    "dateIso": "2018.12.20",
    "type": 1,                      // тип. 1 — поступление, 2 — расход
    "description": "",              // описание
    "dateFormatted": "Вчера",       // отформатированная дата создания
    "relatedDate": "20.12.2018",    // дата начисления по операции
    "confirmAccrual": true,         // флаг подтверждения начисления
    "isPlanned": false,             // флаг запланированной операции
    "isReadyToBeConfirmed": true,   // флаг готовности к подтверждению
    "isPeriodic": true,             // флаг периодичности операции
    "periodicChain": 14553,         // "корневая" операция в цепочке повторяющихся операций
    "period": "month",              // частота повторения операции
    "isCommitment": true,           // флаг обязательства
    "isTransfer": false,            // флаг операции-перевода
    "bankAccountAmount": "-233.00", // состояние счета после совершения операции

    "bankAccount": {                // счет, по которому осуществлена операция
        "currency": "RUR",
        "bankName": "",
        "id": 43,
        "name": "123",
        "number": "",
        "bankCode": 989145333,
        "amount": 1289.44,
        "initial_amount_date": 01.03.2018,
        "created": 20.10.2018,
        "isBankIntegrationConfigured": false,
        "legalEntity": {            // юр лицо
            "id": 54,
            "name": "345"
        }
    },
    "category": {                   // статья
        "kind": 1,
        "isOwnerTransfer": true,
        "name": "Продажи",
        "isSystem": false,
        "type": 1,
        "id": 48,
        "group": {                  // группа статьи
            "id": 43,
            "name": "Продажи",
            "type": 1               // тип группы (1-доход, 2-расход)
        }
    },
    "contractor": {                 // контрагент
        "id": 15,
        "name": "Сбербанк",
        "contactPerson": "Харитонов Василий Акимович",
        "phoneNumber": "+7999999999",
        "email": "sber@mail.com"
    },
    "project": {                    // проект (параметры project и business_unit взаимоисключающие)
        "id": 46,
        "name": "Мобильное приложение завода",
        "isFinished": false,
        "category": {               // направление бизнеса
            "id": 30,
            "name": "Разработка"
        }
    },
    "business_unit": {             // направление бизнеса (параметры project и business_unit взаимоисключающие)
        "id": 30,
        "name": "Разработка",
    },
    "tags": [                       // список тегов
        {
            "id": 2,
            "name": "iOS приложение",
            "color": "teal"
        }
    ]
}
```

### Массовое добавление операций

POST

 

v2

 

application/json

https://api.adesk.ru/v2/transactions/create?api_token=your_api_token

Данный метод можно использовать для массового создания операций.

На вход принимает объект с массивом объектов операций и параметрами для применения правил импорта и автоматизации.

##### Параметры объекта:

| Параметр              | Тип           | Описание / Возможные значения                                | Обязательный |
| --------------------- | ------------- | ------------------------------------------------------------ | ------------ |
| transactions          | Array[Object] | Список объектов операций.                                    | Да           |
| applyImportRules      | Boolean       | Флаг для применения правил импорта.                          | Нет          |
| applyImportAutomation | Boolean       | Флаг для применения автоматизаций - обработки эквайринговых операций, определения налоговых статей и автоматического установления даты начисления по описанию. | Нет          |

##### Параметры объекта операции:

| Параметр       | Тип           | Описание / Возможные значения                                | Обязательный |
| -------------- | ------------- | ------------------------------------------------------------ | ------------ |
| type           | String        | Тип операции. Возможные значения:`"income"` — приход`"outcome"` — расход | Да           |
| bankAccountId  | Number        | id банковского счета.                                        | Да           |
| amount         | Number        | Сумма операции. Игнорируется, если isSplitted = true.        | Да           |
| date           | String        | Дата операции в формате YYYY-MM-DD.                          | Да           |
| description    | String        | Описание операции. Произвольная строка. Ограничение длины — 510 символов. | Нет          |
| relatedDate    | String        | Дата начисления в формате YYYY-MM-DD.                        | Нет          |
| categoryId     | Number        | id статьи операции. Тип статьи должен соответствовать типу создаваемой операции. Игнорируется, если isSplitted = true. | Нет          |
| contractorId   | Number        | id контрагента, к которому привязана операция. Игнорируется, если isSplitted = true. | Нет          |
| projectId      | Number        | id проекта, к которому привязана операция. Игнорируется, если isSplitted = true. Нельзя передать одновременно с полем businessUnitId. | Нет          |
| businessUnitId | Number        | id направления бизнеса, к которому привязана операция. Игнорируется, если isSplitted = true. Может быть только c типом операции = Расход. Нельзя передать одновременно с полем projectId. | Нет          |
| tagIds         | Array[Number] | Список тегов. Игнорируется, если в текущем тарифе нет доступа к тегам. | Нет          |
| importedId     | String        | Уникальный id, который можно присвоить операции и использовать его в вашей системе. Если он не передан, Adesk сгенерирует его и отдаст в ответе. Ограничение длины — 100 символов. | Нет          |
| period         | String        | Периодичность с которой повторяется операция. Возможные значения:`"day"` — каждый день`"week"` — каждая неделя`"two_weeks"` — каждые две недели`"month"` — каждый месяц`"two_months"` — каждые два месяца`"quarter"` — каждый квартал`"half_year"` — каждое полугодие`"year"` — каждый год | Нет          |
| periodEndDate  | String        | Дата, до которой нужно повторять операции с заданной периодичностью. В формате YYYY-MM-DD. | Нет          |
| isPlanned      | Boolean       | Указывает, является ли операция плановой.                    | Нет          |
| isCommitment   | Boolean       | Указывает нужно ли учитывать операцию как обязательство. Игнорируется, если isSplitted = true. | Нет          |
| confirmAccrual | Boolean       | Указывает, нужно ли подтверждать начисление на выбранную дату. Игнорируется, если не передана relatedDate. | Нет          |
| isSplitted     | Boolean       | Указывает, нужно ли разбить операцию на несколько частей.    | Нет          |
| parts          | Array[Object] | Список частиц операции. Игнорируется, если не передан isSplitted, либо isSplitted = false. | Нет          |

##### Параметры объекта частицы операции:

| Параметр       | Тип     | Описание / Возможные значения                                | Обязательный |
| -------------- | ------- | ------------------------------------------------------------ | ------------ |
| amount         | Number  | Сумма операции.                                              | Да           |
| relatedDate    | String  | Дата начисления в формате YYYY-MM-DD.                        | Нет          |
| categoryId     | Number  | id статьи операции. Тип статьи должен соответствовать типу создаваемой операции. | Нет          |
| contractorId   | Number  | id контрагента, к которому привязана операция.               | Нет          |
| projectId      | Number  | id проекта, к которому привязана операция. Нельзя передать одновременно с полем businessUnitId. | Нет          |
| businessUnitId | Number  | id направления бизнеса, к которому привязана операция. Может быть только c типом операции = Расход. Нельзя передать одновременно с полем projectId. | Нет          |
| isCommitment   | Boolean | Указывает нужно ли учитывать операцию как обязательство.     | Нет          |
| confirmAccrual | Boolean | Указывает, нужно ли подтверждать начисление на выбранную дату. Игнорируется, если не передана relatedDate. | Нет          |

##### Пример запроса:

Пример тела запроса:

```json
{
    "transactions": [
        {
            "type": "income",
            "amount": 2010,
            "date": "2025-07-01",
            "bankAccountId": 1
        },
        {
            "type": "outcome",
            "amount": 350,
            "date": "2025-07-01",
            "bankAccountId": 2
        },
    ],
}
                        
                      
```

##### Пример успешного ответа:

Пример тела ответа:

```json
{
  "success": true,
  "transactions": [
        {
                "id": 1,
                "type": 1,
                "amount": "2010.00",
                "isSplitted": false,
                "splitId": null,
                "date": "01.07.2025",
                "dateFormatted": "01.07.2025",
                "dateIso": "2025-07-01",
                "relatedDate": "01.07.2025",
                "relatedDateIso": "2025-07-01",
                "bankAccount": {
                    "id": 1,
                    "name": "Сбербанк",
                    "bankName": null,
                    "currency": "RUR",
                    "rate": 1.0,
                    "status": "open",
                    "legalEntity": {
                        "id": 1,
                        "name": "ИП 'Лучшая компания'"
                    },
                    "amount": "1000000.00"
                },
                "description": null,
                "hasAccrual": false,
                "confirmAccrual": true,
                "isPlanned": false,
                "isReadyToBeConfirmed": false,
                "isReadyToConfirmAccrual": null,
                "isPeriodic": false,
                "periodicChain": null,
                "period": null,
                "isCommitment": null,
                "isTransfer": null,
                "isAvailable": true,
                "hasAttachments": false,
                "exchangeRate": 1.0,
                "repetitionEndDate": null,
                "bankAccountAmount": "0",
                "tags": [],
                "transferId": null,
                "pairedTransactionId": null,
                "pairTransferTransaction": null,
                "category": null,
                "project": null,
                "contractor": null,
                "businessUnit": null,
                "importedId": "adesk:ace49eb7-ae2e-47ef-b177-627214a1b859"
        },
        {
                "id": 2,
                "type": 2,
                "amount": "350.00",
                "isSplitted": false,
                "splitId": null,
                "date": "01.07.2025",
                "dateFormatted": "01.07.2025",
                "dateIso": "2025-07-01",
                "relatedDate": "01.07.2025",
                "relatedDateIso": "2025-07-01",
                "bankAccount": {
                    "id": 2,
                    "name": "Альфа-Банк",
                    "bankName": null,
                    "currency": "RUR",
                    "rate": 1.0,
                    "status": "open",
                    "legalEntity": {
                        "id": 1,
                        "name": "Наилучшая компания"
                    },
                    "amount": "2000000.00"
                },
                "description": null,
                "hasAccrual": false,
                "confirmAccrual": true,
                "isPlanned": false,
                "isReadyToBeConfirmed": false,
                "isReadyToConfirmAccrual": null,
                "isPeriodic": false,
                "periodicChain": null,
                "period": null,
                "isCommitment": null,
                "isTransfer": null,
                "isAvailable": true,
                "hasAttachments": false,
                "exchangeRate": 1.0,
                "repetitionEndDate": null,
                "bankAccountAmount": "0",
                "tags": [],
                "transferId": null,
                "pairedTransactionId": null,
                "pairTransferTransaction": null,
                "category": null,
                "project": null,
                "contractor": null,
                "businessUnit": null,
                "importedId": "adesk:a3c9b132-a687-4cc5-bf16-80ee04b3c824"
        }
    ],
}
                        
                      
```

##### Параметры успешного ответа:

| Параметр     | Тип           | Описание / Возможные значения   |
| ------------ | ------------- | ------------------------------- |
| success      | Boolean       | Флаг успеха выполнения запроса. |
| transactions | Array[Object] | Список объектов операций.       |

##### Пример неуспешного ответа:

Пример тела ответа:

```json
{
  "success": false,
  "message": "Cannot use closed bank account",
  "errorCode": "cannot_use_closed_bank_account"
}
                        
                      
```

##### Параметры неуспешного ответа:

| Параметр  | Тип     | Описание / Возможные значения   |
| --------- | ------- | ------------------------------- |
| success   | Boolean | Флаг успеха выполнения запроса. |
| message   | String  | Сообщение об ошибке.            |
| errorCode | String  | Код ошибки.                     |

### Массовое изменение операций

POST

 

v2

 

application/json

https://api.adesk.ru/v2/transactions/update?api_token=your_api_token

Данный метод можно использовать для массового изменения операций.

На вход принимает объект с массивом объектов операций и флаг для применения правил импорта.

##### Параметры объекта:

| Параметр         | Тип           | Описание / Возможные значения       | Обязательный |
| ---------------- | ------------- | ----------------------------------- | ------------ |
| transactions     | Array[Object] | Список объектов операций.           | Да           |
| applyImportRules | Boolean       | Флаг для применения правил импорта. | Нет          |

##### Параметры объекта операции:

| Параметр         | Тип           | Описание / Возможные значения                                | Обязательный |
| ---------------- | ------------- | ------------------------------------------------------------ | ------------ |
| id               | Number        | id операции.                                                 | Да           |
| bankAccountId    | Number        | id банковского счета.                                        | Нет          |
| amount           | Number        | Сумма операции. Игнорируется, если isSplitted = true.        | Нет          |
| date             | String        | Дата операции в формате YYYY-MM-DD.                          | Нет          |
| description      | String        | Описание операции. Произвольная строка. Ограничение длины — 510 символов. | Нет          |
| relatedDate      | String        | Дата начисления в формате YYYY-MM-DD. Если нужно сбросить начисление, нужно указать null. | Нет          |
| categoryId       | Number        | id статьи операции. Тип статьи должен соответствовать типу создаваемой операции. Игнорируется, если isSplitted = true. | Нет          |
| contractorId     | Number        | id контрагента, к которому привязана операция. Игнорируется, если isSplitted = true. | Нет          |
| projectId        | Number        | id проекта, к которому привязана операция. Игнорируется, если isSplitted = true. Нельзя передать одновременно с полем businessUnitId. | Нет          |
| businessUnitId   | Number        | id направления бизнеса, к которому привязана операция. Игнорируется, если isSplitted = true. Может быть только c типом операции = Расход. Нельзя передать одновременно с полем projectId. | Нет          |
| tagIds           | Array[Number] | Список тегов. Игнорируется, если в текущем тарифе нет доступа к тегам. | Нет          |
| importedId       | String        | Уникальный id, который можно присвоить операции и использовать его в вашей системе. Ограничение длины — 100 символов. | Нет          |
| period           | String        | Периодичность с которой повторяется операция. Возможные значения:`"day"` — каждый день`"week"` — каждая неделя`"two_weeks"` — каждые две недели`"month"` — каждый месяц`"two_months"` — каждые два месяца`"quarter"` — каждый квартал`"half_year"` — каждое полугодие`"year"` — каждый год`null` — если нужно отменить повторение операции. Передается вместе с параметром periodEndDate = null | Нет          |
| periodEndDate    | String        | Дата, до которой нужно повторять операции с заданной периодичностью. В формате YYYY-MM-DD. | Нет          |
| periodicEditType | String        | Параметр для повторяющихся операций. Возможные значения:`"this"` — изменить только эту операцию`"this-and-following"` — изменить эту и последующие операции | Нет          |
| isPlanned        | Boolean       | Указывает, является ли операция плановой.                    | Нет          |
| isCommitment     | Boolean       | Указывает нужно ли учитывать операцию как обязательство. Игнорируется, если isSplitted = true. | Нет          |
| confirmAccrual   | Boolean       | Указывает, нужно ли подтверждать начисление на выбранную дату. Игнорируется, если не передана relatedDate. | Нет          |
| isSplitted       | Boolean       | Указывает, нужно ли разбить операцию на несколько частей.    | Нет          |
| parts            | Array[Object] | Список частиц операции. Игнорируется, если не передан isSplitted, либо isSplitted = false. | Нет          |

##### Параметры объекта частицы операции:

| Параметр       | Тип     | Описание / Возможные значения                                | Обязательный                                                 |
| -------------- | ------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| id             | Number  | id частицы операции.                                         | Нет. Если не указан, то будет создана новая частица. В этом случае нужно будет указать поле amount. |
| amount         | Number  | Сумма операции.                                              | Нет                                                          |
| relatedDate    | String  | Дата начисления в формате YYYY-MM-DD. Если нужно сбросить начисление, нужно указать null. | Нет                                                          |
| categoryId     | Number  | id статьи операции. Тип статьи должен соответствовать типу создаваемой операции. | Нет                                                          |
| contractorId   | Number  | id контрагента, к которому привязана операция.               | Нет                                                          |
| projectId      | Number  | id проекта, к которому привязана операция. Нельзя передать одновременно с полем businessUnitId. | Нет                                                          |
| businessUnitId | Number  | id направления бизнеса, к которому привязана операция. Может быть только c типом операции = Расход. Нельзя передать одновременно с полем projectId. | Нет                                                          |
| isCommitment   | Boolean | Указывает нужно ли учитывать операцию как обязательство.     | Нет                                                          |
| confirmAccrual | Boolean | Указывает, нужно ли подтверждать начисление на выбранную дату. Игнорируется, если не передана relatedDate. | Нет                                                          |

##### Пример запроса:

Пример тела запроса:

```json
{
    "transactions": [
        {
            "id": 1,
            "amount": 3010,
        },
        {
            "id": 2,
            "date": "2025-07-01",
            "bankAccountId": 3,
            "categoryId": 5
        },
    ],
}
                        
                      
```

##### Пример успешного ответа:

Пример тела ответа:

```json
{
  "success": true,
  "transactions": [
        {
                "id": 1,
                "type": 1,
                "amount": "3010.00",
                "isSplitted": false,
                "splitId": null,
                "date": "01.07.2025",
                "dateFormatted": "01.07.2025",
                "dateIso": "2025-07-01",
                "relatedDate": "01.07.2025",
                "relatedDateIso": "2025-07-01",
                "bankAccount": {
                    "id": 1,
                    "name": "Сбербанк",
                    "bankName": null,
                    "currency": "RUR",
                    "rate": 1.0,
                    "status": "open",
                    "legalEntity": {
                        "id": 1,
                        "name": "ИП 'Лучшая компания'"
                    },
                    "amount": "1000000.00"
                },
                "description": null,
                "hasAccrual": false,
                "confirmAccrual": true,
                "isPlanned": false,
                "isReadyToBeConfirmed": false,
                "isReadyToConfirmAccrual": null,
                "isPeriodic": false,
                "periodicChain": null,
                "period": null,
                "isCommitment": null,
                "isTransfer": null,
                "isAvailable": true,
                "hasAttachments": false,
                "exchangeRate": 1.0,
                "repetitionEndDate": null,
                "bankAccountAmount": "0",
                "tags": [],
                "transferId": null,
                "pairedTransactionId": null,
                "pairTransferTransaction": null,
                "category": null,
                "project": null,
                "contractor": null,
                "businessUnit": null,
                "importedId": "adesk:ace49eb7-ae2e-47ef-b177-627214a1b859"
        },
        {
                "id": 2,
                "type": 2,
                "amount": "350.00",
                "isSplitted": false,
                "splitId": null,
                "date": "01.07.2025",
                "dateFormatted": "01.07.2025",
                "dateIso": "2025-07-01",
                "relatedDate": "01.07.2025",
                "relatedDateIso": "2025-07-01",
                "bankAccount": {
                    "id": 3,
                    "name": "Т-Банк",
                    "bankName": null,
                    "currency": "RUR",
                    "rate": 1.0,
                    "status": "open",
                    "legalEntity": {
                        "id": 1,
                        "name": "Наилучшая компания"
                    },
                    "amount": "2000000.00"
                },
                "description": null,
                "hasAccrual": false,
                "confirmAccrual": true,
                "isPlanned": false,
                "isReadyToBeConfirmed": false,
                "isReadyToConfirmAccrual": null,
                "isPeriodic": false,
                "periodicChain": null,
                "period": null,
                "isCommitment": null,
                "isTransfer": null,
                "isAvailable": true,
                "hasAttachments": false,
                "exchangeRate": 1.0,
                "repetitionEndDate": null,
                "bankAccountAmount": "0",
                "tags": [],
                "transferId": null,
                "pairedTransactionId": null,
                "pairTransferTransaction": null,
                "category": {
                    id: 5,
                    name: "Статья"
                },
                "project": null,
                "contractor": null,
                "businessUnit": null,
                "importedId": "adesk:a3c9b132-a687-4cc5-bf16-80ee04b3c824"
        }
    ],
}
                        
                      
```

##### Параметры успешного ответа:

| Параметр     | Тип           | Описание / Возможные значения   |
| ------------ | ------------- | ------------------------------- |
| success      | Boolean       | Флаг успеха выполнения запроса. |
| transactions | Array[Object] | Список объектов операций.       |

##### Пример неуспешного ответа:

Пример тела ответа:

```json
{
  "success": false,
  "message": "Cannot use closed bank account",
  "errorCode": "cannot_use_closed_bank_account"
}
                        
                      
```

##### Параметры неуспешного ответа:

| Параметр  | Тип     | Описание / Возможные значения   |
| --------- | ------- | ------------------------------- |
| success   | Boolean | Флаг успеха выполнения запроса. |
| message   | String  | Сообщение об ошибке.            |
| errorCode | String  | Код ошибки.                     |

### Массовое удаление операций.

POST

 

v2

 

application/json

https://api.adesk.ru/v2/transactions/remove?api_token=your_api_token

Данный метод можно использовать для массового удаления операций.

На вход принимает список id операций.

##### Параметры объекта:

| Параметр           | Тип           | Описание / Возможные значения                                | Обязательный |
| ------------------ | ------------- | ------------------------------------------------------------ | ------------ |
| transactionsIds    | Array[Number] | Список id операций.                                          | Да           |
| periodicRemoveType | String        | Параметр для повторяющихся операций. Возможные значения:`"this"` — удалить только переданные операции и не удалять остальные повторяющиеся операции из затронутых цепочек`"this-and-following"` — удалить переданные и последующие операции из затронутых цепочек`"all"` — удалить переданные и все остальные повторяющиеся операции из затронутых цепочек | Нет          |

##### Пример запроса:

Пример тела запроса:

```json
{
  "transactionsIds": [1, 2, 3],
  "periodicRemoveType": "this"
}
                        
                      
```

##### Пример успешного ответа:

Пример тела ответа:

```json
{
  "success": true
}
                        
                      
```

##### Параметры успешного ответа:

| Параметр | Тип     | Описание / Возможные значения   |
| -------- | ------- | ------------------------------- |
| success  | Boolean | Флаг успеха выполнения запроса. |

##### Пример неуспешного ответа:

Пример тела ответа:

```json
{
  "success": false,
  "message": "Cannot use closed bank account",
  "errorCode": "cannot_use_closed_bank_account"
}
                        
                      
```

##### Параметры неуспешного ответа:

| Параметр  | Тип     | Описание / Возможные значения   |
| --------- | ------- | ------------------------------- |
| success   | Boolean | Флаг успеха выполнения запроса. |
| message   | String  | Сообщение об ошибке.            |
| errorCode | String  | Код ошибки.                     |

### Добавление операции

POST

 

v1

 

application/x-www-form-urlencoded

Рекомендуем использовать API [массового добавления операций](https://adesk.ru/api-docs/#masscreatetransaction).

https://api.adesk.ru/v1/transaction?api_token=your_api_token

Добавляет новую операцию с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр            | Тип     | Возможные значения                                           | Описание                                                     | Обязательный |
| ------------------- | ------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------ |
| date                | String  |                                                              | Дата операции в формате YYYY-MM-DD.                          | Да           |
| type                | String  | income, outcome                                              | Тип операции: Приход или Расход.                             | Да           |
| apply_import_rules  | Boolean | true, false                                                  | Флаг для применения правил импорта.                          | Нет          |
| category            | Number  |                                                              | id статьи операции. Тип статьи должен соответствовать типу создаваемой операции. Игнорируется если is_splitted = true. | Нет          |
| project             | Number  |                                                              | id проекта, к которому привязана операция. Игнорируется если is_splitted = true. Нельзя передать одновременно с полем business_unit. | Нет          |
| business_unit       | Number  |                                                              | id направления бизнеса, к которому привязана операция. Игнорируется если is_splitted = true. Может быть только c типом операции = Расход. Нельзя передать одновременно с полем project. | Нет          |
| contractor          | Number  |                                                              | id контрагента, к которому привязана операция. Игнорируется если is_splitted = true. | Нет          |
| amount              | Number  |                                                              | Сумма операции. Игнорируется если is_splitted = true.        | Да           |
| bank_account        | Number  |                                                              | id счета, по которому проводилась операция.                  | Да           |
| description         | String  |                                                              | Описание операции. Произвольная строка. Ограничение длины — 510 символов. | Нет          |
| related_date        | String  |                                                              | Дата начисления в формате YYYY-MM-DD. Указывается только если дата начисления по операции отличается от даты создания. | Нет          |
| is_periodic         | Boolean | true, false                                                  | Указывает нужно ли повторять данную операцию с заданной периодичностью. Игнорируется если is_splitted = true. | Нет          |
| period              | String  | week, two_weeks, month, two_months, quarter, half_year, year | Периодичность с которой повторяется операция. Игнорируется если is_splitted = true. | Нет          |
| repetition_end_date | String  |                                                              | Дата, до которой нужно повторять операции с заданной периодичностью. В формате YYYY-MM-DD. | Нет          |
| is_commitment       | Boolean | true, false                                                  | Указывает нужно ли учитывать операцию как обязательство. Игнорируется если is_splitted = true. | Нет          |
| is_planned          | Boolean | true                                                         | Указывает, является ли операция плановой.                    | Нет          |
| is_splitted         | Boolean | true, false                                                  | Указывает нужно ли разбить операцию на несколько частей.     | Нет          |
| parts               | String  | "[{"project": 1, "contractor": 1, "amount": 1000, "is_commitment": true, "related_date": "2019-01-01"}, ...]" | JSON строка, которая представляет собой список объектов, в котором содержится информация о разбиении операции.Принимаются следующие параметры: amount, contractor, project, business_unit, category, related_date. Параметры аналогичны тем, что используются при обычном создании операции. Параметр amount обязателен. Параметры project и business_unit взаимоисключающие. | Нет          |
| tags                | String  |                                                              | Список id тегов, указываются через запятую.                  | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр     | Тип     | Описание                                                     |
| ------------ | ------- | ------------------------------------------------------------ |
| success*     | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| transaction* | Object  | Объект операции.* только при условии успеха запроса (success). |
| errors       | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "amount": [        "Обязательное поле."    ],    "bank_account": [        "Обязательное поле."    ] } ` |

### Изменение операции

POST

 

v1

 

application/x-www-form-urlencoded

Рекомендуем использовать API [массового редактирования операций](https://adesk.ru/api-docs/#massupdatetransaction).

https://api.adesk.ru/v1/transaction/<transaction_id>?api_token=your_api_token

Изменяет данные об операции по ее идентификатору. Для удаления текущего значения поля операции, необходимо отправить параметр с пустой строкой.

##### Параметры (объект Form Data):

| Параметр            | Тип     | Возможные значения                                           | Описание                                                     | Обязательный |
| ------------------- | ------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------ |
| date                | String  |                                                              | Дата операции в формате YYYY-MM-DD.                          | Да           |
| category            | Number  |                                                              | id статьи операции. Тип статьи должен соответствовать типу редактируемой операции. Игнорируется если is_splitted = true. | Нет          |
| project             | Number  |                                                              | id проекта, к которому привязана операция. Игнорируется если is_splitted = true. Нельзя передать одновременно с полем business_unit. | Нет          |
| business_unit       | Number  |                                                              | id направления бизнеса, к которому привязана операция. Игнорируется если is_splitted = true. Может быть только c типом операции = Расход. Нельзя передать одновременно с полем project. | Нет          |
| contractor          | Number  |                                                              | id контрагента, к которому привязана операция. Игнорируется если is_splitted = true. | Нет          |
| bank_account        | Number  |                                                              | id банковского счета, к которому привязана операция.         | Да           |
| amount              | Number  |                                                              | Сумма операции.                                              | Да           |
| description         | String  |                                                              | Описание операции. Произвольная строка. Ограничение длины — 510 символов. | Нет          |
| related_date        | String  |                                                              | Дата в формате YYYY-MM-DD. Указывается только если дата начисления операции отличается от даты создания. | Нет          |
| is_periodic         | Boolean | true, false                                                  | Указывает нужно ли повторять данную операцию с заданной периодичностью. Игнорируется если is_splitted = true. | Нет          |
| period              | String  | week, two_weeks, month, two_months, quarter, half_year, year | Периодичность с которой повторяется операция. Игнорируется если is_splitted = true. | Нет          |
| repetition_end_date | String  |                                                              | Дата, до которой нужно повторять операции с заданной периодичностью.  В формате YYYY-MM-DD. | Нет          |
| is_commitment       | Boolean | true, false                                                  | Указывает нужно ли учитывать операцию как обязательство. Игнорируется если is_splitted = true. | Нет          |
| is_planned          | Boolean | true                                                         | Указывает, является ли операция плановой.Для подтверждения операции воспользуйтесь [этим](https://adesk.ru/api-docs/#completetransaction) методом. | Нет          |
| is_splitted         | Boolean | true, false                                                  | Указывает нужно ли разбить операцию на несколько частей.В случае если редактируемая операция уже разбита, то при значении false произойдет отмена разбиения, а при true информация о разбиении обновится согласно передаваемому параметру parts. | Нет          |
| parts               | String  | "[{"project": 1, "contractor": 1, "amount": 1000, "is_commitment": true, "related_date": "2019-01-01"}, ...]" | JSON строка, которая представляет собой список объектов, в котором содержится информация о разбиении операции.Принимаются следующие параметры: amount, contractor, project, category, related_date. Параметры аналогичны тем, что используются при обычном создании операции. Параметр amount обязателен. Сумма параметров amount должна совпадать с суммой редактируемой операции. Параметры project и business_unit взаимоисключающие.Если операция уже разбита на части, передача данного параметра заменяет данные о разбиении. | Нет          |
| periodic_edit_type  | String  | this — изменить только эту операциюthis-and-following — изменить эту и последующие операции | Флаг для повторяющихся операций.                             | Нет          |
| tags                | String  |                                                              | Список id тегов, указываются через запятую.                  | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр     | Тип     | Описание                                                     |
| ------------ | ------- | ------------------------------------------------------------ |
| success*     | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| transaction* | Object  | Объект операции.**Внимание:** При обновлени, в объекте операции возвращается новый id и в дальнейшем обращаться к этой операции необходимо уже по нему.* только при условии успеха запроса (success). |
| errors       | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "amount": [        "Обязательное поле."    ] } ` |

### Удаление операции

POST

 

v1

 

application/x-www-form-urlencoded

Рекомендуем использовать API [массового удаления операций](https://adesk.ru/api-docs/#massremovetransaction).

https://api.adesk.ru/v1/transaction/<transaction_id>/remove?api_token=your_api_token

Удаление операции по ее идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Подтверждение операции

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/transaction/<transaction_id>/complete?api_token=your_api_token

Позволяет отметить ранее запланированную (isPlanned) операцию как состоявшуюся.

Данный метод не использует каких-либо специфических POST параметров.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                        |
| -------- | ------- | ------------------------------- |
| success  | Boolean | Флаг успеха выполнения запроса. |

### Получение операции

GET

 

v1

https://api.adesk.ru/v1/transaction/<transaction_id>?api_token=your_api_token

Получение информации об операции по ее идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр     | Тип     | Описание                                                     |
| ------------ | ------- | ------------------------------------------------------------ |
| success*     | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| transaction* | Object  | Объект операции.* только при условии успеха запроса (success). |
| message      | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение списка операций

GET

 

v1

https://api.adesk.ru/v1/transactions?api_token=your_api_token

Получение списка операций с возможностью выбора по конкретному периоду, а также фильтрацией по различным параметрам.

##### Возможные параметры:

Параметры не являются обязательными. При их отсутствии, соответствующая фильтрация не будет осуществляться и вернется список всех операций.

| Параметр        | Возможные значения/Тип                                       | Описание                                                     |
| --------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| range           | all_time — все время (по умолчанию)this_month — текущий месяцthis_quarter — текущий кварталthis_year — текущий годprev_month — предыдущий месяцprev_quarter — предыдущий кварталprev_year — предыдущий годcustom* — произвольный период | Позволяет выбрать период, за который необходимо сформировать отчет. Если параметр не задан, отчет формируется за всё время.* при выборе интервала custom параметры range_start и range_end являются обязательными. |
| range_start     | YYYY-MM-DD — формат даты для передачи в запросе              | Используется только в сочетании с периодом custom, позволяет задать дату начала желаемого периода.Игнорируется во всех других случаях. |
| range_end       | YYYY-MM-DD — формат даты для передачи в запросе              | Используется только в сочетании с периодом custom, позволяет задать дату окончания желаемого периода.Игнорируется во всех других случаях. |
| type            | all — все типы (по умолчанию)income — только поступленияoutcome — только расходыtransfers — только переводы | Тип операций для фильтрации. Будут возвращены операции только указанного типа. |
| category        | all — все статьи (по умолчанию)Number (тип) — идентификатор статьиno_category — без статьи | Идентификатор статьи для фильтрации. Будут возвращены операции только с указанной статьей. Выбранная статья должна соответствовать типу, указанному выше, иначе список будет пустым. Значение "no_category" вернет только те операции, у которых не указана статья. |
| bank_account    | Number                                                       | Идентификатор счета для фильтрации. Будут возвращены только операции, привязанные к конкретному счету. |
| legal_entity*   | Number                                                       | Идентификатор юрлица для фильтрации. Будут возвращены только операции по счету принадлежащему указанному юрлицу.* будет проигнорирован, если передан параметр bank_account. |
| contractor      | Number                                                       | Идентификатор контрагента. Будут возвращены только операции по данному контрагенту. |
| contractor_inn* | Number                                                       | ИНН контрагента. Будут возвращены только операции по контрагенту с указанным ИНН.* будет проигнорирован, если передан параметр contractor. |
| project         | Number                                                       | Идентификатор проекта для фильтрации. Будут возвращены только операции, привязанные к конкретному проекту.Также поддерживаются специальные значения: no_project - вернет только операции без проекта, any_project - вернет только операции с назначенным проектом. |
| business_unit   | Number                                                       | Идентификатор направления бизнеса для фильтрации. Будут возвращены только операции, привязанные к конкретному направлению бизнеса.Также поддерживаются специальные значения: no_business_unit - вернет только операции без направления бизнеса, any_business_unit - вернет только операции с назначенным направлением бизнеса. |
| status          | String                                                       | Статус операции: completed — выберет фактические операции, planned — выберет плановые операции, all — выберет все операции. |
| owner_transfer  | String                                                       | Фильтрует операции со статьями типа ввод или вывод денег.true — выберет только операции со статьями типа ввод или вывод денег, false — уберет такие операции из результата, all — выберет все операции.Значение по умолчанию — all. |
| taxes           | String                                                       | Фильтрует операции со статьей "Налоги и пошлины".true — выберет только операции со статьей "Налоги и пошлины", false — уберет такие операции из результата, all — выберет все операции.Значение по умолчанию — all. |
| date_type       | String                                                       | Указывает по какой дате сортировать операции.cashier — отфильтрует операции по фактической дате (date), accrual — отфильтрует операции по дате начисления (related_date).Значение по умолчанию — cashier. |
| start           | Number                                                       | Позволяет установить индекс элемента из общей выборки, начиная с которого данные будут возвращены. Отсчет ведется с 0. |
| length          | Number                                                       | Позволяет ограничить длину выборки. Если установлен стартовый индекс, то расчет длины происходит начиная с него. |

##### Пример запроса:

https://api.adesk.ru/v1/transactions?api_token=your_api_token&range=custom&range_start=2018-12-05&range_end=2018-12-15&type=income

Данный запрос вернет список операций типа "поступление" по всем статьям и счетам за произвольный период с 5 по 15 декабря 2018 года.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип     | Описание                                                     |
| --------------- | ------- | ------------------------------------------------------------ |
| success*        | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| transactions*   | Array   | Массив объектов операций. Может быть пустым, если ничего не попадает под параметры фильтрации.* только при условии успеха запроса (success). |
| recordsTotal    | Number  | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number  | Общее количество записей, доступных по указанному фильтру.   |

## Контрагенты

Пример объекта контрагента, который является основной структурой данных для методов по контрагентам:

```json
{
    "id": 1245,                                  // уникальный идентификатор
    "name": "ИП Борей",                          // название контрагента
    "contactPerson": "Иванов Дмитрий Сергеевич", // контактное лицо
    "phoneNumber": "+79999999999",               // номер телефона
    "email": "borealis@mail.ru"                  // адрес электронной почты
    "balance": -14000.00,                        // баланс обязательств контрагентау
}
```

### Получение списка контрагентов

GET

 

v1

https://api.adesk.ru/v1/contractors?api_token=your_api_token

Получение списка всех неудаленных объектов контрагентов на аккаунте.

##### Возможные параметры:

Параметры не являются обязательными. При их отсутствии, соответствующая фильтрация не будет осуществляться и вернется список всех контрагентов.

| Параметр              | Тип                                                          | Описание                                                     |
| --------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| range                 | all — все время (по умолчанию)this_month — текущий месяцthis_quarter — текущий кварталthis_year — текущий годprev_month — предыдущий месяцprev_quarter — предыдущий кварталprev_year — предыдущий годcustom* — произвольный период | Позволяет выбрать контрагентов, по которым были операции за указанный период.* при выборе интервала custom параметры range_start и range_end являются обязательными. |
| range_start           | YYYY-MM-DD — формат даты для передачи в запросе              | Используется только в сочетании с периодом custom, позволяет задать дату начала желаемого периода.Игнорируется во всех других случаях. |
| range_end             | YYYY-MM-DD — формат даты для передачи в запросе              | Используется только в сочетании с периодом custom, позволяет задать дату окончания желаемого периода.Игнорируется во всех других случаях. |
| reduced               | Boolean (true, false)                                        | Параметр, отвечающий за ограничение количества выводимых параметров в ответе. Если true, то ответ не детализированный. |
| q                     | String                                                       | Строка для поиска по имени контрагента.                      |
| inn                   | Number                                                       | Строка для поиска по ИНН контрагента.                        |
| checking_bank_account | Number                                                       | Строка для поиска контрагента по расчетному счету в реквизитах. |
| with_balance          | Boolean (true, false)                                        | Исключает из выборки контрагентов с нулевым балансом. Если true, то в итоговой выборки будут контрагенты, с которыми сумма обязательств не равна 0. |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success         | Boolean       | Флаг успеха выполнения запроса.                              |
| contractors     | Array[Object] | Массив объектов контрагентов. Может быть пустым, если на аккаунте нет неудаленных объектов контрагентов. |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |
| message         | String        | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение контрагента

GET

 

v1

https://api.adesk.ru/v1/contractor/<contractor_id>?api_token=your_api_token

Получение детальной информации о контрагенте по его идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр    | Тип     | Описание                                                     |
| ----------- | ------- | ------------------------------------------------------------ |
| success*    | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| contractor* | Object  | Объект контрагента.* только при условии успеха запроса (success). |
| message     | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение списка обязательств контрагента

GET

 

v1

https://api.adesk.ru/v1/contractor/<contractor_id>/commitments?api_token=your_api_token

Получение списка всех неудаленных обязательств контрагента на аккаунте.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип     | Описание                                                     |
| --------------- | ------- | ------------------------------------------------------------ |
| success         | Boolean | Флаг успеха выполнения запроса.                              |
| commitments     | Array   | Массив объектов обязательств. Может быть пустым, если на аккаунте нет неудаленных объектов обязательств. |
| recordsTotal    | Number  | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number  | Общее количество записей, доступных по указанному фильтру.   |
| message         | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Получение списка реквизитов контрагента

GET

 

v1

https://api.adesk.ru/v1/contractor/<contractor_id>/requisites?api_token=your_api_token

Получение списка всех неудаленных реквизитов контрагента на аккаунте.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип     | Описание                                                     |
| --------------- | ------- | ------------------------------------------------------------ |
| success         | Boolean | Флаг успеха выполнения запроса.                              |
| requisites      | Array   | Массив объектов реквизитов. Может быть пустым, если на аккаунте нет неудаленных объектов обязательств. |
| recordsTotal    | Number  | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number  | Общее количество записей, доступных по указанному фильтру.   |
| message         | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Добавление контрагента

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/contractor?api_token=your_api_token

Добавляет нового контрагента с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр       | Тип / Возможные значения | Описание                              | Обязательный |
| -------------- | ------------------------ | ------------------------------------- | ------------ |
| name           | String                   | Название контрагента.                 | Да           |
| contact_person | String                   | Контактное лицо.                      | Нет          |
| phone_number   | String                   | Телефонный номер.                     | Нет          |
| email          | String                   | Адрес электроннной почты контрагента. | Нет          |
| description    | String                   | Краткое описание контрагента.         | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр    | Тип     | Описание                                                     |
| ----------- | ------- | ------------------------------------------------------------ |
| success*    | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| contractor* | Object  | Объект контрагента.* только при условии успеха запроса (success). |
| errors      | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "amount": [        "Обязательное поле."    ] } ` |

### Изменение контрагента

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/contractor/<contractor_id>?api_token=your_api_token

Изменяет данные о контрагенте по его идентификатору. Для удаления текущего значения поля контрагента, необходимо отправить параметр с пустой строкой.

##### Параметры (объект Form Data):

| Параметр       | Тип / Возможные значения | Описание                              | Обязательный |
| -------------- | ------------------------ | ------------------------------------- | ------------ |
| name           | String                   | Название контрагента.                 | Нет          |
| contact_person | String                   | Контактное лицо.                      | Нет          |
| phone_number   | String                   | Телефонный номер.                     | Нет          |
| email          | String                   | Адрес электроннной почты контрагента. | Нет          |
| description    | String                   | Краткое описание контрагента.         | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| message* | String  | Сообщение о некорректных данных или некоторых ошибках.* только при условии неудачи запроса (success). |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "amount": [        "Обязательное поле."    ] } ` |

### Удаление контрагента

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/contractor/<contractor_id>/remove?api_token=your_api_token

Удаление контрагента по идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Массовое удаление контрагентов

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/contractors/remove?api_token=your_api_token

Массовое удаление контрагентов по идентификатору.

##### Параметры (объект Form Data):

| Параметр       | Тип / Возможные значения | Описание                             | Обязательный |
| -------------- | ------------------------ | ------------------------------------ | ------------ |
| contractor_ids | String                   | Список id контрагентов для удаления. | Да           |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

## Реквизиты

Пример объекта реквизитов, который является основной структурой данных для методов по реквизитам:

```json
{
    "id": 1832,                                    // уникальный идентификатор
    "name": "Смолов Сергей Семенович",             // название юр. лица контрагента
    "inn": "123456789987",                         // ИНН контрагента
    "kpp": "123456789987",                         // КПП контрагента
    "correspondentAccount":,                       // корреспондентский счёт банка
    "bankName":,                                   // название банка
    "bankAccountNumber": "199991244578149123",     // номер счёта
    "bankCode": "045678",                          // БИК банка
    "address": "Комсомольский проспект, 10, 312",  // адрес
    "phoneNumber": "+79999999999",                 // номер телефона
    "email": "uralstroy@mail.ru",                  // email
    "website": "uralstroy.ru",                     // сайт
}
```

### Добавление реквизитов

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/requisites?api_token=your_api_token

Добавляет новые реквизиты контрагента с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр              | Тип    | Описание                                                     | Обязательный |
| --------------------- | ------ | ------------------------------------------------------------ | ------------ |
| contractor            | Number | id контрагента.                                              | Да           |
| name                  | String | Название юр. лица контрагента. Максимальная длина поля: 255 символов. | Да           |
| inn                   | String | ИНН контрагента. Максимальная длина поля: 20 символов.       | Нет          |
| kpp                   | String | КПП контрагента. Максимальная длина поля: 12 символов.       | Нет          |
| bank_account_number   | String | Номер счета контрагента. Максимальная длина поля: 30 символов. | Нет          |
| bank_code             | String | БИК банка контрагента. Максимальная длина поля: 15 символов. | Нет          |
| bank_name             | String | Название банка контрагента. Максимальная длина поля: 210 символов. | Нет          |
| address               | String | Адрес контрагента. Максимальная длина поля: 100 символов.    | Нет          |
| correspondent_account | String | Корреспондентский счёт банка контрагента. Максимальная длина поля: 64 символа. | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр    | Тип     | Описание                                                     |
| ----------- | ------- | ------------------------------------------------------------ |
| success*    | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| message*    | String  | Сообщение о некорректных данных или некоторых ошибках.* только при условии неудачи запроса (success). |
| errors      | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ], } ` |
| requisites* | Object  | Объект реквизитов.* только при условии успеха запроса (success). |

### Изменение реквизитов

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/requisites/<requisites_id>?api_token=your_api_token

Изменяет реквизиты контрагента с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр              | Тип    | Описание                                                     | Обязательный |
| --------------------- | ------ | ------------------------------------------------------------ | ------------ |
| contractor            | Number | id контрагента.                                              | Да           |
| name                  | String | Название юр. лица контрагента. Максимальная длина поля: 255 символов. | Да           |
| inn                   | String | ИНН контрагента. Максимальная длина поля: 20 символов.       | Нет          |
| kpp                   | String | КПП контрагента. Максимальная длина поля: 12 символов.       | Нет          |
| bank_account_number   | String | Номер счета контрагента. Максимальная длина поля: 30 символов. | Нет          |
| bank_code             | String | БИК банка контрагента. Максимальная длина поля: 15 символов. | Нет          |
| bank_name             | String | Название банка контрагента. Максимальная длина поля: 210 символов. | Нет          |
| address               | String | Адрес контрагента. Максимальная длина поля: 100 символов.    | Нет          |
| correspondent_account | String | Корреспондентский счёт банка контрагента. Максимальная длина поля: 64 символа. | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр    | Тип     | Описание                                                     |
| ----------- | ------- | ------------------------------------------------------------ |
| success*    | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| message*    | String  | Сообщение о некорректных данных или некоторых ошибках.* только при условии неудачи запроса (success). |
| errors      | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ], } ` |
| requisites* | Object  | Объект реквизитов.* только при условии успеха запроса (success). |

### Удаление реквизитов

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/requisites/<requisites_id>/remove?api_token=your_api_token

Удаление реквизитов по идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

## Товары и услуги

Пример объекта товара, который является основной структурой данных для методов по товарам и услугам:

```json
{
    "id": 1234,                                    // уникальный идентификатор
    "type": 1,                                     // тип. 1 — товар, 2 — услуга
    "name": "Кирпич красный облицовочный",         // название
    "sku": "КО123456",                             // артикул
    "description":,                                // описание
    "unit": {                                      // единица измерения
        "id": 1,                                   // уникальный идентификатор
        "symbol": "шт",                            // краткое обозначение
        "name": "Штука",                           // название
        "code": "796",                             // код единицы в ОКЕИ: https://classifikators.ru/okei
        "fractional": false,                       // допустимо ли дробное количество
    },
    "initialBatch": {                              // начальная партия товара
        "date": "2022-01-20",                      // дата
        "quantity": 1000,                          // количество
        "price": 100,                              // цена за единицу
        "currency": "RUR",                         // валюта
        "legalEntity": {...},                      // юр. лицо
    },
}
```

### Список товаров и услуг

GET

 

v1

https://api.adesk.ru/v1/warehouse/products?api_token=your_api_token

Получение списка всех неудаленных товаров и услуг.

##### Возможные параметры:

Параметры не являются обязательными. При их отсутствии, соответствующая фильтрация не будет осуществляться и вернется список всех товаров и услуг.

| Параметр | Тип    | Описание                                           |
| -------- | ------ | -------------------------------------------------- |
| search   | String | Строка для поиска по названию или артикулу товара. |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success         | Boolean       | Флаг успеха выполнения запроса.                              |
| products        | Array[Object] | Массив объектов товаров. Может быть пустым, если на аккаунте нет неудаленных товаров. |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |
| message         | String        | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Добавление товара или услуги

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/warehouse/product?api_token=your_api_token

Добавляет новый товар или услугу с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр                   | Тип     | Описание                                                     | Обязательный                    |
| -------------------------- | ------- | ------------------------------------------------------------ | ------------------------------- |
| type                       | Number  | Тип. 1 — товар, 2 — услуга.                                  | Да                              |
| name                       | String  | Название. Максимальная длина поля: 250 символов.             | Да                              |
| sku                        | String  | Артикул. Максимальная длина поля: 250 символов.              | Нет                             |
| description                | String  | Описание. Максимальная длина поля: 500 символов.             | Нет                             |
| unit                       | Number  | id единицы измерения.                                        | Если type = 1                   |
| unit_name                  | String  | Название единицы измерения. Следует использовать, когда не известен id единицы измерения. | Если type = 1 и не передан unit |
| unit_symbol                | String  | Краткое обозначение единицы измерения. Следует использовать, когда не известен id единицы измерения. | Если type = 1 и не передан unit |
| unit_code                  | String  | Код единицы измерения в [ОКЕИ](https://classifikators.ru/okei). Следует использовать, когда не известен id единицы измерения. | Нет                             |
| with_initial_batch         | Boolean | Нужно ли создавать начальную партию товара.                  | Нет                             |
| initial_batch_date         | String  | Дата начальной партии в формате YYYY-MM-DD.                  | Если with_initial_batch = true  |
| initial_batch_quantity     | Number  | Количество товара в начальной партии.                        | Если with_initial_batch = true  |
| initial_batch_price        | Number  | Цена товара в начальной партии.                              | Если with_initial_batch = true  |
| initial_batch_currency     | String  | Валюта начальной партии.                                     | Если with_initial_batch = true  |
| initial_batch_legal_entity | Number  | id юр. лица, на балансе которого числится начальная партия.  | Если with_initial_batch = true  |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| message* | String  | Сообщение о некорректных данных или некоторых ошибках.* только при условии неудачи запроса (success). |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ], } ` |
| product* | Object  | Объект товара или услуги.* только при условии успеха запроса (success). |

### Изменение товара или услуги

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/warehouse/product/<product_id>?api_token=your_api_token

Изменяет данные о товаре или услуге. Для удаления текущего значения поля, необходимо отправить параметр с пустой строкой.

##### Параметры (объект Form Data):

| Параметр                   | Тип     | Описание                                                     | Обязательный |
| -------------------------- | ------- | ------------------------------------------------------------ | ------------ |
| name                       | String  | Название. Максимальная длина поля: 250 символов.             | Нет          |
| sku                        | String  | Артикул. Максимальная длина поля: 250 символов.              | Нет          |
| description                | String  | Описание. Максимальная длина поля: 500 символов.             | Нет          |
| unit                       | Number  | id единицы измерения.                                        | Нет          |
| unit_name                  | String  | Название единицы измерения. Следует использовать, когда не известен id единицы измерения. | Нет          |
| unit_symbol                | String  | Краткое обозначение единицы измерения. Следует использовать, когда не известен id единицы измерения. | Нет          |
| unit_code                  | String  | Код единицы измерения в [ОКЕИ](https://classifikators.ru/okei). Следует использовать, когда не известен id единицы измерения. | Нет          |
| with_initial_batch         | Boolean | Нужно ли создавать начальную партию товара.                  | Нет          |
| initial_batch_date         | String  | Дата начальной партии в формате YYYY-MM-DD.                  | Нет          |
| initial_batch_quantity     | Number  | Количество товара в начальной партии.                        | Нет          |
| initial_batch_price        | Number  | Цена товара в начальной партии.                              | Нет          |
| initial_batch_currency     | String  | Валюта начальной партии.                                     | Нет          |
| initial_batch_legal_entity | Number  | id юр. лица, на балансе которого числится начальная партия.  | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| message* | String  | Сообщение о некорректных данных или некоторых ошибках.* только при условии неудачи запроса (success). |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ], } ` |
| product* | Object  | Объект товара или услуги.* только при условии успеха запроса (success). |

### Удаление товара или услуги

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/warehouse/product/<product_id>/remove?api_token=your_api_token

Удаление товара или услуги по идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Список единиц измерения

GET

 

v1

https://api.adesk.ru/v1/warehouse/units?api_token=your_api_token

Получение списка единиц измерения.

```json
{
    "id": 1234,             // уникальный идентификатор
    "symbol": "шт",         // краткое обозначение
    "name": "Штука",        // название
    "code": "796",          // код единицы в ОКЕИ: https://classifikators.ru/okei
    "fractional": false,    // допустимо ли дробное количество
}
```

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип           | Описание                                                     |
| -------- | ------------- | ------------------------------------------------------------ |
| success  | Boolean       | Флаг успеха выполнения запроса.                              |
| units    | Array[Object] | Массив объектов единиц измерения.                            |
| message  | String        | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Список материальных расходов

GET

 

v1

https://api.adesk.ru/v1/warehouse/commodity-costs?api_token=your_api_token

Получение списка материальных расходов.

##### Параметры:

| Параметр | Тип           | Описание                                                     | Обязательный |
| -------- | ------------- | ------------------------------------------------------------ | ------------ |
| projects | Array[Number] | Массив id проектов. Будут возвращены только материальные расходы по выбранным проектам. | Да           |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success         | Boolean       | Флаг успеха выполнения запроса.                              |
| commodityCosts  | Array[Object] | Массив объектов материальных расходов.                       |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |
| errors          | Object        | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message         | String        | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Добавление материального расхода

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/warehouse/expenses?api_token=your_api_token

Добавляет материальный расход с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр     | Тип    | Описание                                                     | Обязательный |
| ------------ | ------ | ------------------------------------------------------------ | ------------ |
| date         | String | Дата списания в формате YYYY-MM-DD.                          | Да           |
| legal_entity | Number | id юридического лица.                                        | Да           |
| project      | Number | id сделки.                                                   | Да           |
| products     | string | JSON строка, которая представляет собой список объектов, в котором содержится информация о материалах или услугах.Принимаются следующие параметры: product_id, price, quantity.Поле price обязательно только для услуг.Пример:` [    {        "product_id":1,        "price": "500",        "quantity":"11"    },    {        "product_id":2,        "quantity":"7"    } ] ` | Да           |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| shipment | Object  | Объект отгрузки.                                             |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Изменение материального расхода

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/warehouse/expenses/<shipment_id>?api_token=your_api_token

Изменяет данные о материальном расходе с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр     | Тип    | Описание                                                     | Обязательный |
| ------------ | ------ | ------------------------------------------------------------ | ------------ |
| date         | String | Дата списания в формате YYYY-MM-DD.                          | Да           |
| legal_entity | Number | id юридического лица.                                        | Да           |
| project      | Number | id сделки.                                                   | Да           |
| products     | string | JSON строка, которая представляет собой список объектов, в котором содержится информация о материалах или услугах.Принимаются следующие параметры: product_id, price, quantity.Поле price обязательно только для услуг.Пример:` [    {        "product_id":1,        "price": "500",        "quantity":"11"    },    {        "product_id":2,        "quantity":"7"    } ] ` | Да           |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| shipment | Object  | Объект отгрузки.                                             |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ] } ` |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Удаление материального расхода

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/warehouse/expenses/<shipment_id>/remove?api_token=your_api_token

Удаление материального расхода по идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

## Теги

Пример объекта тега, который является основной структурой данных для методов по тегам:

```json
{
    "id": 12,                                      // уникальный идентификатор
    "name": "Доставка",                            // название
    "color": "orange",                             // цвет
}
```

### Список тегов

GET

 

v1

https://api.adesk.ru/v1/tags?api_token=your_api_token

Получение списка всех тегов.

##### Возможные параметры:

Параметры не являются обязательными. При их отсутствии, соответствующая фильтрация не будет осуществляться и вернется список всех тегов.

| Параметр | Тип    | Описание                            |
| -------- | ------ | ----------------------------------- |
| search   | String | Строка для поиска по названию тега. |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип           | Описание                                                     |
| -------- | ------------- | ------------------------------------------------------------ |
| success  | Boolean       | Флаг успеха выполнения запроса.                              |
| tags     | Array[Object] | Массив объектов тегов. Может быть пустым, если на аккаунте нет неудаленных тегов. |

### Получение тега

GET

 

v1

https://api.adesk.ru/v1/tag/<tag_id>?api_token=your_api_token

Получение детальной информации о теге по его идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| tag*     | Object  | Объект тега.* только при условии успеха запроса (success).   |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Добавление тега

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/tag?api_token=your_api_token

Добавляет новый тег с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр | Тип    | Описание / Возможные значения                                | Обязательный |
| -------- | ------ | ------------------------------------------------------------ | ------------ |
| name     | String | Название. Максимальная длина поля: 255 символов.             | Да           |
| color    | String | Цвет. Список кодов цвета для отправки.gray — серыйblue — синийteal — сине-зелёныйgreen — зелёныйyellow — желтыйorange — оранжевыйred — красныйpink — розовыйviolet — фиолетовыйbrown — коричневый | Да           |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "name": [        "Обязательное поле."    ], } ` |

### Изменение тега

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/tag/<tag_id>?api_token=your_api_token

Изменяет данные о теге.

##### Параметры (объект Form Data):

| Параметр | Тип    | Описание / Возможные значения                                | Обязательный |
| -------- | ------ | ------------------------------------------------------------ | ------------ |
| name     | String | Название. Максимальная длина поля: 255 символов.             | Нет          |
| color    | String | Цвет. Список кодов цвета для отправки.gray — серыйblue — синийteal — сине-зелёныйgreen — зелёныйyellow — желтыйorange — оранжевыйred — красныйpink — розовыйviolet — фиолетовыйbrown — коричневый | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "color": [        "'white' is not a valid TagColor: Некорректные входные данные."    ], } ` |

### Удаление тега

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/tag/<tag_id>/remove?api_token=your_api_token

Удаление тега по идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

## Пользовательские разделы в отчётах

Пример объекта раздела, который является основной структурой данных для методов по пользовательским разделам:

```json
{
  "id": 1,                                        // уникальный идентификатор
  "name": "Выручка от маркетплейсов",             // название
  "apiName": "marketplace_revenue",               // уникальный apiName
  "color": "violet",                              // цвет
  "reportSection": "direct_incomes"               // раздел отчета ОПиУ
}
```

### Список разделов

GET

 

v2

https://api.adesk.ru/v2/custom-report-groups?api_token=your_api_token

Получение списка всех разделов.

##### Возможные параметры:

| Параметр      | Тип    | Описание / Возможные значения                                |
| ------------- | ------ | ------------------------------------------------------------ |
| name          | String | Название пользовательского раздела.                          |
| apiName       | String | Уникальный apiName пользовательского раздела.                |
| color         | String | Цвет. Возможные значения:`"none"` — без цвета`"blue"` — синий`"teal"` — сине-зелёный`"green"` — зелёный`"yellow"` — желтый`"orange"` — оранжевый`"red"` — красный`"pink"` — розовый`"violet"` — фиолетовый`"brown"` — коричневый |
| reportSection | String | Раздел отчета ОПиУ, в котором находится пользовательский раздел. Возможные значения:`"direct_incomes"` — выручка`"direct_outcomes"` — прямые расходы`"indirect_incomes"` — прочие доходы`"indirect_outcomes"` — косвенные расходы`"other_outcomes"` — прочие расходы |

##### Пример запроса:

https://api.adesk.ru/v2/custom-report-groups?api_token=your_api_token&apiName=marketplace_revenue

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Выручка от маркетплейсов",
      "apiName": "marketplace_revenue",
      "color": "violet",
      "reportSection": "direct_incomes"
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения   |
| -------- | ------------- | ------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса. |
| data     | Array[Object] | Список найденных разделов.      |

### Создание разделов

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-groups/create?api_token=your_api_token

Данный метод можно использовать для массового создания разделов.

На вход принимает массив объектов.

##### Параметры объекта:

| Параметр      | Тип    | Описание / Возможные значения                                | Обязательный                                                 |
| ------------- | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| name          | String | Название пользовательского раздела.                          | Да                                                           |
| apiName       | String | Уникальный apiName пользовательского раздела.                | Нет. Если не указан, то автоматически сгенерируется на основании названия. |
| color         | String | Цвет. Возможные значения:`"none"` — без цвета`"blue"` — синий`"teal"` — сине-зелёный`"green"` — зелёный`"yellow"` — желтый`"orange"` — оранжевый`"red"` — красный`"pink"` — розовый`"violet"` — фиолетовый`"brown"` — коричневый | Нет. Значение по умолчанию выбирается случайным образом.     |
| reportSection | String | Раздел отчета ОПиУ, в который нужно поместить пользовательский раздел. Возможные значения:`null` — вне отчета`"direct_incomes"` — выручка`"direct_outcomes"` — прямые расходы`"indirect_incomes"` — прочие доходы`"indirect_outcomes"` — косвенные расходы`"other_outcomes"` — прочие расходы | Нет. Если не указан, то пользовательский раздел будет создан вне отчета. |

##### Пример тела запроса:

```json
[
  {
    "name": "Выручка от маркетплейсов",
    "apiName": "marketplace_revenue",
    "color": "violet",
    "reportSection": "direct_incomes"
  }
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Выручка от маркетплейсов",
      "apiName": "marketplace_revenue",
      "color": "violet",
      "reportSection": "direct_incomes"
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения   |
| -------- | ------------- | ------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса. |
| data     | Array[Object] | Список созданных разделов.      |

##### Пример неуспешного ответа:

```json
{
  "success": false,
  "message": "API names already exist",
  "errorCode": "api_names_already_exist",
  "errors": [
    {
      "api_names": [
        "marketplace_revenue"
      ]
    }
  ]
}
```

##### Параметры неуспешного ответа:

| Параметр  | Тип           | Описание / Возможные значения                         |
| --------- | ------------- | ----------------------------------------------------- |
| success   | Boolean       | Флаг успеха выполнения запроса.                       |
| message   | String        | Сообщение об ошибке.                                  |
| errorCode | String        | Код ошибки.                                           |
| errors    | Array[Object] | Список объектов с расширенной информацией об ошибках. |

### Массовое изменение разделов

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-groups/update?api_token=your_api_token

Данный метод можно использовать для массового изменения разделов.

На вход принимает массив объектов.

##### Параметры объекта:

| Параметр      | Тип    | Описание / Возможные значения                                | Обязательный |
| ------------- | ------ | ------------------------------------------------------------ | ------------ |
| id            | Number | Уникальный идентификатор статьи.                             | Да           |
| name          | String | Название пользовательского раздела.                          | Нет          |
| apiName       | String | Уникальный apiName пользовательского раздела.                | Нет          |
| color         | String | Цвет. Возможные значения:`"none"` — без цвета`"blue"` — синий`"teal"` — сине-зелёный`"green"` — зелёный`"yellow"` — желтый`"orange"` — оранжевый`"red"` — красный`"pink"` — розовый`"violet"` — фиолетовый`"brown"` — коричневый | Нет          |
| reportSection | String | Раздел отчета ОПиУ, в который нужно поместить пользовательский раздел. Возможные значения:`null` — вне отчета`"direct_incomes"` — выручка`"direct_outcomes"` — прямые расходы`"indirect_incomes"` — прочие доходы`"indirect_outcomes"` — косвенные расходы`"other_outcomes"` — прочие расходы | Нет          |

##### Пример запроса:

Пример тела запроса:

```json
[
  {
    "id": 1,
    "name": "Выручка от маркетплейсов",
    "apiName": "marketplace_revenue",
    "color": "red",
    "reportSection": "direct_incomes"
  }
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Выручка от маркетплейсов",
      "apiName": "marketplace_revenue",
      "color": "red",
      "reportSection": "direct_incomes"
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения   |
| -------- | ------------- | ------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса. |
| data     | Array[Object] | Список обновлённых разделов.    |

##### Пример неуспешного ответа:

```json
{
  "success": false,
  "message": null,
  "errorCode": "validation_error",
  "errors": [
    {
      "type": "enum",
      "loc": [
        "body",
        "data",
        0,
        "color"
      ],
      "msg": "Input should be 'none', 'blue', 'teal', 'green', 'yellow', 'orange', 'red', 'pink', 'violet' or 'brown'",
      "ctx": {
        "expected": "'none', 'blue', 'teal', 'green', 'yellow', 'orange', 'red', 'pink', 'violet' or 'brown'"
      }
    }
  ]
}
```

##### Параметры неуспешного ответа:

| Параметр  | Тип           | Описание / Возможные значения                         |
| --------- | ------------- | ----------------------------------------------------- |
| success   | Boolean       | Флаг успеха выполнения запроса.                       |
| message   | String        | Сообщение об ошибке.                                  |
| errorCode | String        | Код ошибки.                                           |
| errors    | Array[Object] | Список объектов с расширенной информацией об ошибках. |

### Массовое удаление разделов

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-groups/remove?api_token=your_api_token

Данный метод можно использовать для массового удаления разделов.

На вход принимает массив идентификаторов разделов для удаления.

##### Пример запроса:

Пример тела запроса:

```json
[
  1,
  2,
  3
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример ответа:

```json
{
  "success": true,
  "data": [
    1,
    2,
    3
  ]
}
```

##### Параметры ответа:

| Параметр | Тип           | Описание / Возможные значения              |
| -------- | ------------- | ------------------------------------------ |
| success  | Boolean       | Флаг успеха выполнения запроса.            |
| data     | Array[Number] | Список идентификаторов удалённых разделов. |

## Пользовательские показатели в отчётах

Пример объекта показателя, который является основной структурой данных для методов по пользовательским показателям:

```json
{
  "id": 1,                                        // уникальный идентификатор
  "name": "Выручка Ozon",                         // название
  "apiName": "ozon_revenue",                      // уникальный apiName
  "type": 1,                                      // тип — доход, расход или любой (определяется разделом отчета ОПиУ)
  "valueType": "monetary",                        // тип значения
  "totalAggregationType": "sum",                  // тип агрегации итогов
  "groupId": 1,                                   // уникальный идентификатор пользовательского раздела
  "reportSection": "direct_incomes"               // раздел отчета ОПиУ
  "order": 1,                                     // порядок
  "isEditable": true,                             // можно ли вносить значения вручную
  "isPersistent": true,                           // отображается ли в отчете, если не внесены значения
  "systemReportEntry": null,                      // системная статья отчета ОПиУ, которая заменяется данным показателем
  "cashflowCategories": [                         // статьи ДДС, которые заменяются данным показателем
    {
      "id": 123,                                  // идентификатор
      "name": "Поступления от Ozon"               // название
    }
  ],
  "integrations": [                               // интеграции, в которых участвует данный показатель
    {
      "id": 123,                                  // идентификатор
      "source": "google"                          // источник
    }
  ]
}
```

### Список показателей

GET

 

v2

https://api.adesk.ru/v2/custom-report-entries?api_token=your_api_token

Получение списка всех показателей.

##### Возможные параметры:

| Параметр      | Тип    | Описание / Возможные значения                                |
| ------------- | ------ | ------------------------------------------------------------ |
| name          | String | Название пользовательского показателя.                       |
| apiName       | String | Уникальный apiName пользовательского показателя.             |
| valueType     | String | Тип значения. Возможные значения:`"monetary"` — деньги`"percent"` — проценты`"numeric"` — число |
| groupId       | Number | Уникальный идентификатор пользовательского раздела.          |
| reportSection | String | Раздел отчета ОПиУ, в котором находится пользовательский раздел. Возможные значения:`"direct_incomes"` — выручка`"direct_outcomes"` — прямые расходы`"indirect_incomes"` — прочие доходы`"indirect_outcomes"` — косвенные расходы`"other_outcomes"` — прочие расходы |

##### Пример запроса:

https://api.adesk.ru/v2/custom-report-entries?api_token=your_api_token&valueType=numeric&groupId=56

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 123,
      "name": "Визиты",
      "apiName": "visits",
      "type": null,
      "valueType": "numeric",
      "totalAggregationType": "sum",
      "groupId": 56,
      "reportSection": null,
      "order": 1,
      "isEditable": true,
      "isPersistent": true,
      "systemReportEntry": null,
      "cashflowCategories": [],
      "integrations": []
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения   |
| -------- | ------------- | ------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса. |
| data     | Array[Object] | Список найденных показателей.   |

### Создание показателей

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-entries/create?api_token=your_api_token

Данный метод можно использовать для массового создания показателей.

На вход принимает массив объектов.

##### Параметры объекта:

| Параметр             | Тип           | Описание / Возможные значения                                | Обязательный                                                 |
| -------------------- | ------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| name                 | String        | Название пользовательского показателя.                       | Да                                                           |
| apiName              | String        | Уникальный apiName пользовательского показателя.             | Нет. Если не указан, то автоматически сгенерируется на основании названия. |
| valueType            | String        | Тип значения. Возможные значения:`"monetary"` — деньги`"percent"` — проценты`"numeric"` — числоЕсли показатель помещен в раздел внутри отчета ОПиУ, то доступен только тип `"monetary"` | Да                                                           |
| totalAggregationType | String        | Тип агрегации итогового значения. Возможные значения:`"none"` — без агрегации.`"sum"` — суммирование.`"avg"` — среднее. | Нет. Значение по умолчанию зависит от valueType:Деньги или число — `"sum"`Процент — `"none"` |
| groupId              | Number        | Идентификатор пользовательского раздела.                     | Да, если не указан reportSection. Нельзя указать одновременно с reportSection. |
| reportSection        | String        | Раздел отчета ОПиУ, в который нужно поместить пользовательский показатель. Возможные значения:`"direct_incomes"` — выручка`"direct_outcomes"` — прямые расходы`"indirect_incomes"` — прочие доходы`"indirect_outcomes"` — косвенные расходы`"other_outcomes"` — прочие расходы | Да, если не указан groupId. Нельзя указать одновременно с groupId. |
| order                | Number        | Порядок для сортировки в пользовательском разделе.           | Нет                                                          |
| isEditable           | Boolean       | Разрешить ли вносить значения показателя вручную в отчете ОПиУ. Возможные значения:`true` — разрешить`false` — запретить | Нет. Значение по умолчанию — `true`                          |
| isPersistent         | Boolean       | Отображать ли показатель в отчете ОПиУ, если не внесено ни одного значения показателя. Возможные значения:`true` — отображать`false` — скрывать | Нет. Значение по умолчанию — `true`                          |
| systemReportEntry    | String        | Системная статья отчета ОПиУ, которую будет заменять данный показатель. Возможные значения:`"income_tax"` — налог на прибыль`"loan_interest"` — проценты по кредитам и займамПрименимо только когда показатель помещен в раздел "Прочие расходы" | Нет                                                          |
| cashflowCategories   | Array[Number] | Массив идентификаторов статей ДДС, которые будет заменять данный показатель. | Нет                                                          |

##### Пример тела запроса:

```json
[
  {
    "name": "Выручка от маркетплейсов",
    "apiName": "marketplace_revenue",
    "valueType": "monetary",
    "reportSection": "direct_incomes",
    "isEditable": true,
    "isPersistent": true,
    "cashflowCategories": [123]
  }
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Выручка от маркетплейсов",
      "apiName": "marketplace_revenue",
      "type": 1,
      "valueType": "monetary",
      "totalAggregationType": "sum",
      "groupId": null,
      "reportSection": "direct_incomes",
      "order": 1,
      "isEditable": true,
      "isPersistent": true,
      "systemReportEntry": null,
      "cashflowCategories": [
        {
          "id": 123,
          "name": "Поступления от маркетплейсов"
        }
      ],
      "integrations": []
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения   |
| -------- | ------------- | ------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса. |
| data     | Array[Object] | Список созданных показателей.   |

##### Пример неуспешного ответа:

```json
{
  "success": false,
  "message": "API names already exist",
  "errorCode": "api_names_already_exist",
  "errors": [
    {
      "api_names": [
        "marketplace_revenue"
      ]
    }
  ]
}
```

### Массовое обновление показателей

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-entries/update?api_token=your_api_token

Данный метод можно использовать для массового обновления показателей.

На вход принимает массив объектов.

##### Параметры объекта:

| Параметр             | Тип           | Описание / Возможные значения                                | Обязательный                                      |
| -------------------- | ------------- | ------------------------------------------------------------ | ------------------------------------------------- |
| id                   | Number        | Уникальный идентификатор статьи.                             | Да                                                |
| name                 | String        | Название пользовательского показателя.                       | Нет                                               |
| apiName              | String        | Уникальный apiName пользовательского показателя.             | Нет                                               |
| valueType            | String        | Тип значения. Возможные значения:`"monetary"` — деньги`"percent"` — проценты`"numeric"` — числоЕсли показатель помещен в раздел внутри отчета ОПиУ, то доступен только тип `"monetary"` | Нет                                               |
| totalAggregationType | String        | Тип агрегации итогового значения. Возможные значения:`"none"` — без агрегации.`"sum"` — суммирование.`"avg"` — среднее. | Нет                                               |
| groupId              | Number        | Идентификатор пользовательского раздела.В раздел внутри отчета ОПиУ можно поместить показатель только с типом `"monetary"` | Нет. Нельзя указать одновременно с reportSection. |
| reportSection        | String        | Раздел отчета ОПиУ, в который нужно поместить пользовательский показатель. Возможные значения:`"direct_incomes"` — выручка`"direct_outcomes"` — прямые расходы`"indirect_incomes"` — прочие доходы`"indirect_outcomes"` — косвенные расходы`"other_outcomes"` — прочие расходыВ раздел внутри отчета ОПиУ можно поместить показатель только с типом `"monetary"` | Нет. Нельзя указать одновременно с groupId.       |
| order                | Number        | Порядок для сортировки в пользовательском разделе.           | Нет                                               |
| isEditable           | Boolean       | Разрешить ли вносить значения показателя вручную в отчете ОПиУ. Возможные значения:`true` — разрешить`false` — запретить | Нет                                               |
| isPersistent         | Boolean       | Отображать ли показатель в отчете ОПиУ, если не внесено ни одного значения показателя. Возможные значения:`true` — отображать`false` — скрывать | Нет                                               |
| systemReportEntry    | String        | Системная статья отчета ОПиУ, которую будет заменять данный показатель. Возможные значения:`"income_tax"` — налог на прибыль`"loan_interest"` — проценты по кредитам и займамПрименимо только когда показатель помещен в раздел "Прочие расходы" | Нет                                               |
| cashflowCategories   | Array[Number] | Массив идентификаторов статей ДДС, которые будет заменять данный показатель. | Нет                                               |

##### Пример запроса:

Пример тела запроса:

```json
[
  {
    "id": 1,
    "name": "Выручка от маркетплейсов",
    "apiName": "marketplace_revenue",
    "valueType": "monetary",
    "groupId": 123,
    "isEditable": true,
    "isPersistent": true,
    "cashflowCategories": [123]
  }
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Выручка от маркетплейсов",
      "apiName": "marketplace_revenue",
      "type": 1,
      "valueType": "monetary",
      "totalAggregationType": "sum",
      "groupId": 123,
      "reportSection": "direct_incomes",
      "order": 1,
      "isEditable": true,
      "isPersistent": true,
      "systemReportEntry": null,
      "cashflowCategories": [
        {
          "id": 123,
          "name": "Поступления от маркетплейсов"
        }
      ],
      "integrations": []
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения   |
| -------- | ------------- | ------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса. |
| data     | Array[Object] | Список обновлённых показателей. |

##### Пример неуспешного ответа:

```json
{
  "success": false,
  "message": "Groups do not exist",
  "errorCode": "groups_do_not_exist",
  "errors": [
    {
      "group_ids": [
        123
      ]
    }
  ]
}
```

##### Параметры неуспешного ответа:

| Параметр  | Тип           | Описание / Возможные значения                         |
| --------- | ------------- | ----------------------------------------------------- |
| success   | Boolean       | Флаг успеха выполнения запроса.                       |
| message   | String        | Сообщение об ошибке.                                  |
| errorCode | String        | Код ошибки.                                           |
| errors    | Array[Object] | Список объектов с расширенной информацией об ошибках. |

### Массовое удаление показателей

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-entries/remove?api_token=your_api_token

Данный метод можно использовать для массового удаления показателей.

На вход принимает массив идентификаторов показателей для удаления.

##### Пример запроса:

Пример тела запроса:

```json
[
  1,
  2,
  3
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример ответа:

```json
{
  "success": true,
  "data": [
    1,
    2,
    3
  ]
}
```

##### Параметры ответа:

| Параметр | Тип           | Описание / Возможные значения                 |
| -------- | ------------- | --------------------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса.               |
| data     | Array[Number] | Список идентификаторов удалённых показателей. |

## Пользовательские значения в отчётах

Пример объекта значения, который является основной структурой данных для методов по кастомным разделам:

```json
{
  "id": 1,                                        // уникальный идентификатор
  "entryId": 1                                    // уникальный идентификатор пользовательского показателя
  "date": "2024-11-01",                           // дата
  "amount": "1200",                               // значение
  "vat": "200",                                   // сумма НДС
  "vatPercent": 20,                               // процент НДС
  "currency": "RUR",                              // валюта
  "exchangeRate": 1,                              // курс валюты относительно валюты аккаунта на дату начисления
  "description": "Описание",                      // описание
  "projectId": 1,                                 // уникальный идентификатор проекта
  "businessUnitId": null,                         // уникальный идентификатор направления бизнеса
  "hasAttachments": false                         // есть ли прикрепленные файлы
}
```

### Список значений

GET

 

v2

https://api.adesk.ru/v2/custom-report-values?api_token=your_api_token

Получение списка всех значений. Список отдается постранично.

##### Возможные параметры:

| Параметр          | Тип              | Описание / Возможные значения                                |
| ----------------- | ---------------- | ------------------------------------------------------------ |
| page              | Number           | Номер запрашиваемой страницы. Нумерация начинается с 1. Значение по умолчанию — 1 |
| pageSize          | Number           | Размер запрашиваемой страницы. Значение по умолчанию — 100   |
| offset            | Number           | Количество элементов от начала списка, которые нужно пропустить. Если передан, параметр page игнорируется. Значение по умолчанию — 0 |
| entryId           | Number           | Уникальный идентификатор пользовательского показателя.       |
| entryApiName      | String           | Уникальный apiName пользовательского показателя.             |
| groupId           | Number           | Уникальный идентификатор пользовательского раздела.          |
| groupApiName      | String           | Уникальный apiName пользовательского раздела.                |
| dateFrom          | String           | Дата начала диапазона в формате YYYY-MM-DD.                  |
| dateTo            | String           | Дата конца диапазона в формате YYYY-MM-DD.                   |
| month             | String           | Дата в формате YYYY-MM или YYYY-MM-DD. Фильтрация значений происходит по месяцу переданной даты. |
| type              | String           | Тип. Возможные значения:`"income"` — доходы`"outcome"` — расходы |
| project           | String \| Number | Проект. Возможные значения:`"none"` — без проекта`"some"` — любой проектуникальный идентификатор проекта |
| businessUnit      | String \| Number | Направления бизнеса. Фильтрация значений происходит по указанному и всем вложенным направлениям. Возможные значения:`"none"` — без направления бизнеса`"some"` — любое направление бизнесауникальный идентификатор направления бизнеса |
| exactBusinessUnit | String \| Number | Направления бизнеса. Фильтрация значений происходит только по указанному направлению. Возможные значения:`"none"` — без направления бизнеса`"some"` — любое направление бизнесауникальный идентификатор направления бизнеса |

##### Пример запроса:

https://api.adesk.ru/v2/custom-report-values?api_token=your_api_token&entryId=1&month=2024-11

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "itemsCount": 1,
  "totalItemsCount": 1,
  "data": {
    "values": [
      {
        "id": 1,
        "entryId": 1,
        "date": "2024-11-01",
        "amount": "120000",
        "vat": "20000",
        "vatPercent": 20,
        "currency": "RUR",
        "exchangeRate": 1,
        "description": "Описание",
        "projectId": 1,
        "businessUnitId": null,
        "hasAttachments": false
      }
    ],
    "entries": [
      {
        "id": 1,
        "name": "Выручка от Ozon",
        "apiName": "ozon_revenue",
        "type": 1,
        "valueType": "monetary",
        "totalAggregationType": "sum",
        "groupId": 1,
        "reportSection": "direct_incomes",
        "order": 1,
        "isEditable": true,
        "isPersistent": true,
        "systemReportEntry": null,
        "cashflowCategories": [
          {
            "id": 123,
            "name": "Поступления от Ozon"
          }
        ],
        "integrations": []
      }
    ],
    "groups": [
      {
        "id": 1,
        "name": "Выручка от маркетплейсов",
        "apiName": "marketplace_revenue",
        "color": "red",
        "reportSection": "direct_incomes"
      }
    ],
    "projects": [
      {
        "id": 1,
        "name": "Мой проект"
      }
    ],
    "businessUnits": []
  }
}
```

##### Параметры успешного ответа:

| Параметр        | Тип           | Описание / Возможные значения                                |
| --------------- | ------------- | ------------------------------------------------------------ |
| success         | Boolean       | Флаг успеха выполнения запроса.                              |
| itemsCount      | Number        | Количество значений на запрошенной странице.                 |
| totalItemsCount | Number        | Общее количество значений, удовлетворяющих фильтрам.         |
| data            | Object        | Объект, включающих список значений и списки связанных с ними сущностей. |
| > values        | Array[Object] | Список объектов значений.                                    |
| > entries       | Array[Object] | Список объектов показателей, с которыми связаны значения.    |
| > groups        | Array[Object] | Список объектов разделов, с которыми связаны значения.       |
| > projects      | Array[Object] | Список объектов проектов, с которыми связаны значения.       |
| > businessUnits | Array[Object] | Список объектов направлений бизнеса, с которыми связаны значения. |

### Массовая запись значений

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-values/create?api_token=your_api_token

Данный метод можно использовать для массового создания значений, с возможностью перезаписи уже существующих.

На вход принимает массив объектов.

##### Параметры объекта:

| Параметр       | Тип    | Описание / Возможные значения                                | Обязательный                                                 |
| -------------- | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| action         | String | Тип действия: `"set"` — перезапись. Значения с датами в одном месяце перезапишут существующие значения в этом месяце.`"add"` — добавление. Значения добавятся к уже существующим. | Нет. Значение по умолчанию — `"set"`                         |
| entryId        | Number | Уникальный идентификатор пользовательского показателя.       | Обязательно должно быть передано только одно из полей: entryId или entryApiName |
| entryApiName   | String | Уникальный apiName пользовательского показателя.             | Обязательно должно быть передано только одно из полей: entryId или entryApiName |
| date           | String | Дата значения в формате YYYY-MM-DD.                          | Да                                                           |
| amount         | Number | Сумма.                                                       | Да                                                           |
| vat            | Number | Сумма НДС. Указывается только для значений показателей с типом `"monetary"` | Нет. Если передан vatPercent, то сумма будет рассчитана на основании процента. |
| vatPercent     | Number | Процент НДС. Указывается только для значений показателей с типом `"monetary"` | Нет. Если передан vat, то процент будет рассчитана на основании суммы. |
| currency       | String | Буквенный код валюты. Применим только для значений показателей с типом `"monetary"` | Нет. Значение по умолчанию — валюта аккаунта.                |
| description    | String | Описание.                                                    | Нет                                                          |
| projectId      | Number | Уникальный идентификатор проекта.                            | Нет. Нельзя указать одновременно с businessUnitId.           |
| businessUnitId | Number | Уникальный идентификатор направления бизнеса. Применим только для значений показателей в прямых расходах. | Нет. Нельзя указать одновременно с projectId.                |

##### Пример запроса:

В данном примере все существующие значения за сентябрь и октябрь будут перезаписаны переданными.

Пример тела запроса:

```json
[
  {
    "action": "set",
    "entryApiName": "visits",
    "date": "2024-09-01",
    "amount": 500
  },
  {
    "action": "set",
    "entryApiName": "visits",
    "date": "2024-10-01",
    "amount": 1500
  }
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "entryId": 123,
      "date": "2024-09-01",
      "amount": "500.00000",
      "vat": 0,
      "vatPercent": 0,
      "currency": null,
      "exchangeRate": 1,
      "description": null,
      "projectId": null,
      "businessUnitId": null,
      "hasAttachments": false
    },
    {
      "id": 2,
      "entryId": 123,
      "date": "2024-10-01",
      "amount": "1500.00000",
      "vat": 0,
      "vatPercent": 0,
      "currency": null,
      "exchangeRate": 1,
      "description": null,
      "projectId": null,
      "businessUnitId": null,
      "hasAttachments": false
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения       |
| -------- | ------------- | ----------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса.     |
| data     | Array[Object] | Список объектов созданных значений. |

##### Пример неуспешного ответа:

```json
{
  "success": false,
  "message": "Entries do not exist",
  "errorCode": "entries_do_not_exist",
  "errors": [
    {
      "api_names": [
        "visits"
      ]
    }
  ]
}
```

##### Параметры неуспешного ответа:

| Параметр  | Тип           | Описание / Возможные значения                         |
| --------- | ------------- | ----------------------------------------------------- |
| success   | Boolean       | Флаг успеха выполнения запроса.                       |
| message   | String        | Сообщение об ошибке.                                  |
| errorCode | String        | Код ошибки.                                           |
| errors    | Array[Object] | Список объектов с расширенной информацией об ошибках. |

### Массовое обновление значений

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-values/update?api_token=your_api_token

Данный метод можно использовать для массового обновления значений.

На вход принимает массив объектов.

##### Параметры объекта:

| Параметр       | Тип    | Описание / Возможные значения                                | Обязательный                                                 |
| -------------- | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| id             | Number | Уникальный идентификатор значения.                           | Да                                                           |
| entryId        | Number | Уникальный идентификатор пользовательского показателя.       | Нет                                                          |
| date           | String | Дата значения в формате YYYY-MM-DD.                          | Нет                                                          |
| amount         | Number | Сумма.                                                       | Нет                                                          |
| vat            | Number | Сумма НДС. Указывается только для значений показателей с типом `"monetary"` | Нет. Если передан vatPercent, то сумма будет рассчитана на основании процента. |
| vatPercent     | Number | Процент НДС. Указывается только для значений показателей с типом `"monetary"` | Нет. Если передан vat, то процент будет рассчитана на основании суммы. |
| currency       | String | Буквенный код валюты. Применим только для значений показателей с типом `"monetary"` | Нет                                                          |
| description    | String | Описание.                                                    | Нет                                                          |
| projectId      | Number | Уникальный идентификатор проекта.                            | Нет. Нельзя указать одновременно с businessUnitId.           |
| businessUnitId | Number | Уникальный идентификатор направления бизнеса. Применим только для значений показателей в прямых расходах. | Нет. Нельзя указать одновременно с projectId.                |

##### Пример запроса:

Пример тела запроса:

```json
[
  {
    "id": 123,
    "date": "2024-11-07",
    "amount": 2500,
    "entryId": 123
  }
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 123,
      "entryId": 123,
      "date": "2024-11-07",
      "amount": "2500",
      "vat": 0,
      "vatPercent": 0,
      "currency": null,
      "exchangeRate": 1,
      "description": null,
      "projectId": null,
      "businessUnitId": null,
      "hasAttachments": false
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения         |
| -------- | ------------- | ------------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса.       |
| data     | Array[Object] | Список объектов обновлённых значений. |

##### Пример неуспешного ответа:

```json
{
  "success": false,
  "message": "Entries do not exist",
  "errorCode": "entries_do_not_exist",
  "errors": [
    {
      "entry_ids": [
        123
      ]
    }
  ]
}
```

##### Параметры неуспешного ответа:

| Параметр  | Тип           | Описание / Возможные значения                         |
| --------- | ------------- | ----------------------------------------------------- |
| success   | Boolean       | Флаг успеха выполнения запроса.                       |
| message   | String        | Сообщение об ошибке.                                  |
| errorCode | String        | Код ошибки.                                           |
| errors    | Array[Object] | Список объектов с расширенной информацией об ошибках. |

### Массовое удаление значений

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-values/remove?api_token=your_api_token

Данный метод можно использовать для массового удаления значений.

На вход принимает массив идентификаторов значений для удаления.

##### Пример запроса:

Пример тела запроса:

```json
[
  1,
  2,
  3
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример ответа:

```json
{
  "success": true,
  "data": [
    1,
    2,
    3
  ]
}
```

##### Параметры ответа:

| Параметр | Тип           | Описание / Возможные значения              |
| -------- | ------------- | ------------------------------------------ |
| success  | Boolean       | Флаг успеха выполнения запроса.            |
| data     | Array[Number] | Список идентификаторов удалённых значений. |

## Пользовательские статьи задолженностей

Пример объекта статьи задолженностей, который является основной структурой данных для методов по пользовательским статьям задолженностей:

```json
{
  "id": 1,                                        // уникальный идентификатор
  "name": "Выручка от маркетплейсов",             // название
  "entries": [                                    // пользовательские показатели
    {
      "id": 1,                                    // уникальный идентификатор
      "name": "Выручка МП",                       // название
      "type": 1                                   // тип
    },
    {
      "id": 2,                                    // уникальный идентификатор
      "name": "Комиссия МП",                      // название
      "type": 2                                   // тип
    }
  ],
  "cashflowCategories": [                         // статьи ДДС
    {
      "id": 1,                                    // уникальный идентификатор
      "name": "Поступления от МП",                // название
      "type": 1                                   // тип
    }
  ]
}
```

### Список статей задолженностей

GET

 

v2

https://api.adesk.ru/v2/custom-report-debt-entries?api_token=your_api_token

Получение списка всех статей задолженностей.

##### Пример запроса:

https://api.adesk.ru/v2/custom-report-debt-entries?api_token=your_api_token

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Выручка от маркетплейсов",
      "entries": [
        {
          "id": 1,
          "name": "Выручка МП",
          "type": 1
        },
        {
          "id": 2,
          "name": "Комиссия МП",
          "type": 2
        }
      ],
      "cashflowCategories": [
        {
          "id": 1,
          "name": "Поступления от МП",
          "type": 1
        }
      ]
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения   |
| -------- | ------------- | ------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса. |
| data     | Array[Object] | Список статей задолженностей.   |

### Создание статей задолженностей

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-debt-entries/create?api_token=your_api_token

Данный метод можно использовать для массового создания статей задолженностей.

На вход принимает массив объектов.

##### Параметры объекта:

| Параметр           | Тип           | Описание / Возможные значения                                | Обязательный |
| ------------------ | ------------- | ------------------------------------------------------------ | ------------ |
| name               | String        | Название пользовательской статьи задолженностей.             | Да           |
| entries            | Array[Number] | Массив идентификаторов пользовательских показателей, участвующих в расчете задолженностей. | Да           |
| cashflowCategories | Array[Number] | Массив идентификаторов статей ДДС, участвующих в расчете задолженностей. | Да           |

##### Пример тела запроса:

```json
[
  {
    "name": "Выручка от маркетплейсов",
    "entries": [1, 2],
    "cashflowCategories": [1]
  }
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Выручка от маркетплейсов",
      "entries": [
        {
          "id": 1,
          "name": "Выручка МП",
          "type": 1
        },
        {
          "id": 2,
          "name": "Комиссия МП",
          "type": 2
        }
      ],
      "cashflowCategories": [
        {
          "id": 1,
          "name": "Поступления от МП",
          "type": 1
        }
      ]
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения           |
| -------- | ------------- | --------------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса.         |
| data     | Array[Object] | Список созданных статей задолженностей. |

##### Пример неуспешного ответа:

```json
{
  "success": false,
  "message": "Entries do not exist",
  "errorCode": "entries_do_not_exist",
  "errors": [
    {
      "entry_ids": [
        1
      ]
    }
  ]
}
```

### Массовое обновление статей задолженностей

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-debt-entries/update?api_token=your_api_token

Данный метод можно использовать для массового обновления статей задолженностей.

На вход принимает массив объектов.

##### Параметры объекта:

| Параметр           | Тип           | Описание / Возможные значения                                | Обязательный |
| ------------------ | ------------- | ------------------------------------------------------------ | ------------ |
| id                 | Number        | Уникальный идентификатор статьи задолженностей.              | Да           |
| name               | String        | Название пользовательской статьи задолженностей.             | Нет          |
| entries            | Array[Number] | Массив идентификаторов пользовательских показателей, участвующих в расчете задолженностей. | Нет          |
| cashflowCategories | Array[Number] | Массив идентификаторов статей ДДС, участвующих в расчете задолженностей. | Нет          |

##### Пример запроса:

Пример тела запроса:

```json
[
  {
    "id": 1,
    "name": "Выручка от маркетплейсов",
    "entries": [1, 2],
    "cashflowCategories": [1, 2]
  }
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример успешного ответа:

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Выручка от маркетплейсов",
      "entries": [
        {
          "id": 1,
          "name": "Выручка МП",
          "type": 1
        },
        {
          "id": 2,
          "name": "Комиссия МП",
          "type": 2
        }
      ],
      "cashflowCategories": [
        {
          "id": 1,
          "name": "Поступления от Ozon",
          "type": 1
        },
        {
          "id": 2,
          "name": "Поступления от Wildberries",
          "type": 1
        }
      ]
    }
  ]
}
```

##### Параметры успешного ответа:

| Параметр | Тип           | Описание / Возможные значения             |
| -------- | ------------- | ----------------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса.           |
| data     | Array[Object] | Список обновлённых статей задолженностей. |

##### Пример неуспешного ответа:

```json
{
  "success": false,
  "message": "Entries do not exist",
  "errorCode": "entries_do_not_exist",
  "errors": [
    {
      "entry_ids": [
        1
      ]
    }
  ]
}
```

##### Параметры неуспешного ответа:

| Параметр  | Тип           | Описание / Возможные значения                         |
| --------- | ------------- | ----------------------------------------------------- |
| success   | Boolean       | Флаг успеха выполнения запроса.                       |
| message   | String        | Сообщение об ошибке.                                  |
| errorCode | String        | Код ошибки.                                           |
| errors    | Array[Object] | Список объектов с расширенной информацией об ошибках. |

### Массовое удаление показателей

POST

 

v2

 

application/json

https://api.adesk.ru/v2/custom-report-debt-entries/remove?api_token=your_api_token

Данный метод можно использовать для массового удаления статей задолженностей.

На вход принимает массив идентификаторов статей задолженностей для удаления.

##### Пример запроса:

Пример тела запроса:

```json
[
  1,
  2,
  3
]
```

В ответ на запрос будет возвращена JSON строка.

##### Пример ответа:

```json
{
  "success": true,
  "data": [
    1,
    2,
    3
  ]
}
```

##### Параметры ответа:

| Параметр | Тип           | Описание / Возможные значения                           |
| -------- | ------------- | ------------------------------------------------------- |
| success  | Boolean       | Флаг успеха выполнения запроса.                         |
| data     | Array[Number] | Список идентификаторов удалённых статей задолженностей. |

## Вебхуки

Пример объекта вебхука, который является основной структурой данных для методов по вебхукам:

```json
{
    "id": 1234,                             // уникальный идентификатор
    "description": "Действия с операциями", // краткое описание
    "url": "https://example.com/webhooks",  // URL, на который будут отправляться события
    "events": [                             // список отправляемых событий
        "transaction.created",
        "transaction.updated",
        ...
    ]
}
```

### Список вебхуков

GET

 

v1

https://api.adesk.ru/v1/webhooks?api_token=your_api_token

Получение списка всех неудаленных объектов вебхуков на аккаунте.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр        | Тип           | Описание                                                     |
| --------------- | ------------- | ------------------------------------------------------------ |
| success*        | Boolean       | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| webhooks*       | Array[Object] | Массив объектов вебхуков. Может быть пустым, если на аккаунте нет неудаленных объектов вебхуков.* только при условии успеха запроса (success). |
| recordsTotal    | Number        | Количество записей, отфильтрованных для текущей страницы.    |
| recordsFiltered | Number        | Общее количество записей, доступных по указанному фильтру.   |
| message         | String        | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

### Добавление вебхука

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/webhook?api_token=your_api_token

Добавляет новый вебхук с указанными в запросе параметрами.

##### Параметры (объект Form Data):

| Параметр    | Тип / Возможные значения | Описание                                                     | Обязательный |
| ----------- | ------------------------ | ------------------------------------------------------------ | ------------ |
| url         | String                   | URL для отправки событий.                                    | Да           |
| events      | Array[String]            | Список кодов событий для отправки.transaction.created — операция созданаtransaction.updated — операция измененаtransaction.deleted — операция удаленаtransaction.confirmed — операция подтвержденаcommitment.created — обязательство созданоcommitment.deleted — обязательство удаленоcontractor.created — контрагент созданcontractor.deleted — контрагент удаленproject.created — проект созданproject.deleted — проект удаленproject.finished — проект завершенpayment-request.created — заявка на расход созданаpayment-request.approved — заявка на расход передана на оплатуpayment-request.paid — заявка на расход оплачена | Да           |
| description | String                   | Краткое описание вебхука.                                    | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| webhook* | Object  | Объект вебхука.* только при условии успеха запроса (success). |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "url": [        "Некорректный URL для уведомления."    ],    "events": [        "Обязательное поле."    ] } ` |

### Изменение вебхука

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/webhook/<webhook_id>?api_token=your_api_token

Изменяет данные вебхука по его идентификатору. Для удаления текущего значения поля вебхука, необходимо отправить параметр с пустой строкой.

##### Параметры (объект Form Data):

| Параметр    | Тип / Возможные значения | Описание                                                     | Обязательный |
| ----------- | ------------------------ | ------------------------------------------------------------ | ------------ |
| url         | String                   | URL для отправки событий.                                    | Да           |
| events      | Array[String]            | Список кодов событий для отправки.transaction.created — операция созданаtransaction.updated — операция измененаtransaction.deleted — операция удаленаtransaction.confirmed — операция подтвержденаcommitment.created — обязательство созданоcommitment.deleted — обязательство удаленоcontractor.created — контрагент созданcontractor.deleted — контрагент удаленproject.created — проект созданproject.deleted — проект удаленproject.finished — проект завершенpayment-request.created — заявка на расход созданаpayment-request.approved — заявка на расход передана на оплатуpayment-request.paid — заявка на расход оплачена | Да           |
| description | String                   | Краткое описание вебхука.                                    | Нет          |

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success* | Boolean | Флаг успеха выполнения запроса.* в зависимости от данного параметра могут присутствовать или отсутствовать некоторые нижеследующие данные. |
| webhook* | Object  | Объект вебхука.* только при условии успеха запроса (success). |
| errors   | Object  | Список ошибок, возникших при выполнении запроса, возвращается в случае неудачи запроса (success), пример:` "errors": {    "url": [        "Некорректный URL для уведомления."    ],    "events": [        "Обязательное поле."    ] } ` |

### Удаление вебхука

POST

 

v1

 

application/x-www-form-urlencoded

https://api.adesk.ru/v1/webhook/<webhook_id>/remove?api_token=your_api_token

Удаление вебхука по идентификатору.

##### Варианты ответов:

В ответ на запрос будет возвращена JSON строка, содержащая следующие данные:

| Параметр | Тип     | Описание                                                     |
| -------- | ------- | ------------------------------------------------------------ |
| success  | Boolean | Флаг успеха выполнения запроса.                              |
| message  | String  | Сообщение об ошибке, в случае отсутствия или некорректности запрашиваемых данных. |

## Вебхуки операций

События отправляются методом `POST` и ожидают ответ со статусом `200`. При получении ответа с ошибочным статусом, событие будет доставляться повторно по следующему графику:

- сразу
- через 5 секунд
- через 5 минут
- через 30 минут
- через 2 часа
- через 5 часов
- через 10 часов
- еще через 10 часов

Пример объекта операции, который является основной структурой данных для вебхуков операций:

```json
{
    "id": 1729,
    "type": 1,
    "amount": "10000.00",
    "description": "Закупка оборудования",
    "date": "2022-04-01",
    "relatedDate": "2022-04-04",
    "confirmAccrual": true,
    "isCommitment": false,
    "isPlanned": false,
    "isSplitted": false,
    "isTransfer": false,
    "bankAccount": {
        "id": 1,
        "type": 2,
        "name": "Счет 1",
        "bankCode": "",
        "bankName": "",
        "number": "11111111111111111111",
        "correspondentAccount": "",
        "currency": "RUR",
        "legalEntity": {
            "id": 1,
            "name": "ООО \"Ромашка\"",
            "fullName": "",
            "inn": "",
            "kpp": "",
            "registrationNumber": "",
            "address": "",
            "phoneNumber": ""
        }
    },
    "category": {
        "id": 17,
        "name": "Статья 1",
        "type": 1,
        "isArchived": false,
        "group": {
            "id": 2,
            "name": "Группа приходных статей",
            "type": 1
        }
    },
    "contractor": {
        "id": 42,
        "name": "Aguistin Heisman",
        "canonicalName": "aguistinheisman",
        "requisites": [
          {
            "id": 48,
            "inn": "123456789987",
            "kpp": "123456789",
            "name": "aguistinheisman"
          }
      ]
    },
    "project": {
        "id": 16,
        "name": "Тест"
    }
}
```

### Операция создана

Пример объекта события создания операции:

```json
{
    "eventTimestamp": "2022-04-12T10:02:24.703436+00:00", // дата и время события
    "eventType": "transaction.created",                   // тип события
    "eventId": "b3148c22-2625-4831-b136-0ef74b06d417",    // уникальный идентификатор события
    "data": [                                             // список объектов операций
        <объект операции>,
        ...
    ]
}
```

### Операция изменена

Пример объекта события изменения операции:

```json
{
    "eventTimestamp": "2022-04-12T10:02:24.703436+00:00", // дата и время события
    "eventType": "transaction.updated",                   // тип события
    "eventId": "b3148c22-2625-4831-b136-0ef74b06d417",    // уникальный идентификатор события
    "data": [                                             // список объектов операций
        <объект операции>,
        ...
    ]
}
```

### Операция удалена

Пример объекта события удаления операции:

```json
{
    "eventTimestamp": "2022-04-12T10:02:24.703436+00:00", // дата и время события
    "eventType": "transaction.deleted",                   // тип события
    "eventId": "b3148c22-2625-4831-b136-0ef74b06d417",    // уникальный идентификатор события
    "data": [                                             // список объектов операций
        <объект операции>,
        ...
    ]
}
```

### Плановая операция подтверждена

Пример объекта события подтверждения плановой операции:

```json
{
    "eventTimestamp": "2022-04-12T10:02:24.703436+00:00", // дата и время события
    "eventType": "transaction.confirmed",                 // тип события
    "eventId": "b3148c22-2625-4831-b136-0ef74b06d417",    // уникальный идентификатор события
    "data": [                                             // список объектов операций
        <объект операции>,
        ...
    ]
}
```

## Вебхуки обязательств

События отправляются методом `POST` и ожидают ответ со статусом `200`. При получении ответа с ошибочным статусом, событие будет доставляться повторно по следующему графику:

- сразу
- через 5 секунд
- через 5 минут
- через 30 минут
- через 2 часа
- через 5 часов
- через 10 часов
- еще через 10 часов

Пример объекта обязательства, который является основной структурой данных для вебхуков обязательств:

```json
{
    "id": 41,
    "type": 1,
    "currency": "RUR",
    "amount": "34500.00",
    "description": "Прокладка кабелей",
    "date": "2022-10-19",
    "contractor": {
        "canonicalName": "ипмастероввг",
        "id": 4,
        "name": "ИП Мастеров В.Г.",
        "requisites": [
          {
            "id": 12,
            "inn": "123456789987",
            "kpp": "123456789",
            "name": "ИП Мастеров В.Г."
          }
        ]
    },
    "project": {
        "id": 8,
        "name": "Пионер"
    },
    "transaction": {
        "id": 1234
    }
}
```

### Обязательство создано

Пример объекта события создания обязательства:

```json
{
    "eventTimestamp": "2022-10-19T11:28:44.294366+00:00", // дата и время события
    "eventType": "commitment.created",                    // тип события
    "eventId": "188c8346-b44f-4b70-b18b-4eabc347941a",    // уникальный идентификатор события
    "data": [                                             // список объектов обязательств
        <объект обязательства>,
        ...
    ]
}
```

### Обязательство удалено

Пример объекта события удаления обязательства:

```json
{
    "eventTimestamp": "2022-10-19T11:28:44.294366+00:00", // дата и время события
    "eventType": "commitment.deleted",                    // тип события
    "eventId": "188c8346-b44f-4b70-b18b-4eabc347941a",    // уникальный идентификатор события
    "data": [                                             // список объектов обязательств
        <объект обязательства>,
        ...
    ]
}
```

## Вебхуки контрагентов

События отправляются методом `POST` и ожидают ответ со статусом `200`. При получении ответа с ошибочным статусом, событие будет доставляться повторно по следующему графику:

- сразу
- через 5 секунд
- через 5 минут
- через 30 минут
- через 2 часа
- через 5 часов
- через 10 часов
- еще через 10 часов

Пример объекта контрагента, который является основной структурой данных для вебхуков контрагентов:

```json
{
    "id": 494,
    "name": "ООО «Заря»",
    "canonicalName": "ооозаря",
    "contactPerson": "Иванов И.И.",
    "email": "zarya@example.com",
    "phoneNumber": "+75551234567",
    "description": "Поставка расходных материалов",
    "category": {
        "id": 2,
        "name": "Подрядчики"
    },
    "requisites": []
}
```

### Контрагент создан

Пример объекта события создания контрагента:

```json
{
    "eventTimestamp": "2022-10-19T11:58:16.819707+00:00", // дата и время события
    "eventType": "contractor.created",                    // тип события
    "eventId": "b1b079de-055c-41f0-b6f8-037bf9f02592",    // уникальный идентификатор события
    "data": [                                             // список объектов контрагентов
        <объект контрагента>,
        ...
    ]
}
```

### Контрагент удален

Пример объекта события удаления контрагента:

```json
{
    "eventTimestamp": "2022-10-19T11:58:16.819707+00:00", // дата и время события
    "eventType": "contractor.deleted",                    // тип события
    "eventId": "b1b079de-055c-41f0-b6f8-037bf9f02592",    // уникальный идентификатор события
    "data": [                                             // список объектов контрагентов
        <объект контрагента>,
        ...
    ]
}
```

## Вебхуки проектов

События отправляются методом `POST` и ожидают ответ со статусом `200`. При получении ответа с ошибочным статусом, событие будет доставляться повторно по следующему графику:

- сразу
- через 5 секунд
- через 5 минут
- через 30 минут
- через 2 часа
- через 5 часов
- через 10 часов
- еще через 10 часов

Пример объекта проекта, который является основной структурой данных для вебхуков проектов:

```json
{
    "id": 15,
    "name": "Каслинская, 12б",
    "description": "Ремонт офиса на Каслинской, 12б",
    "category": {
        "id": 22,
        "name": "Ремонт офисов"
    }
}
```

### Проект создан

Пример объекта события создания проекта:

```json
{
    "eventTimestamp": "2022-10-19T12:05:10.374246+00:00", // дата и время события
    "eventType": "project.created",                       // тип события
    "eventId": "9a6e7412-9229-421e-93e2-512e8d116add",    // уникальный идентификатор события
    "data": [                                             // список объектов проектов
        <объект проекта>,
        ...
    ]
}
```

### Проект удален

Пример объекта события удаления проекта:

```json
{
    "eventTimestamp": "2022-10-19T12:05:10.374246+00:00", // дата и время события
    "eventType": "project.deleted",                       // тип события
    "eventId": "9a6e7412-9229-421e-93e2-512e8d116add",    // уникальный идентификатор события
    "data": [                                             // список объектов проектов
        <объект проекта>,
        ...
    ]
}
```

### Проект завершен

Пример объекта события завершения проекта:

```json
{
    "eventTimestamp": "2022-10-19T12:05:10.374246+00:00", // дата и время события
    "eventType": "project.finished",                      // тип события
    "eventId": "9a6e7412-9229-421e-93e2-512e8d116add",    // уникальный идентификатор события
    "data": [                                             // список объектов проектов
        <объект проекта>,
        ...
    ]
}
```

## Вебхуки согласования платежей

События отправляются методом `POST` и ожидают ответ со статусом `200`. При получении ответа с ошибочным статусом, событие будет доставляться повторно по следующему графику:

- сразу
- через 5 секунд
- через 5 минут
- через 30 минут
- через 2 часа
- через 5 часов
- через 10 часов
- еще через 10 часов

Пример объекта заявки на расход, который является основной структурой данных для вебхуков согласования платежей:

```json
{
  "id": 1729,
  "amount": "10000.00",
  "currency": "RUR",
  "description": "Закупка оборудования",
  "status": "approved",
  "approvedEvent": {
    "actor": {
      "email": "arseniy@ip.ru",
      "name": "Арсений Игнатьев"
    },
    "comment": "Можем оплатить до 31.10.2023"
  },
  "category": {
    "id": 17,
    "name": "Статья 1",
    "type": 2,
    "isArchived": false,
    "group": {
        "id": 2,
        "name": "Группа расходных статей",
        "type": 2
    }
  },
  "contractor": {
    "id": 42,
    "name": "Поставщик",
    "canonicalName": "поставщик",
    "requisites": [
      {
        "id": 48,
        "inn": "123456789987",
        "kpp": "123456789",
        "name": "ООО Поставщик"
      }
    ]
  },
  "currentResponsibleUsers": [
    {
      "email": "andrey@ip.ru",
      "name": "Андрей Петров"
    }
  ],
  "initiator": {
    "email": "sergey@ip.ru",
    "name": "Сергей Сергеев"
  },
  "paymentDate": "2023-10-31",
  "plannedTransaction": {
    "bankAccount": {
    "id": 1,
    "type": 2,
    "name": "Счет 1",
    "bankCode": "",
    "bankName": "",
    "number": "11111111111111111111",
    "correspondentAccount": "",
    "currency": "RUR",
    "legalEntity": {
        "id": 1,
        "name": "ООО \"Ромашка\"",
        "fullName": "",
        "inn": "",
        "kpp": "",
        "registrationNumber": "",
        "address": "",
        "phoneNumber": ""
      }
    },
    "date": "2023-10-31",
    "transaction": {
      "id": 385
    }
  },
  "project": {
      "id": 16,
      "name": "Тест"
  }
}
```

### Заявка на расход создана

Пример объекта события создания заявки на расход:

```json
{
    "eventTimestamp": "2023-10-15T12:05:10.374246+00:00", // дата и время события
    "eventType": "payment-request.created",               // тип события
    "eventId": "9a6e7412-9229-421e-93e2-512e8d116add",    // уникальный идентификатор события
    "data": [                                             // список объектов заявок на расход
        <объект заявки на расход>,
        ...
    ]
}
```

### Заявка на расход передана на оплату

Пример объекта события передачи заявки на расход в оплату:

```json
{
    "eventTimestamp": "2023-10-15T12:05:10.374246+00:00", // дата и время события
    "eventType": "payment-request.approved",              // тип события
    "eventId": "9a6e7412-9229-421e-93e2-512e8d116add",    // уникальный идентификатор события
    "data": [                                             // список объектов заявок на расход
        <объект заявки на расход>,
        ...
    ]
}
```

### Заявка на расход оплачена

Пример объекта события подтверждения оплаты по заявке:

```json
{
    "eventTimestamp": "2023-10-15T12:05:10.374246+00:00", // дата и время события
    "eventType": "payment-request.paid",                  // тип события
    "eventId": "9a6e7412-9229-421e-93e2-512e8d116add",    // уникальный идентификатор события
    "data": [                                             // список объектов заявок на расход
        <объект заявки на расход>,
        ...
    ]
}
```