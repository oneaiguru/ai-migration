# Planning Magic Prompt — Line-Indexed Summary
Source: archive/deepresearch/2025-10-18/deep_research_2025-10-18_I_plan_using_magic_prompt.md

## Navigation Index
- L1: File header
- L3: Planning magic prompt mandate
- L9: Rule 1 — Base on research findings
- L18: Rule 2 — Specify exact files
- L27: Rule 3 — Provide line-by-line changes
- L36: Rule 4 — Use simplest approach
- L45: Rule 5 — Keep context under 40%
- L56: Mandatory plan structure template
- L105: Critical rules recap

## Highlights
- L9–55: Five guardrails enforce research citations, explicit file lists, concrete diffs, simplicity, and tight context budgets.
- L56–104: Plans must follow a fixed template (desired end state, discoveries, non-goals, phased implementation with per-file change lists and snippets).
- L105–118: Critical rules prohibit starting without research, mandate reuse of existing patterns, and prioritize templates/config over novel code.

## Next Actions
- Embed this template in the planning SOP so every plan generated by agents starts from these sections and cites `file:L` references.
- Add Behave/pytest checks (or lint rules) that reject plans lacking the mandated headings or exceeding context guidelines.
- Reference this summary in `docs/System/context-engineering.md` and agent onboarding so planners load it before designing work.
