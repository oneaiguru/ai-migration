# Конфигурация дашборда мониторинга

## Обзор

Здесь описано, как настроить мониторинг Sherlock AI с помощью Prometheus и Grafana, уделяя особое внимание прогрессу историй и вовлечённости пользователей.

## Настройка Prometheus

### Основная конфигурация

* Период опроса: 15 секунд
* Интервал оценки: 15 секунд

### Точки метрик

* API: [http://localhost:8000/metrics](http://localhost:8000/metrics)
* Bot: [http://localhost:8001/metrics](http://localhost:8001/metrics)
* DB: [http://localhost:9187/metrics](http://localhost:9187/metrics)
* Redis: [http://localhost:9121/metrics](http://localhost:9121/metrics)
* LB: [http://localhost:8080/metrics](http://localhost:8080/metrics)
* CDN: [http://localhost:9100/metrics](http://localhost:9100/metrics)
* Story Engine: [http://localhost:8002/metrics](http://localhost:8002/metrics)

## Grafana Dashboard

### Источники данных

* Prometheus
* Метрики прогресса историй
* Мониторинг вовлечённости

### Панели

#### Здоровье системы

* Показатели производительности
* Ошибки
* Использование ресурсов

#### Метрики историй

* Прогресс в расследованиях
* Активность пользователей
* Время ответа
* Быстродействие мультимедиа

#### Бизнес-показатели

* Статус подписки
* Успешность платежей
* Удержание пользователей
* Процент завершённых дел

### Оповещения

* Настройка правил для проблем
* Пороговые значения для сюжетных метрик
* Контроль платежей

## Рекомендации

### Управление дашбордами

* Регулярно проверять панели
* Актуализировать пороги
* Следить за паттернами прогресса
* Отслеживать вовлечённость

### Сбор метрик

* Основные показатели
* Прогресс историй
* Вовлечённость
* Качество ИИ-ответов