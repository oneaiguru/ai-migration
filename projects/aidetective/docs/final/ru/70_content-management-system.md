# Система управления контентом (CMS)

## 1. Обзор

CMS отвечает за хранение, организацию и доставку детективных историй для Sherlock AI. Обеспечивает:

* Эффективную структуру историй
* Поддержку ветвящихся нарративов
* Контроль версий и обновления
* Интеграцию мультимедиа

* * *

## 2. Структура и хранение историй

### 2.1 Формат

Каждая история хранится в виде **JSON** или в базе, с ветвлением и сценариями:

```json
{
  "story_id": "library_shadows",
  "title": "Тайна библиотечных теней",
  "intro": "Вы прибываете в старинную библиотеку...",
  "chapters": [
    {
      "chapter_id": "c1",
      "text": "На полу разбросаны книги...",
      "choices": [
        {
          "text": "Осмотреть тело",
          "next": "c2",
          "conditions": [],
          "results": [
            {"effect": "add_clue", "clue_id": "corpse_analysis"}
          ]
        },
        {
          "text": "Проверить книжные полки",
          "next": "c3",
          "conditions": [],
          "results": []
        }
      ]
    }
  ],
  "endings": [
    {
      "ending_id": "good",
      "condition": "solved_case",
      "text": "Вы правильно вычислили убийцу!"
    },
    {
      "ending_id": "bad",
      "condition": "wrong_accusation",
      "text": "Вы обвинили невиновного!"
    }
  ]
}
```