# План реализации системы автоматизации переписывания описаний товаров



## Архитектура

```mermaid
flowchart TD
    A[Битрикс\nСайт] -->|Выгрузка через\nREST API| B[Модуль\nэкспорта]
    B -->|CSV/JSON| C[Обработчик\nданных]
    C -->|Подготовленные\nзаписи| D[AI Генератор\nFrontend Module]
    D -->|API запросы| E[Claude API]
    E -->|Сгенерированные\nтексты| F[Модуль проверки\nуникальности]
    F -->|Уникальность\n>70%| G[Модуль\nимпорта]
    F -->|Уникальность\n<70%| H[Обработка\nисключений]
    H -->|Повторная\nгенерация| D
    H -->|Для ручной\nобработки| J[Админ-панель]
    G -->|REST API| A
    J --> K[Аналитика и\nстатистика]
    
    style A fill:#f96,stroke:#333,stroke-width:2px
    style E fill:#6af,stroke:#333,stroke-width:2px
    style F fill:#9f6,stroke:#333,stroke-width:2px
    style J fill:#f9f,stroke:#333,stroke-width:2px
```



## 1. Модуль экспорта данных из Битрикс

### Функциональность:

- Извлечение товаров через REST API Битрикс
- Фильтрация товаров по заданным критериям
- Сохранение данных в промежуточный формат (CSV/JSON)
- Логирование процесса экспорта

### Технологии:

- PHP 8.x
- Bitrix REST API
- CSV/JSON библиотеки для PHP

### Готовность: 75%

- ✅ Базовая структура модуля
- ✅ Аутентификация в REST API
- ✅ Извлечение данных по API
- ⏳ Оптимизация пакетной обработки
- ⏳ Обработка ошибок и повторных попыток

## 2. Модуль обработки данных

### Функциональность:

- Парсинг и предварительная обработка текстов
- Выделение ключевых характеристик товаров
- Подготовка данных для AI-модели
- Разделение на обрабатываемые блоки

### Технологии:

- PHP 8.x
- Регулярные выражения
- Библиотеки NLP для PHP (php-nlp-tools)

### Готовность: 60%

- ✅ Структура обработчика
- ✅ Базовые функции парсинга
- ⏳ Алгоритмы выделения ключевых характеристик
- ⏳ Оптимизация для различных типов товаров

## 3. Модуль AI-генерации

### Функциональность:

- Интеграция с Claude API
- Управление запросами и контекстом
- Формирование эффективных промптов
- Обработка результатов генерации

### Технологии:

- PHP 8.x / JavaScript
- Claude API (Anthropic)
- Асинхронные запросы

### Готовность: 80%

- ✅ Базовая интеграция с API
- ✅ Формирование промптов с учетом контекста
- ✅ Обработка ответов API
- ⏳ Оптимизация промптов для качества текста
- ⏳ Система регулировки температуры и параметров

## 4. Модуль проверки уникальности

### Функциональность:

- Анализ сгенерированного текста
- Проверка уникальности (не менее 70%)
- Выявление дублирующихся фрагментов
- Оценка качества текстов

### Технологии:

- PHP 8.x
- API сервисов проверки уникальности
- Алгоритмы сравнения текстов

### Готовность: 55%

- ✅ Базовый алгоритм проверки
- ✅ Интеграция с API уникальности
- ⏳ Оптимизация обработки исключений
- ⏳ Настройка пороговых значений

## 5. Модуль импорта обратно в Битрикс

### Функциональность:

- Подготовка обновленных данных
- Импорт через REST API Битрикс
- Верификация успешности импорта
- Отчетность по обновлению

### Технологии:

- PHP 8.x
- Bitrix REST API
- Транзакционная обработка

### Готовность: 65%

- ✅ Базовая структура импорта
- ✅ Аутентификация API
- ✅ Обновление отдельных записей
- ⏳ Пакетная обработка
- ⏳ Обработка конфликтов и повторных попыток

## 6. Админ-панель и аналитика

### Функциональность:

- Интерфейс управления процессом
- Мониторинг прогресса обработки
- Статистика и аналитика
- Ручная корректировка текстов

### Технологии:

- HTML/CSS/JavaScript (Bootstrap 5)
- PHP 8.x
- Графики и визуализация (Chart.js)

### Готовность: 40%

- ✅ Базовый UI для управления
- ✅ Отображение статуса обработки
- ⏳ Полнофункциональная статистика
- ⏳ Интерфейс для ручного редактирования
- ⏳ Экспорт отчетов

## 7. Тестирование и документация

### Функциональность:

- Unit и интеграционные тесты
- Пользовательская документация
- Техническая документация
- Инструкции по установке и настройке

### Технологии:

- PHPUnit
- Markdown/PDF

### Готовность: 30%

- ✅ Базовая структура тестов
- ⏳ Комплексные тесты модулей
- ⏳ Пользовательская документация
- ⏳ Установочные инструкции

## Общий прогресс: ~65%

## Следующие шаги:

1. Завершить интеграцию модулей в единую систему
2. Провести первый полный цикл обработки
3. Оптимизировать на основе результатов тестов
4. Подготовить финальную версию пользовательской документации