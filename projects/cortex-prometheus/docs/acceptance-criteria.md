# Критерии приемки проекта

## 1. Критерии успешного внедрения

Проект по настройке Prometheus с Cortex считается успешно завершенным при выполнении всех перечисленных ниже критериев.

### 1.1. Сбор метрик

| № | Критерий | Метод проверки | Ожидаемый результат |
|---|----------|----------------|---------------------|
| 1.1.1 | Установка и настройка Prometheus | Проверка доступности UI Prometheus | Prometheus доступен по URL, страница статуса показывает "UP" |
| 1.1.2 | Установка Node Exporter на целевые хосты | Проверка статуса через systemctl | Node Exporter запущен и активен на всех хостах |
| 1.1.3 | Обнаружение всех целевых хостов | Проверка страницы Targets в Prometheus | Все хосты отображаются со статусом "UP" |
| 1.1.4 | Сбор базовых метрик (CPU, RAM, диск, сеть) | Запрос метрик через API Prometheus | Метрики доступны для всех хостов |

### 1.2. Cortex и долгосрочное хранение

| № | Критерий | Метод проверки | Ожидаемый результат |
|---|----------|----------------|---------------------|
| 1.2.1 | Установка и настройка компонентов Cortex | Проверка статуса контейнеров/подов | Все компоненты Cortex запущены и работают |
| 1.2.2 | Настройка интеграции Prometheus с Cortex | Проверка записи метрик в Cortex | Метрики успешно передаются через remote_write |
| 1.2.3 | Настройка долгосрочного хранения | Проверка наличия данных в MinIO | Бакет cortex-blocks содержит блоки данных |
| 1.2.4 | Функционирование Compactor | Проверка логов Compactor | Логи показывают успешное сжатие блоков |

### 1.3. Высокая доступность и масштабируемость

| № | Критерий | Метод проверки | Ожидаемый результат |
|---|----------|----------------|---------------------|
| 1.3.1 | Настройка распределенных компонентов | Проверка репликации компонентов | Несколько экземпляров критичных компонентов работают параллельно |
| 1.3.2 | Работа при отказе компонента | Тест с остановкой одного из компонентов | Система продолжает работу без потери данных |
| 1.3.3 | Масштабирование системы | Увеличение количества реплик компонентов | Система корректно масштабируется без ошибок |
| 1.3.4 | Отказоустойчивость хранилища | Проверка репликации данных | Данные доступны даже при отказе одного из экземпляров хранилища |

### 1.4. Визуализация и алертинг

| № | Критерий | Метод проверки | Ожидаемый результат |
|---|----------|----------------|---------------------|
| 1.4.1 | Установка и настройка Grafana | Проверка доступности UI Grafana | Grafana доступна по URL, авторизация работает |
| 1.4.2 | Настройка источников данных | Проверка в интерфейсе Grafana | Источники данных Prometheus и Cortex настроены и работают |
| 1.4.3 | Наличие базовых дашбордов | Проверка в интерфейсе Grafana | Дашборды для мониторинга хостов и системы загружены |
| 1.4.4 | Настройка AlertManager | Проверка доступности AlertManager | AlertManager доступен по URL |
| 1.4.5 | Настройка правил алертинга | Проверка в Prometheus/Cortex | Правила алертинга загружены и активны |
| 1.4.6 | Отправка уведомлений | Тест срабатывания алерта | Уведомления успешно отправляются по настроенным каналам |

### 1.5. Управление и документация

| № | Критерий | Метод проверки | Ожидаемый результат |
|---|----------|----------------|---------------------|
| 1.5.1 | Документация по архитектуре | Проверка документации | Документация детально описывает архитектуру решения |
| 1.5.2 | Инструкции по эксплуатации | Проверка документации | Документация содержит все необходимые инструкции |
| 1.5.3 | Скрипты для управления системой | Тестирование скриптов | Скрипты корректно выполняют заявленные функции |
| 1.5.4 | Процедура добавления новых хостов | Тест добавления хоста | Новый хост успешно добавляется в мониторинг |
| 1.5.5 | Процедуры резервного копирования | Тест резервного копирования | Резервные копии создаются и восстанавливаются |

## 2. Процедура приемки

### 2.1. Этапы приемки

1. **Предварительная проверка**:
   - Заказчик предоставляет инфраструктуру согласно требованиям
   - Исполнитель устанавливает и настраивает все компоненты системы
   - Исполнитель выполняет самопроверку с использованием критериев приемки

2. **Демонстрация системы**:
   - Исполнитель демонстрирует работу системы заказчику
   - Производится проверка каждого пункта критериев приемки
   - Составляется протокол демонстрации с отметкой о соответствии критериям

3. **Тестовая эксплуатация**:
   - Заказчик использует систему в течение 5 рабочих дней
   - Заказчик проверяет работоспособность системы в реальных условиях
   - Выявленные недостатки фиксируются в протоколе тестовой эксплуатации

4. **Финальная приемка**:
   - Исполнитель устраняет выявленные недостатки (если таковые имеются)
   - Проводится финальная проверка всех критериев приемки
   - Подписывается акт приема-передачи работ

### 2.2. Форма протокола приемки

```
ПРОТОКОЛ ПРИЕМКИ СИСТЕМЫ МОНИТОРИНГА PROMETHEUS С CORTEX

Дата проведения: ____________

Представители заказчика:
1. _______________________ (ФИО, должность)
2. _______________________ (ФИО, должность)

Представители исполнителя:
1. _______________________ (ФИО, должность)
2. _______________________ (ФИО, должность)

Результаты проверки критериев приемки:

1. Сбор метрик:
   [ ] Соответствует
   [ ] Не соответствует
   Комментарии: _______________________

2. Cortex и долгосрочное хранение:
   [ ] Соответствует
   [ ] Не соответствует
   Комментарии: _______________________

3. Высокая доступность и масштабируемость:
   [ ] Соответствует
   [ ] Не соответствует
   Комментарии: _______________________

4. Визуализация и алертинг:
   [ ] Соответствует
   [ ] Не соответствует
   Комментарии: _______________________

5. Управление и документация:
   [ ] Соответствует
   [ ] Не соответствует
   Комментарии: _______________________

Общее заключение:
[ ] Система соответствует всем критериям приемки
[ ] Система требует доработки (список замечаний прилагается)

Подписи:
От заказчика: _______________________
От исполнителя: _______________________
```

## 3. Ключевые метрики успешности проекта

### 3.1. Технические метрики

| Метрика | Целевое значение | Метод измерения |
|---------|-----------------|-----------------|
| Доступность системы мониторинга | ≥ 99.9% | Мониторинг uptime за период эксплуатации |
| Время отклика на запросы | ≤ 5 секунд для 99% запросов | Мониторинг latency в Grafana |
| Полнота сбора метрик | 100% хостов | Проверка метрики up для всех хостов |
| Время хранения исторических данных | ≥ 30 дней | Проверка доступности исторических данных |
| Количество ложных срабатываний алертов | ≤ 5% от общего числа | Анализ журнала алертов |

### 3.2. Бизнес-метрики

| Метрика | Целевое значение | Метод измерения |
|---------|-----------------|-----------------|
| Время обнаружения инцидентов | Уменьшение на ≥ 50% | Сравнение с прежним решением |
| Время реакции на инциденты | Уменьшение на ≥ 30% | Сравнение с прежним решением |
| Нагрузка на администраторов | Уменьшение на ≥ 20% | Опрос администраторов |
| Удовлетворенность пользователей | ≥ 8/10 по шкале удовлетворенности | Опрос пользователей системы |
