**Задача**: для каждой контейнерной группы, у которой есть история вывоза за 2 года и более, спрогнозировать ее объемы на любой день в ближайшие 3-4 месяца. Функционал опциональный и платный, включается в системных настройках.

**Методика**: либо аналитические методы, либо нейросеть, смотря кто будет точнее на предварительных тестах. Если однозначного лидера не окажется, встраиваем в систему оба варианта и даем пользователю выбрать самому. Нейросеть реализует Максим @lav_max, матметоды студенты Дальневосточного федерального университета.

**Месячный отчет** можно построить на будущие даты. В качестве объема считается сумма всех прогнозных значений КП выбранного участка, а вес - этот объем, умноженный на коэфф. перевода. Коэфф. берется для данного участка за прошлый месяц.

**Отчет по объемам** можно построить на будущие даты. В этом случае в каждый день в будущем для КП ставится ее прогнозный объем на этот день. Будущие даты выделяются цветом в заголовке. "Итого" выделяется, если в таблице есть будущие даты (т.к. они учитываются в общей сумме). "Итого подбор" не выделяется т.к. считается только по факту за прошлые даты.

![image](/uploads/3e98db78a8ea041d9a910b086c47b008/image.png)

**Прогноз загрузки ТС**: в редакторе маршрутов в прогноз к вариантам "по номинальному объему" и "с учетом заполненности КП" добавить вариант "по прогнозному объему".  При его выборе прогноз объема маршрута будет суммировать прогнозные объемы его контейнерных групп.

![image](/uploads/9fe5b8d44624c5c3a77b6426785bed83/image.png)

**Реестр КП**: в меню "История КП" добавляется пункт "История и прогноз объемов" -

![image](/uploads/de7cf675156cbc293fae78879afda5e8/image.png)

Он открывает диалог, в котором показывается график объемов вывоза с КП в прошлом и прогноз на будущее.

![image](/uploads/c4cbf4a34b3adde7529262948a99692a/image.png)

Один столбец показывает объем за один день, одну неделю или один месяц, в зависимости от выбранного фильтра. 

Синими столбцами показывается объем накопления за день, он вычисляется как объем вывоза за день, деленный на число дней, прошедших с прошлого вывоза. Дни вывоза обозначены круглыми индикаторами, их ось Y - вывезенный объем за день. Если в фильтре выбрана неделя или месяц, дневные данные суммируются и показывается сумма за неделю или месяц.

Зеленые столбцы - прогноз накопления. При наведении мышкой на столбец или индикатор показывается тултип с его значением.

**Дашбоард** - в планируемом в ближайшем будущем дашбоарде прогнозные значения также будут суммироваться по выбранному интервалу если , аналогично месячному отчету, и показываться в виде графика:

![image](/uploads/8c511e47343e9dded094088b5c4df5c2/image.png)