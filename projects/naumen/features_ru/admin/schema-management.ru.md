# features/admin/schema-management.feature

Функционал: Управление схемами расписания
  Как менеджер по персоналу
  Я хочу создавать и редактировать схемы расписаний
  Чтобы задавать повторяющиеся шаблоны смен

  Предыстория:
    Дано я вошёл в систему
    И нахожусь в разделе "Расписание"
    И открыта страница "Схемы"
    И выбран контакт-центр "Контакт-центр 1010"

  Сценарий: Просмотр шаблонов смен в конструкторе схем
    Когда я загружаю страницу схем
    Тогда я вижу список доступных шаблонов смен:
      | Shift Template | Time Pattern |
      | Смена 1 | 05/11 |
      | Смена 10 | 10/17 |
      | Смена 15 | 11:30/20:30 |
      | Смена 23 | 15/00 |
    И шаблоны отображаются в виртуальном списке
    И видны варианты ротации "1 ротация", "2 ротация", "4 ротация"

  Сценарий: Поиск нужного шаблона смены
    Дано доступно множество шаблонов смен
    Когда я ввожу "Смена 15" в поле "Поиск по схемам"
    Тогда отображаются только шаблоны, соответствующие "Смена 15"
    И результаты фильтруются в реальном времени

  Сценарий: Просмотр легенды типов дней
    Когда я смотрю интерфейс схемы
    Тогда я вижу обозначения типов дней:
      | Тип | Цвет | Ярлык |
      | Рабочий день | Синий круг | Рабочий |
      | Выходной | Красный круг | Выходной |
      | Нетипичный день | Оранжевый круг | Нетипичный |
      | "Плавающий" выходной | Фиолетовый круг | "Плавающий" выходной |

  Сценарий: Создание новой схемы расписания
    Когда я нажимаю кнопку "Добавить схему"
    Тогда открывается интерфейс создания схемы
    И я могу выбрать шаблоны смен для разных дней
    И задать ротацию и типы дней

  Сценарий: Настройка параметров схемы
    Когда я нажимаю кнопку "Настройки схем"
    Тогда отображаются опции конфигурации
    И я могу задать параметры по умолчанию

  Сценарий: Управление нетипичными днями
    Когда я нажимаю кнопку "Нетипичные дни"
    Тогда открывается управление нетипичными днями
    И я могу задавать специальные шаблоны

  Сценарий: Построение схемы с ротацией
    Дано я создаю новую схему
    Когда выбираю "Смена 10 (10/17)" для рабочих дней
    И задаю ротацию "2 ротация"
    И определяю шаблон рабочих и выходных дней
    Тогда отображается предварительный просмотр цикла

  Сценарий: Многосменная схема
    Дано я создаю новую схему
    Когда назначаю "Смена 1 (05/11)" для части позиций
    И "Смена 15 (11:30/20:30)" для остальных
    И настраиваю выходные дни
    Тогда схема чередует разные типы смен
    И сохраняет заданный паттерн

  Сценарий: Настройка рабочих и выходных дней
    Дано я редактирую схему
    Когда помечаю некоторые позиции как "Рабочий"
    И другие как "Выходной"
    И часть как "Нетипичный"
    Тогда схема отображает разные типы дней с цветовой маркировкой

  Сценарий: Плавающий выходной
    Дано я создаю схему с гибким расписанием
    Когда настраиваю "Плавающий выходной" и параметры плавающих дней
    Тогда схема учитывает переменные выходные

  Сценарий: Просмотр цикла ротации
    Дано я настроил схему с несколькими ротациями
    Когда завершаю настройку схемы
    Тогда отображается визуальный предварительный просмотр полного цикла

  Сценарий: Применение настроек шаблона смены
    Дано я выбрал определённые шаблоны смен
    Когда я включаю их в схему
    Тогда схема наследует время и активности смен
    И сохраняет параметры шаблонов

  Сценарий: Сохранить и активировать схему
    Дано схема полностью настроена
    Когда я сохраняю конфигурацию
    Тогда схема доступна для генерации расписаний
    И я могу применить её к группам сотрудников

  @performance
  Сценарий: Работа с большим количеством шаблонов смен
    Дано доступно более 40 шаблонов
    Когда я прокручиваю список шаблонов
    Тогда виртуальный список загружается эффективно
    И выбор шаблонов остаётся отзывчивым
