# features/admin/shift-management.feature

Функционал: Управление шаблонами смен
  Как менеджер по персоналу
  Я хочу создавать и редактировать шаблоны смен
  Чтобы эффективно назначать стандартизированные расписания

  Предыстория:
    Дано я вошёл в систему
    И нахожусь в разделе "Расписание"
    И открыта страница "Смены"
    И у меня есть доступ к контакт-центру "Контакт-центр 1010"

  Сценарий: Просмотр существующих шаблонов смен
    Когда я загружаю страницу смен
    Тогда я вижу список шаблонов:
      | Shift Name | Time Range |
      | Смена 1 | 05/11 |
      | Смена 10 | 10/17 |
      | Смена 15 | 11:30/20:30 |
      | Смена 23 | 15/00 |
    И каждый шаблон отображается в виртуальном списке
    И время смены указано в формате шаблона

  Сценарий: Поиск конкретной смены
    Дано в системе есть множество шаблонов смен
    Когда я ввожу "Смена 10" в поле "Поиск по сменам"
    Тогда отображаются только шаблоны, соответствующие "Смена 10"
    И результаты фильтруются в реальном времени

  Сценарий: Создание нового шаблона
    Когда я нажимаю кнопку "+"
    Тогда появляется форма новой смены
    И я могу ввести название смены
    И вижу визуальный редактор расписания
    И вижу настройки времени

  Сценарий: Настройка временных параметров смены
    Дано я создаю или редактирую смену
    Когда я задаю начало интервала "00:00" и шаг "60" минут
    И выбираю период "24 часа"
    Тогда временная шкала обновляется
    И сетка часов отображает 01:00-23:00

  Сценарий: Добавление активностей
    Дано я редактирую шаблон смены
    Когда я создаю активность с 10:00 до 11:00
    Тогда появляется блок "В работе" зелёного цвета
    Когда я добавляю перерыв с 11:00 до 11:20
    Тогда появляется блок "Перерыв" коричневого цвета

  Сценарий: Изменение названия смены
    Дано выбрана смена "Смена 10 (10/17)"
    Когда я изменяю название и сохраняю
    Тогда смена обновляется с новым именем
    И появляется подтверждение сохранения

  Сценарий: Сохранение шаблона смены
    Дано шаблон настроен с активностями
    Когда я нажимаю кнопку сохранения
    Тогда шаблон сохраняется в системе
    И отображается в списке смен
    И я могу назначать его в расписании

  Сценарий: Удаление шаблона смены
    Дано выбран шаблон смены
    Когда я нажимаю кнопку удаления
    Тогда появляется диалог подтверждения
    Когда я подтверждаю удаление
    Тогда шаблон удаляется из системы
    Когда я нажимаю "Отмена", шаблон остаётся

  Сценарий: Копирование шаблона смены
    Дано выбран существующий шаблон
    Когда я нажимаю кнопку копирования
    Тогда создаётся дубликат шаблона
    И я могу изменять копию независимо

  Сценарий: Переместить шаблон в другую группу
    Дано выбран шаблон смены
    Когда я нажимаю кнопку перемещения
    Тогда я могу перенести шаблон в другой отдел
    И шаблон доступен в целевой группе

  Сценарий: Фильтрация смен по оргструктуре
    Дано я нахожусь на странице управления сменами
    Когда я открываю выпадающий список "Точка оргструктуры"
    И выбираю "Контакт-центр 1010"
    Тогда список смен отображает только шаблоны для выбранного центра

  Сценарий: Визуальный редактор смены
    Дано я редактирую смену через визуальный редактор
    Когда я создаю или перемещаю блок активности
    Тогда я могу изменять его размер
    И при правом клике вижу контекстное меню

  Сценарий: Работа с периодом 48 часов
    Дано я создаю шаблон смены
    Когда выбираю период "48 часов"
    Тогда временная шкала расширяется до 48 часов
    И я могу создавать активности на несколько дней

  Сценарий: Генерация вариантов смены
    Дано заданы базовые параметры смены
    Когда я нажимаю кнопку "Сгенерировать варианты"
    Тогда система создаёт несколько вариантов расписания
    И я могу выбрать подходящий вариант

  @performance
  Сценарий: Работа с большим количеством шаблонов
    Дано в системе более 40 шаблонов смен
    Когда я прокручиваю список смен
    Тогда виртуальный список работает плавно
    И интерфейс остаётся стабильным
