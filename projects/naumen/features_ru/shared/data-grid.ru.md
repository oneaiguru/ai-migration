# features/shared/data-grid.feature

Функционал: Работа с таблицами данных
  Как пользователь системы управления персоналом
  Я хочу эффективно взаимодействовать с таблицами
  Чтобы просматривать и управлять информацией

  Предыстория:
    Дано я просматриваю таблицу данных в приложении

  Сценарий: Сортировка данных по столбцу
    Дано таблица содержит сортируемые столбцы
    Когда я нажимаю на заголовок столбца для сортировки
    Тогда данные сортируются по этому столбцу
    И на заголовке отображается индикатор сортировки
    Когда я нажимаю кнопку сортировки снова
    Тогда порядок сортировки меняется на обратный

  Сценарий: Фильтрация данных по столбцу
    Дано таблица содержит фильтруемые столбцы
    Когда я нажимаю кнопку фильтрации столбца
    Тогда появляются варианты фильтра
    Когда я применяю фильтр
    Тогда отображаются только строки, соответствующие фильтру
    И на столбце появляется индикатор фильтра

  Сценарий: Обновление данных
    Дано я просматриваю данные в таблице
    Когда я нажимаю кнопку обновления
    Тогда данные перезагружаются с сервера
    И отображается самая актуальная информация

  Сценарий: Производительность виртуального скролла
    Дано у меня есть большой набор данных (500+ элементов)
    Когда я прокручиваю таблицу
    Тогда прокрутка плавная и отзывчивая
    И отображаются только видимые строки
    И использование памяти остаётся стабильным

  Сценарий: Изменение ширины столбца
    Дано я просматриваю таблицу с изменяемыми столбцами
    Когда я перетаскиваю границу столбца
    Тогда ширина столбца меняется
    И макет таблицы остаётся стабильным

  Сценарий: Выбрать все элементы
    Когда я нажимаю чекбокс "Выбрать все" в заголовке
    Тогда все видимые элементы выделяются
    И кнопки массовых действий становятся активными
    Когда я снова нажимаю чекбокс "Выбрать все"
    Тогда все элементы снимаются с выделения

  @performance @virtualization @benchmark
  Сценарий: Оптимизация памяти для набора из 1000 строк
    Дано я загружаю таблицу с "1000 строками"
    Когда я прокручиваю список от начала до конца
    Тогда общий расход памяти не превышает "100MB"
    И рендерятся только видимые строки

  @performance @loading
  Сценарий: Ленивая подгрузка новых строк через Intersection Observer
    Дано таблица отображает первые 100 строк
    Когда я достигаю конца списка
    Тогда автоматически подгружаются следующие 100 строк
    И индикатор загрузки показывается кратковременно

  @performance @virtualization
  Сценарий: Плавная прокрутка не ниже 60fps
    Дано открыт список из более "500 элементов"
    Когда я быстро прокручиваю колесиком мыши
    Тогда частота кадров не падает ниже "60 FPS"

  @performance
  Сценарий: Очистка обработчиков после закрытия компонента
    Дано я закрываю страницу с таблицей
    Когда компонент списка размонтируется
    Тогда все слушатели прокрутки удаляются
    И утечек памяти не происходит

  @performance
  Сценарий: Отслеживание размера бандла после отключения функций
    Дано разработчик собирает модуль таблицы с отключёнными опциями
    Когда выполняется анализ Webpack
    Тогда итоговый размер бандла фиксируется для сравнения
