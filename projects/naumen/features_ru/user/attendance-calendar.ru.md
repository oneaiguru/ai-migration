# features/user/attendance-calendar.feature

Функционал: Просмотр календаря посещаемости
  Как сотрудник
  Я хочу просматривать календарь своей посещаемости
  Чтобы контролировать отсутствие и переработки

  Предыстория:
    Дано я вошёл в систему управления персоналом
    И у меня есть права сотрудника
    И я нахожусь на личной панели

  Сценарий: Просмотр календаря за месяц
    Когда я открываю календарь посещаемости за текущий месяц
    Тогда каждый день отображается цветовым статусом
    И выходные выделены другим оттенком

  Сценарий: Создание запроса на отгул из календаря
    Дано я нажимаю на будущую дату
    Когда выбираю "Запросить отгул"
    Тогда открывается форма заявки с выбранной датой

  Сценарий: Переключение на недельный вид
    Когда я переключаю календарь на недельный режим
    Тогда отображаются только семь дней
    И кнопки навигации позволяют перейти на следующую неделю

  Сценарий: Отображение праздника
    Когда в этом месяце есть государственный праздник
    Тогда день отмечен меткой "Праздник"

  @mobile
  Сценарий: Адаптивность календаря на мобильных устройствах
    Дано я открываю календарь на мобильном устройстве
    Тогда ячейки дней подстраиваются под маленький экран
    И управление касанием оптимизировано

  @accessibility @keyboard @a11y
  Сценарий: Навигация по календарю только клавиатурой
    Дано открыт календарь расписания
    Когда пользователь пользуется только клавиатурой
    Тогда Tab перемещает фокус между днями
    И Space или Enter активирует выбранный день
    И стрелки перемещают по дням
    И Escape закрывает подробности
    И фокус всегда визуально заметен

  @interaction @visual @feedback
  Сценарий: Перетаскивание со зрительной обратной связью
    Дано пользователь перетаскивает смену в календаре
    Когда начинается операция перетаскивания
    Тогда отображается полупрозрачный предварительный элемент
    И допустимые зоны подсвечиваются
    И запрещённые зоны блокируются визуально
    И курсор меняется в зависимости от зоны

  @visual @loading @skeleton
  Сценарий: Скелетоны при загрузке календаря
    Дано календарь загружается
    Когда данные месяца ещё не получены
    Тогда отображаются заготовки skeleton
    И анимация пульсации показывает процесс загрузки
    И макет не смещается при появлении данных

  @accessibility @voice @a11y
  Сценарий: Переход к следующему месяцу голосовой командой
    Дано включён голосовой ввод
    Когда сотрудник говорит "Следующий месяц"
    Тогда отображается календарь следующего месяца
    И фокус устанавливается на первое число
