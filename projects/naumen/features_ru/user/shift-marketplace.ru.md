# features/user/shift-marketplace.feature

Функционал: Маркетплейс смен
  Как сотрудник
  Я хочу обмениваться сменами с коллегами
  Чтобы гибко управлять личным расписанием

  Предыстория:
    Дано я вошёл в систему управления персоналом
    И у меня есть права сотрудника
    И я нахожусь на личной панели
    И коллеги разместили предложения смен на маркетплейсе

  @marketplace @realtime
  Сценарий: Просмотр доступных смен по умолчанию
    Когда я открываю страницу "Обмен сменами"
    Тогда я вижу список активных предложений
    И каждое предложение показывает дату, время и имя сотрудника
    И срочные предложения выделены

  @marketplace
  Сценарий: Фильтрация смен по дате и команде
    Дано в маркетплейсе отображается несколько предложений
    Когда я применяю фильтры "завтра" и команда "Поддержка клиентов"
    Тогда отображаются только подходящие предложения
    И в сводке фильтров видны мои параметры

  @marketplace
  Сценарий: Сортировка смен по популярности
    Дано я просматриваю доступные предложения
    Когда я сортирую их по "Популярные"
    Тогда первыми отображаются наиболее интересные предложения

  @marketplace @self-service
  Сценарий: Запросить смену через маркетплейс
    Дано я вижу подходящее предложение
    Когда я нажимаю "Запросить смену"
    Тогда мой интерес отправляется владельцу смены
    И счётчик интереса для предложения увеличивается

  @marketplace @chat
  Сценарий: Сообщение владельцу из карточки предложения
    Дано мне нужны дополнительные детали о смене
    Когда я открываю чат с владельцем предложения
    Тогда открывается окно чата для обмена сообщениями
    И я могу задать уточняющие вопросы

  @marketplace @realtime
  Сценарий: Получение новых предложений в реальном времени
    Дано маркетплейс открыт
    Когда другой сотрудник публикует новое предложение
    Тогда оно появляется автоматически без перезагрузки

  @marketplace @approval
  Сценарий: Одобрение обмена владельцем
    Дано я запросил смену у коллеги
    Когда коллега одобряет мой запрос
    Тогда я получаю уведомление об одобренном обмене
    И статус предложения меняется на "completed"

  @visual @loading @skeleton
  Сценарий: Отображение скелетонов при загрузке списка
    Дано я открываю раздел обмена сменами
    Когда данные предложений ещё загружаются
    Тогда отображаются скелетоны карточек
    И кнопки недоступны до завершения загрузки

  @visual @feedback
  Сценарий: Предпросмотр деталей при наведении
    Дано список предложений открыт
    Когда я навожу курсор на карточку смены
    Тогда появляется всплывающая подсказка с деталями
    И кнопка запроса становится заметнее

  @interaction @ux
  Сценарий: Перетаскивание карточки в личный календарь
    Дано я вижу подходящую смену в списке
    Когда я перетаскиваю карточку на свой календарь
    Тогда календарь подсвечивает допустимые даты
    И после отпускания создаётся запрос на обмен

  @visual @animation
  Сценарий: Плавная анимация при изменении статуса
    Дано моя заявка на обмен одобрена
    Когда статус предложения меняется на "completed"
    Тогда карточка плавно исчезает из списка
    И появляется уведомление об успешном обмене
