# EXACT TASKS FROM ROMAN - Direct Quotes

> **Source**: `/Users/m/git/clients/qbsf/ignore/qb-sf-communication-package/99.markdown`
> **Original Language**: Russian (WhatsApp/Telegram)
> **Date Range**: December 1, 2025 - November 7, 2025

---

## üî¥ TASK 1: FIX BROKEN INTEGRATION

### Roman's Exact Words (December 1, 21:57):

```
Roman Kapralov, [01.12.2025 21:57]
—É –Ω–∞—Å –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è. –ù–æ–º–µ—Ä –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–ø–µ—Ä—å.
–ü—Ä–æ–≤–µ—Ä—å –∑–∞–≤—Ç—Ä–∞. –£ –Ω–∞—Å –Ω–∞ –Ω–µ–¥–µ–ª–µ –ø–æ–∫–∞–∑
```

### English Translation:
> "Our integration stopped working. The number doesn't return anymore.
> Check it tomorrow. We have a demonstration this week."

### What "–ù–æ–º–µ—Ä –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç" Means:
**"The number doesn't return"** = Invoice ID is not being returned from the integration. When an Opportunity is created or updated, the `QB_Invoice_ID__c` field should populate with the QuickBooks invoice number, but it's not happening anymore.

### Context Before This:
Roman said the same day (Dec 1, 21:45):
```
Roman Kapralov, [01.12.2025 21:45]
—Å–ª–æ–≤–æ –ø–∞—Ü–∞–Ω–∞? ))))

Misha Granin, [01.12.2025 21:45]
–¥–∞. –ø–ª—é—Å –∑—É–± –¥–∞—é!
```
> Roman: "Your word as a friend?" / Misha: "Yes, plus I give you my tooth!" (Russian idiom for serious promise)

Then immediately (21:57):
```
Roman Kapralov, [01.12.2025 21:57]
—É –Ω–∞—Å –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è...
```
> The integration broke.

### The Escalation (Dec 2-3):

**Dec 2, 17:27**:
```
Roman Kapralov, [02.12.2025 17:27]
—É—Ç—Ä–æ —É–∂–µ –ø—Ä–æ—à–ª–æ

Roman Kapralov, [02.12.2025 17:27]
–∑—É–± –ø–æ–¥ —É–≥—Ä–æ–∑–æ–π
```
> "Morning is over" / "Your tooth is under threat" (broken promise)

**Dec 2, 23:06**:
```
Roman Kapralov, [02.12.2025 23:06]
–º–µ–ª–æ—á–∏ –¥–æ–¥–µ–ª–∞–ª ?
```
> "Did you finish the little things?" (implying the fixes should be simple details)

**Dec 3, 01:07-01:08**:
```
Roman Kapralov, [03.12.2025 01:07]
–ß–∞—Å?

Misha Granin, [03.12.2025 01:08]
–æ–∫–æ–ª–æ —Ç–æ–≥–æ
```
> Roman: "An hour?" / Misha: "About that" (still working at 1 AM)

**Dec 3, 02:21**:
```
Roman Kapralov, [03.12.2025 02:21]
–ù—É –Ω–∏—á–µ–≥–æ, –ø–æ —Å—Ç–∞—Ä–∏–∫–µ –±—É–¥–µ–º —Ç–µ—Å—Ç–∏—Ç—å

Roman Kapralov, [03.12.2025 02:21]
–£ —Ç–µ–±—è –∑–∞–ø—Ä–æ—Å –ª–∏–±–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ª–∏–±–æ –Ω–µ—Ç.

Roman Kapralov, [03.12.2025 02:21]
–¢–∞–∫ —á—Ç–æ –Ω–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π
```
> "No problem, we'll test the old way. Either the request goes through or it doesn't. So don't delay."

**Dec 3, 03:22** - LAST MESSAGE:
```
Roman Kapralov, [03.12.2025 03:22]
–ù—É –∫–∞–∫
```
> "So how is it?" (Waiting for answer - no response yet as of Dec 6)

---

## üü† TASK 2: ADD PAYMENT LINK FIELD (Additional Feature - Autumn Request)

### Roman's Initial Request (November 7, 15:28):

```
Roman Kapralov, [07.11.2025 15:28]
–ü—Ä–∏–≤–µ—Ç, –º–Ω–µ –Ω—É–∂–Ω–æ –∏–∑ QB –ø–æ–ª—É—á–∏—Ç—å –µ—â–µ –æ–¥–Ω–æ –ø–æ–ª–µ - "—Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É".
–ú–æ–∂–µ—à—å —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å? –µ—Å–ª–∏ –¥–∞ —Ç–æ –∫–æ–≥–¥–∞ –∏ –∑–∞ —Å–∫–æ–ª—å–∫–æ?

–ù—É –∏–ª–∏ —Å–∫–∞–∑–∞—Ç—å –≥–¥–µ –µ–≥–æ –≤–∑—è—Ç—å –∫—É–¥–∞ –¥–æ–±–∞–≤–∏—Ç—å –∏ —Ç–¥
```

### English Translation:
> "Hello, I need to get one more field from QB - 'payment link'.
> Can you do it? If yes, when and for how much?
>
> Or tell me where to get it, where to add it, etc."

### Detailed Requirement (November 7, 15:49):

```
Roman Kapralov, [07.11.2025 15:49]
–ù—É–∂–Ω–æ —á—Ç–æ–±—ã –≤ SalesForce –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∞—Å—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç
–≤–Ω–µ—à–Ω–∏–π –≤–∏–¥–∂–µ—Ç QB –≥–¥–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π –∏ –¥—Ä—É–≥–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏
```

### English Translation:
> "It needs to pass the payment link to SalesForce that opens the external QB widget
> where users can pay by card and other methods."

### Clarification on Scope (November 20, 15:39-15:41):

```
Roman Kapralov, [20.11.2025 15:39]
–î–∞–≤–∞–π —Å–Ω–∞—á–∞–ª–∞ —Å–æ —Å—Å—ã–ª–∫–æ–π —Ä–∞–∑–¥–µ—Ä–µ–º—Å—è. –ü–æ—Ç–æ–º –º—ã –ø—Ä–æ–≤–µ–¥–µ–º –ø—Ä—è–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç
—Å —á–∞—Å—Ç–∏—á–Ω–æ–π –æ–ø–ª–∞—Ç–æ–π –∏ —è —Ç–µ–±–µ —Å–∞–º –Ω–∞–ø–∏—à—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–æ—Å—Ç–∞–Ω–æ–≤–∫—É

Roman Kapralov, [20.11.2025 15:40]
–ï—Å–ª–∏ —Å—É–º–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å—É–º–º–æ–π —Å—á–µ—Ç–∞ —Ç–æ —Å—Ç–∞—Ç—É—Å –ø–æ–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ Paid

Roman Kapralov, [20.11.2025 15:41]
–ø–æ–∫–∞ –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–¥–æ —Ç—Ä–æ–≥–∞—Ç—å.

Roman Kapralov, [20.11.2025 15:41]
–ê —Ç–æ –≤—á–µ—Ä–∞ —á—Ç–æ —Ç–æ —É–∂–µ –ø–ª–æ—Ö–æ —Ä–∞–±–æ—Ç–∞–ª–æ - –∫–∞–∫ –±—É–¥—Ç–æ —É–ø–∞–ª–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ —è —Å–∞–º –Ω–µ —Å–º–æ—Ç—Ä–µ–ª
```

### English Translation:
> "Let's first deal with the link. Then we'll run an experiment with partial payment
> and I'll write you the exact specification.
>
> If the amount matches the invoice amount exactly, the status changes to Paid.
>
> Don't touch anything else for now.
>
> Because something wasn't working well yesterday - it seemed like the integration fell,
> but I didn't check it myself."

### Field Name (November 16, 20:59):

```
Roman Kapralov, [16.11.2025 20:59]
QB_Payment_Link__c
```

> The field name that should be created in Salesforce

### Question About Partial Payments (November 17, 13:28-14:41):

```
Roman Kapralov, [17.11.2025 13:28]
–ò –µ—â–µ –≤–æ–ø—Ä–æ—Å, –µ—Å–ª–∏ –ø–æ —Å—á–µ—Ç—É –ø—Ä–æ–π–¥–µ—Ç —á–∞—Å—Ç–∏—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞, –¥–∞–Ω–Ω—ã–µ –≤ sales force –ø—Ä–∏–¥—É—Ç?
–ò–ª–∏ —Ç–æ–ª—å–∫–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏ —Å—Ç–∞—Ç—É—Å—É paid?

Misha Granin, [17.11.2025 14:38]
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–∏–¥–µ—Ç –∫–æ–Ω–µ—á–Ω–æ. –≠—Ç–æ —É–∂–µ –Ω–∞–¥–æ —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–æ–µ –¥–æ–ø —Ä–µ—à–µ–Ω–∏–µ...

Roman Kapralov, [17.11.2025 14:40]
–î–∞ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –¥–µ–Ω–µ–≥ –≤ QB –Ω–∞–¥–æ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ SF.

Roman Kapralov, [17.11.2025 14:41]
–ï—Å–ª–∏ –≤ qb –µ—Å—Ç—å —Å—Ç–∞—Ç—É—Å —á–∞—Å—Ç–∏—á–Ω–æ –æ–ø–ª–∞—á–µ–Ω–æ - –º–æ–∂–Ω–æ –ø–æ –Ω–µ–º—É –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å
```

### English Translation:
> Roman: "And another question: if a partial payment goes through on the invoice,
> will the data come to Salesforce? Or only on creation and paid status?
>
> Misha: "Standard payment won't come, of course. This needs a completely different solution..."
>
> Roman: "Just, when money comes into QB, immediately transfer that value to SF.
> If QB has a 'partially paid' status - we can transfer based on that."

### CRITICAL: Don't Touch Anything Else (November 20, 15:41-15:43):

```
Roman Kapralov, [20.11.2025 15:41]
–ø–æ–∫–∞ –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–¥–æ —Ç—Ä–æ–≥–∞—Ç—å.

Roman Kapralov, [20.11.2025 15:42]
–ê —Ç–æ –≤—á–µ—Ä–∞ —á—Ç–æ —Ç–æ —É–∂–µ –ø–ª–æ—Ö–æ —Ä–∞–±–æ—Ç–∞–ª–æ - –∫–∞–∫ –±—É–¥—Ç–æ —É–ø–∞–ª–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ —è —Å–∞–º –Ω–µ —Å–º–æ—Ç—Ä–µ–ª

Misha Granin, [20.11.2025 15:42]
–¢–∞–∫ —á—Ç–æ —Ç–æ –º–µ–Ω—è–ª–æ—Å—å —É–∂–µ —Å —Ç–µ—Ö –ø–æ—Ä –∫–∞–∫ –º–æ–π –∫–æ–¥ –ª–µ—Ç–æ–º –¥–µ–ø–ª–æ–∏–ª–∏? –£–∂–µ —á—Ç–æ —Ç–æ —Å–¥–µ–ª–∞–Ω–æ?

Roman Kapralov, [20.11.2025 15:42]
–Ω–µ—Ç. –í –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –Ω–∏–∫—Ç–æ –Ω–µ –ª–µ–∑

Roman Kapralov, [20.11.2025 15:42]
–£ –Ω–∞—Å —Ç–∞–∫ –∏ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ç–æ–±–æ–π. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å Paid –ø—Ä–∏—Ö–æ–¥—è—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ SF –∏ —Å–¥–µ–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

Roman Kapralov, [20.11.2025 15:43]
–¢—É—Ä –Ω–µ –Ω–∞–¥–æ –Ω–∏—á–µ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
```

### English Translation:
> Roman: "Don't touch anything else for now.
>
> Because something wasn't working well yesterday - seemed like integration fell, but I didn't check.
>
> Misha: "Has anything changed since my code was deployed in summer? Has something been done already?"
>
> Roman: "No. Nobody touched the integration.
>
> We use what you built. When status is 'Paid', all data comes to SF and the deal closes.
>
> Don't change anything."

---

## üìã EXACT SCOPE OF WORK

### Task 1: Fix Integration (IMMEDIATE/BLOCKING)

**What's Broken**:
- Invoice ID ("–Ω–æ–º–µ—Ä") is not being returned
- As of December 1, 2025

**Root Cause** (from Nov 27 deployment errors):
```
REQUIRED_FIELD_MISSING: [Supplierc]
Code Coverage: 20% (need 75%)
OpportunityQuickBooksTrigger: 0% coverage
```

**Exact Requirements** (from Roman's words):
1. Fix the integration so it returns the invoice ID/number again
2. Do NOT change anything else in the working payment sync logic
3. Current logic: "–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å Paid –ø—Ä–∏—Ö–æ–¥—è—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ SF –∏ —Å–¥–µ–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è"
   (If status is Paid, all data comes to SF and the deal closes) - keep this working

**Scope**:
- Fix only what's broken
- Do NOT modify payment sync logic
- Do NOT change anything unrelated

---

### Task 2: Add Payment Link Field (SECONDARY)

**What to Add**:
```
Field Name:        QB_Payment_Link__c
Source:            QuickBooks (payment link)
Destination:       Salesforce Opportunity
Purpose:           Display clickable link to QB payment widget for users to pay
```

**Exact Workflow** (from Roman's description):
1. QB generates/has a payment link
2. Link is extracted from QB API response
3. Link is passed through middleware to Salesforce
4. Link is stored in QB_Payment_Link__c field
5. Users can click the link to open QB payment widget
6. Users can pay by card or other methods

**Current Status**:
- Field created: November 16, 2025 ‚úÖ (QB_Payment_Link__c)
- Implementation: NOT STARTED ‚ùå

**What NOT to Do**:
```
Roman Kapralov, [20.11.2025 15:41]
–ø–æ–∫–∞ –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–¥–æ —Ç—Ä–æ–≥–∞—Ç—å.
```
> "Don't touch anything else for now."

Only add the payment link. Don't modify:
- Payment sync logic
- Invoice creation logic
- Existing field mappings
- Scheduler/automation

---

## üéØ EXACT QUOTES FOR REQUIREMENTS

### "The Number Doesn't Return" (Task 1 Definition)

```
[Dec 1, 21:57]
"—É –Ω–∞—Å –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è. –ù–æ–º–µ—Ä –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–ø–µ—Ä—å."

= Integration is broken. Invoice ID is not being returned.
```

### "Payment Link from QB Widget" (Task 2 Definition)

```
[Nov 7, 15:49]
"–ù—É–∂–Ω–æ —á—Ç–æ–±—ã –≤ SalesForce –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∞—Å—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç
–≤–Ω–µ—à–Ω–∏–π –≤–∏–¥–∂–µ—Ç QB –≥–¥–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π –∏ –¥—Ä—É–≥–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏"

= Need to pass a payment link to SalesForce that opens the external QB widget
  where users can pay by card and other methods.
```

### "Only Do the Payment Link" (Task 2 Scope)

```
[Nov 20, 15:41]
"—Å–¥–µ–ª–∞–π —Å–µ–π—á–∞—Å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞—á—É —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É"

= Just do the payment link transmission now.
```

### "Don't Touch Anything Else" (Task 2 Warning)

```
[Nov 20, 15:41]
"–ø–æ–∫–∞ –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–¥–æ —Ç—Ä–æ–≥–∞—Ç—å."

= Don't touch anything else for now.
```

---

## üìä TASK PRIORITY & DEADLINE

### Task 1: Fix Integration
- **Priority**: üî¥ CRITICAL/BLOCKING
- **Reported**: December 1, 21:57
- **Expected Fix**: December 2 ("–∑–∞–≤—Ç—Ä–∞" = tomorrow)
- **Current Status**: NOT FIXED (as of Dec 6)
- **Roman's Patience**: EXHAUSTED
  - "–∑—É–± –ø–æ–¥ —É–≥—Ä–æ–∑–æ–π" (tooth under threat = broken promise)
  - "–º–µ–ª–æ—á–∏ –¥–æ–¥–µ–ª–∞–ª?" (did you finish the little things?)
  - Multiple messages asking for status
  - Last message Dec 3, 03:22 with no response for 3+ days

### Task 2: Add Payment Link
- **Priority**: üü† HIGH/SECONDARY
- **Requested**: November 7
- **Deadline Given**: November 13 (Misha promised "tomorrow")
- **Actual Status**: Still not done (1 month later)
- **Roman's Words**: "3 –Ω–µ–¥–µ–ª–∏!!!!! –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è" (3 weeks!!!!! to add one field)

### Demonstration Deadline
```
[Dec 1, 21:57]
"–£ –Ω–∞—Å –Ω–∞ –Ω–µ–¥–µ–ª–µ –ø–æ–∫–∞–∑"

= We have a demonstration this week (week of Dec 1-7)
```

Status: Unknown if demonstration already happened or still pending

---

## ‚úÖ DELIVERABLES

### For Task 1 (Fix Integration):
- [ ] Invoice ID returns correctly
- [ ] QB_Invoice_ID__c field populates when Opportunity stage = "Proposal and Agreement"
- [ ] All tests pass (10+ tests currently failing)
- [ ] Code coverage >= 75%
- [ ] OpportunityQuickBooksTrigger > 0% coverage
- [ ] Verified with test Opportunity

### For Task 2 (Add Payment Link):
- [ ] QB_Payment_Link__c field populated with payment link from QB
- [ ] Link is clickable in Salesforce
- [ ] Link opens QB payment widget
- [ ] Tested with real QB invoice
- [ ] No changes to existing payment sync logic

---

## üî¥ CRITICAL CONTEXT

### This is NOT about payment approval:
- Payment was already made September 4, 2025 ‚úÖ
- This is about fixing broken functionality + adding requested feature

### This is time-sensitive:
- Integration broken 5 days ago (Dec 1)
- Demonstration expected this week (Dec 1-7)
- Roman is frustrated with 3+ weeks delay on simple feature
- Last contact: Dec 3, 03:22 (no response for 3+ days)

### Roman's Patience Level:
```
[Dec 1, 21:12]
"–Ø —Ç–µ–±–µ –Ω–∞–ø–∏—Å–∞–ª 07 –Ω–æ—è–±—Ä—è. 3 –Ω–µ–¥–µ–ª–∏!!!!! –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è, –Ω—É –∫–∞–º–æ–Ω..."

= I wrote you on Nov 7. 3 WEEKS!!!!! to add one field, come on...
```

---

## üìù STATUS TO SEND TO ROMAN

When you start work, send update:

```
Roman!

I'm starting work on:

1. FIX INTEGRATION (Priority 1) - Invoice ID not returning
   - Diagnosing Supplierc field issue
   - Fixing test coverage
   - ETA: ~2 hours

2. ADD PAYMENT LINK (Priority 2) - QB_Payment_Link__c
   - Extract link from QB API
   - Pass through middleware
   - Store in Salesforce
   - ETA: ~3 hours

Will update you in 1 hour with progress.
```

---

*Extracted from authentic client communication*
*All quotes translated directly from Russian*
*Source: WhatsApp/Telegram Dec 1 - Nov 7, 2025*
