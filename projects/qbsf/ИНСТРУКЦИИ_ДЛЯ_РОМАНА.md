# üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –†–û–ú–ê–ù–ê

**–î–∞—Ç–∞**: 12 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–°—Ç–∞—Ç—É—Å**: –°–ï–†–í–ï–† –ó–ê–ü–£–©–ï–ù ‚úÖ - –ù–£–ñ–ù–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø OAUTH  

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û (–í–°–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´)

1. ‚úÖ **–û—à–∏–±–∫–∞ "Cannot find module 'express'"** - –ò–°–ü–†–ê–í–õ–ï–ù–û
2. ‚úÖ **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL Salesforce** - –£–ñ–ï –ë–´–õ –ü–†–ê–í–ò–õ–¨–ù–´–ô
3. ‚úÖ **–ó–∞–ø—É—â–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** - src/server.js –†–ê–ë–û–¢–ê–ï–¢
4. ‚úÖ **API –¥–æ—Å—Ç—É–ø–µ–Ω** - https://sqint.atocomm.eu/api/health –†–ê–ë–û–¢–ê–ï–¢

---

## üîê –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –†–û–ú–ê–ù–£ –°–ï–ô–ß–ê–°

### –®–ê–ì 1: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Salesforce
–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ:
```
https://sqint.atocomm.eu/auth/salesforce
```
- –í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ Salesforce
- –ù–∞–∂–º–∏—Ç–µ "Allow" –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –®–ê–ì 2: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è QuickBooks  
–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ:
```
https://sqint.atocomm.eu/auth/quickbooks
```
- –í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ QuickBooks
- –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é
- –ù–∞–∂–º–∏—Ç–µ "Authorize"

### –®–ê–ì 3: –û–±–Ω–æ–≤–∏—Ç–µ Salesforce
–í Salesforce —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
```
Setup ‚Üí Custom Settings ‚Üí QuickBooks_Settings__c ‚Üí Manage

API_Key__c = $API_KEY
Middleware_URL__c = https://sqint.atocomm.eu
```

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –°–ï–†–í–ï–†–ê

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç:
curl -H 'X-API-Key: $API_KEY' \
     https://sqint.atocomm.eu/api/health

# –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
{"success":true,"status":"healthy","timestamp":"..."}
```

---

## üîç –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ –õ–û–ì–ò

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh roman@pve.atocomm.eu -p2323
–ü–∞—Ä–æ–ª—å: $SSH_PASS

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f /opt/qb-integration/server.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep "node src/server.js"
```

---

## ‚úÖ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ OAuth:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é Opportunity –≤ Salesforce
2. –ò–∑–º–µ–Ω–∏—Ç–µ Stage –Ω–∞ "Proposal and Agreement"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Invoice —Å–æ–∑–¥–∞–Ω –≤ QuickBooks
4. –û—Ç–º–µ—Ç—å—Ç–µ –æ–ø–ª–∞—Ç—É –≤ QuickBooks
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Opportunity –æ–±–Ω–æ–≤–∏–ª–∞—Å—å –≤ Salesforce

---

## üìû –ï–°–õ–ò –ï–°–¢–¨ –ü–†–û–ë–õ–ï–ú–´

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:
```bash
cd /opt/qb-integration
pkill -f "node src/server.js"
sudo nohup node src/server.js > server.log 2>&1 &
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏:
```bash
grep ERROR /opt/qb-integration/server.log | tail -20
```

---

## üí∞ –î–õ–Ø –û–ü–õ–ê–¢–´

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
- ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ —Å —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –∏—é–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
- ‚úÖ Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

**–û—Å—Ç–∞–ª–æ—Å—å**:
- ‚è≥ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å OAuth (–¥–µ–ª–∞–µ—Ç –†–æ–º–∞–Ω)
- ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

**–ü–æ—Å–ª–µ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—Ç—å.**

---

## üìù –í–ê–ñ–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

**API –ö–ª—é—á –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**:
```
$API_KEY
```

**URL Middleware**:
```
https://sqint.atocomm.eu
```

**–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω**:
```
/opt/qb-integration.backup.20250812-124312
```

---

**–°–ï–†–í–ï–† –†–ê–ë–û–¢–ê–ï–¢! –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å OAuth.**