# Пакет реализации VPN

Этот пакет содержит все необходимые компоненты для реализации полноценного системного VPN в вашем Android-приложении с интеграцией Xray Core.

## Содержимое

### Реализация JNI моста
- `jni/hev_socks5_tunnel.cpp` - C++ JNI мост для соединения TUN интерфейса с SOCKS5 прокси

### UI компоненты
- `layouts/activity_app_selection.xml` - Макет для активности выбора приложений
- `layouts/item_app.xml` - Макет для отдельных элементов списка приложений
- `layouts/nav_header.xml` - Макет для заголовка навигационной панели
- `layouts/nav_menu.xml` - Меню для навигационной панели
- `layouts/main_menu.xml` - Главное меню опций

### Активности и сервисы
- `activity/TProxyService.kt` - VPN сервис с реализацией TUN интерфейса
- `activity/AppSelectionActivity.kt` - Активность для выбора приложений, исключаемых из VPN

### Конфигурация
- `tunnel_config_template.yaml` - Пример конфигурации для tun2socks моста

### Документация
- `docs/INTEGRATION_GUIDE.md` - Подробное руководство по интеграции VPN компонентов

### Тесты
- `tests/HevSocks5TunnelJniTest.java` - JUnit тест для JNI моста

## Шаги интеграции

1. Добавьте JNI мост в нативный код вашего проекта
2. Добавьте макеты в ресурсы
3. Добавьте активности и сервисы в исходный код
4. Зарегистрируйте компоненты в AndroidManifest.xml
5. Настройте CMake для включения библиотеки hev-socks5-tunnel
6. Следуйте подробным инструкциям в INTEGRATION_GUIDE.md

## Требования

- Android SDK 24+
- Native Development Kit (NDK)
- Интеграция библиотеки Xray Core AAR в ваш проект
- Поддержка CMake в вашей сборке

## Тестирование

Файл JUnit теста демонстрирует, как тестировать JNI мост без необходимости наличия фактической нативной библиотеки. Он использует моделирование и рефлексию для имитации поведения моста.

Для полного интеграционного тестирования вам нужно запустить приложение на устройстве и проверить:
1. Установлено ли VPN соединение
2. Весь ли трафик проходит через VPN
3. Работает ли корректно исключение приложений